import{useApi as e,defineInterface as t}from"@directus/extensions-sdk";import{useI18n as a}from"vue-i18n";import{defineComponent as l,inject as o,toRef as n,watch as i,resolveComponent as d,openBlock as r,createBlock as s}from"vue";import{defineStore as c}from"pinia";var p={storeCustomForGift:c({id:"storeCustomForGift",state:()=>({dynamicFilters:[]}),getters:{},actions:{async setData(e){const t=e.map((e=>({...e,choices:e.choices.filter((t=>t.value<=e.denomination))})));this.dynamicFilters=t},getData(e,t){var a;const l=null==(a=this.dynamicFilters)?void 0:a.find((t=>{var a;return t.brand==(null==(a=null==e?void 0:e.client_product_mapping_sd_brand_details_1_id)?void 0:a.id)}));t.value=l?l.choices:[]}}})},u={url:{sp_brand:"items/client_product_mapping_sd_brand_details_1"},fields:{sp_brand:["id","sd_brand_details_id.sku.amount"]}},m=l({props:{disabled:{type:Boolean,default:!1},baseForm:{type:Boolean,default:!1},value:{type:Array,default:null},collection:{type:String,default:""},choices:{type:Array,default:null},icon:{type:String,default:null},allowNone:{type:Boolean,default:!1},placeholder:{type:String,default:null},allowOther:{type:Boolean,default:!1},previewThreshold:{type:Number,default:3}},emits:["input"],setup(t,{emit:l}){const d=o("values"),{t:r}=a(),s=p.storeCustomForGift(),c=n([]),m=e();return!t.baseForm&&s.getData(d.value,c),i((()=>{var e,t,a;return[null==(e=d.value)?void 0:e.denomination,null==(a=null==(t=d.value)?void 0:t.brands)?void 0:a.create]}),(()=>{var e,a;if(t.baseForm){const t={params:{filter:{_and:[{id:{_in:null==(a=null==(e=null==d?void 0:d.value)?void 0:e.brands)?void 0:a.create.map((e=>e.client_product_mapping_sd_brand_details_1_id.id))}}]},fields:u.fields.sp_brand}};m.get(u.url.sp_brand,t).then((e=>{const t=e.data.data.map((e=>{var t,a;return{denomination:null==(t=null==d?void 0:d.value)?void 0:t.denomination,brand:e.id,choices:null==(a=e.sd_brand_details_id.sku)?void 0:a.map((e=>({text:e.amount,value:e.amount})))}}));s.setData(t)}))}})),{t:r,updateValue:function(e){l("input",e)},dataChoices:c,storeGiftCard:s}}});m.render=function(e,t,a,l,o,n){const i=d("interface-select-multiple-dropdown");return r(),s(i,{disabled:e.disabled,"allow-other":e.allowOther,"allow-none":e.allowNone,choices:e.dataChoices,value:e.value,collection:e.collection,icon:e.icon,placeholder:e.placeholder,"preview-threshold":e.previewThreshold,onInput:t[0]||(t[0]=t=>e.updateValue(t))},null,8,["disabled","allow-other","allow-none","choices","value","collection","icon","placeholder","preview-threshold"])},m.__file="src/interface.vue";var f=t({id:"custom-multiple",name:"custom-multiple",description:"$t:interfaces.select-multiple-dropdown.description",icon:"arrow_drop_down_circle",component:m,types:["json","csv"],group:"selection",options:{standard:[{field:"baseForm",name:"$t:sd.custom_interface_many_to_many.base_form",schema:{default_value:!1},meta:{interface:"boolean",options:{label:"$t:sd.custom_interface_many_to_many.base_form_label"},width:"half"}},{field:"choices",type:"json",name:"$t:choices",meta:{width:"full",interface:"list",options:{placeholder:"$t:interfaces.select-dropdown.choices_placeholder",template:"{{ text }}",fields:[{field:"text",type:"string",name:"$t:text",meta:{width:"half",interface:"system-input-translated-string",required:!0,options:{placeholder:"$t:interfaces.select-dropdown.choices_name_placeholder"}}},{field:"value",type:"string",name:"$t:value",meta:{width:"half",interface:"input",required:!0,options:{font:"monospace",placeholder:"$t:interfaces.select-dropdown.choices_value_placeholder"}}}]}}},{field:"allowOther",name:"$t:interfaces.select-dropdown.allow_other",type:"boolean",meta:{width:"half",interface:"boolean",options:{label:"$t:interfaces.select-dropdown.allow_other_label"}},schema:{default_value:!1}},{field:"allowNone",name:"$t:interfaces.select-dropdown.allow_none",type:"boolean",meta:{width:"half",interface:"boolean",options:{label:"$t:interfaces.select-dropdown.allow_none_label"}},schema:{default_value:!1}},{field:"placeholder",name:"$t:placeholder",type:"string",meta:{width:"half",interface:"system-input-translated-string",options:{placeholder:"$t:enter_a_placeholder"}}},{field:"icon",name:"$t:icon",type:"string",meta:{width:"half",interface:"select-icon"}}],advanced:[{field:"previewThreshold",name:"$t:interfaces.select-dropdown.preview_threshold",type:"integer",meta:{width:"half",interface:"input"},schema:{default_value:3}}]},recommendedDisplays:["labels"]});export{f as default};
