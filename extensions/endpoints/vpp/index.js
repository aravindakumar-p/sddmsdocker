"use strict";var e=require("http"),a=require("https"),n=require("url"),i=require("stream"),t=require("assert"),o=require("zlib"),r=require("util"),s=require("path"),c=require("fs"),l=require("node:http"),u=require("node:https"),p=require("node:zlib"),d=require("node:stream"),m=require("node:buffer"),h=require("node:util"),f=require("node:url"),g=require("node:net");function v(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}require("node:fs"),require("node:path");var b=v(e),y=v(a),x=v(n),w=v(i),_=v(t),S=v(o),E=v(r),C=v(s),k=v(c),O=v(l),I=v(u),T=v(p),j=v(d),P="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var A,R={exports:{}},B=function(e,a){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return e.apply(a,n)}},N=B,D=Object.prototype.toString,L=(A=Object.create(null),function(e){var a=D.call(e);return A[a]||(A[a]=a.slice(8,-1).toLowerCase())});function V(e){return e=e.toLowerCase(),function(a){return L(a)===e}}function F(e){return Array.isArray(e)}function z(e){return void 0===e}var q=V("ArrayBuffer");function U(e){return null!==e&&"object"==typeof e}function $(e){if("object"!==L(e))return!1;var a=Object.getPrototypeOf(e);return null===a||a===Object.prototype}var M=V("Date"),Q=V("File"),G=V("Blob"),K=V("FileList");function W(e){return"[object Function]"===D.call(e)}var H=V("URLSearchParams");function Y(e,a){if(null!=e)if("object"!=typeof e&&(e=[e]),F(e))for(var n=0,i=e.length;n<i;n++)a.call(null,e[n],n,e);else for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.call(null,e[t],t,e)}var Z,J=(Z="undefined"!=typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return Z&&e instanceof Z}),X={isArray:F,isArrayBuffer:q,isBuffer:function(e){return null!==e&&!z(e)&&null!==e.constructor&&!z(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var a="[object FormData]";return e&&("function"==typeof FormData&&e instanceof FormData||D.call(e)===a||W(e.toString)&&e.toString()===a)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&q(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:U,isPlainObject:$,isUndefined:z,isDate:M,isFile:Q,isBlob:G,isFunction:W,isStream:function(e){return U(e)&&W(e.pipe)},isURLSearchParams:H,isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:Y,merge:function e(){var a={};function n(n,i){$(a[i])&&$(n)?a[i]=e(a[i],n):$(n)?a[i]=e({},n):F(n)?a[i]=n.slice():a[i]=n}for(var i=0,t=arguments.length;i<t;i++)Y(arguments[i],n);return a},extend:function(e,a,n){return Y(a,(function(a,i){e[i]=n&&"function"==typeof a?N(a,n):a})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,a,n,i){e.prototype=Object.create(a.prototype,i),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)},toFlatObject:function(e,a,n){var i,t,o,r={};a=a||{};do{for(t=(i=Object.getOwnPropertyNames(e)).length;t-- >0;)r[o=i[t]]||(a[o]=e[o],r[o]=!0);e=Object.getPrototypeOf(e)}while(e&&(!n||n(e,a))&&e!==Object.prototype);return a},kindOf:L,kindOfTest:V,endsWith:function(e,a,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=a.length;var i=e.indexOf(a,n);return-1!==i&&i===n},toArray:function(e){if(!e)return null;var a=e.length;if(z(a))return null;for(var n=new Array(a);a-- >0;)n[a]=e[a];return n},isTypedArray:J,isFileList:K},ee=X;function ae(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var ne=function(e,a,n){if(!a)return e;var i;if(n)i=n(a);else if(ee.isURLSearchParams(a))i=a.toString();else{var t=[];ee.forEach(a,(function(e,a){null!=e&&(ee.isArray(e)?a+="[]":e=[e],ee.forEach(e,(function(e){ee.isDate(e)?e=e.toISOString():ee.isObject(e)&&(e=JSON.stringify(e)),t.push(ae(a)+"="+ae(e))})))})),i=t.join("&")}if(i){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e},ie=X;function te(){this.handlers=[]}te.prototype.use=function(e,a,n){return this.handlers.push({fulfilled:e,rejected:a,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},te.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},te.prototype.forEach=function(e){ie.forEach(this.handlers,(function(a){null!==a&&e(a)}))};var oe=te,re=X,se=X;function ce(e,a,n,i,t){Error.call(this),this.message=e,this.name="AxiosError",a&&(this.code=a),n&&(this.config=n),i&&(this.request=i),t&&(this.response=t)}se.inherits(ce,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var le=ce.prototype,ue={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(e){ue[e]={value:e}})),Object.defineProperties(ce,ue),Object.defineProperty(le,"isAxiosError",{value:!0}),ce.from=function(e,a,n,i,t,o){var r=Object.create(le);return se.toFlatObject(e,r,(function(e){return e!==Error.prototype})),ce.call(r,e.message,a,n,i,t),r.name=e.name,o&&Object.assign(r,o),r};var pe=ce,de={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},me=X;var he=function(e,a){a=a||new FormData;var n=[];function i(e){return null===e?"":me.isDate(e)?e.toISOString():me.isArrayBuffer(e)||me.isTypedArray(e)?"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}return function e(t,o){if(me.isPlainObject(t)||me.isArray(t)){if(-1!==n.indexOf(t))throw Error("Circular reference detected in "+o);n.push(t),me.forEach(t,(function(n,t){if(!me.isUndefined(n)){var r,s=o?o+"."+t:t;if(n&&!o&&"object"==typeof n)if(me.endsWith(t,"{}"))n=JSON.stringify(n);else if(me.endsWith(t,"[]")&&(r=me.toArray(n)))return void r.forEach((function(e){!me.isUndefined(e)&&a.append(s,i(e))}));e(n,s)}})),n.pop()}else a.append(o,i(t))}(e),a},fe=pe,ge=function(e,a,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?a(new fe("Request failed with status code "+n.status,[fe.ERR_BAD_REQUEST,fe.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)},ve=X,be=ve.isStandardBrowserEnv()?{write:function(e,a,n,i,t,o){var r=[];r.push(e+"="+encodeURIComponent(a)),ve.isNumber(n)&&r.push("expires="+new Date(n).toGMTString()),ve.isString(i)&&r.push("path="+i),ve.isString(t)&&r.push("domain="+t),!0===o&&r.push("secure"),document.cookie=r.join("; ")},read:function(e){var a=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return a?decodeURIComponent(a[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},ye=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},xe=function(e,a){return a?e.replace(/\/+$/,"")+"/"+a.replace(/^\/+/,""):e},we=function(e,a){return e&&!ye(a)?xe(e,a):a},_e=X,Se=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],Ee=X,Ce=Ee.isStandardBrowserEnv()?function(){var e,a=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var i=e;return a&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(a){var n=Ee.isString(a)?i(a):a;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0},ke=pe;function Oe(e){ke.call(this,null==e?"canceled":e,ke.ERR_CANCELED),this.name="CanceledError"}X.inherits(Oe,ke,{__CANCEL__:!0});var Ie,Te=Oe,je=X,Pe=ge,Ae=be,Re=ne,Be=we,Ne=function(e){var a,n,i,t={};return e?(_e.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),a=_e.trim(e.substr(0,i)).toLowerCase(),n=_e.trim(e.substr(i+1)),a){if(t[a]&&Se.indexOf(a)>=0)return;t[a]="set-cookie"===a?(t[a]?t[a]:[]).concat([n]):t[a]?t[a]+", "+n:n}})),t):t},De=Ce,Le=de,Ve=pe,Fe=Te,ze=function(e){var a=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return a&&a[1]||""},qe=function(e){return new Promise((function(a,n){var i,t=e.data,o=e.headers,r=e.responseType;function s(){e.cancelToken&&e.cancelToken.unsubscribe(i),e.signal&&e.signal.removeEventListener("abort",i)}je.isFormData(t)&&je.isStandardBrowserEnv()&&delete o["Content-Type"];var c=new XMLHttpRequest;if(e.auth){var l=e.auth.username||"",u=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.Authorization="Basic "+btoa(l+":"+u)}var p=Be(e.baseURL,e.url);function d(){if(c){var i="getAllResponseHeaders"in c?Ne(c.getAllResponseHeaders()):null,t={data:r&&"text"!==r&&"json"!==r?c.response:c.responseText,status:c.status,statusText:c.statusText,headers:i,config:e,request:c};Pe((function(e){a(e),s()}),(function(e){n(e),s()}),t),c=null}}if(c.open(e.method.toUpperCase(),Re(p,e.params,e.paramsSerializer),!0),c.timeout=e.timeout,"onloadend"in c?c.onloadend=d:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(d)},c.onabort=function(){c&&(n(new Ve("Request aborted",Ve.ECONNABORTED,e,c)),c=null)},c.onerror=function(){n(new Ve("Network Error",Ve.ERR_NETWORK,e,c,c)),c=null},c.ontimeout=function(){var a=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",i=e.transitional||Le;e.timeoutErrorMessage&&(a=e.timeoutErrorMessage),n(new Ve(a,i.clarifyTimeoutError?Ve.ETIMEDOUT:Ve.ECONNABORTED,e,c)),c=null},je.isStandardBrowserEnv()){var m=(e.withCredentials||De(p))&&e.xsrfCookieName?Ae.read(e.xsrfCookieName):void 0;m&&(o[e.xsrfHeaderName]=m)}"setRequestHeader"in c&&je.forEach(o,(function(e,a){void 0===t&&"content-type"===a.toLowerCase()?delete o[a]:c.setRequestHeader(a,e)})),je.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),r&&"json"!==r&&(c.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&c.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(i=function(e){c&&(n(!e||e&&e.type?new Fe:e),c.abort(),c=null)},e.cancelToken&&e.cancelToken.subscribe(i),e.signal&&(e.signal.aborted?i():e.signal.addEventListener("abort",i))),t||(t=null);var h=ze(p);h&&-1===["http","https","file"].indexOf(h)?n(new Ve("Unsupported protocol "+h+":",Ve.ERR_BAD_REQUEST,e)):c.send(t)}))},Ue={exports:{}},$e=x.default,Me=$e.URL,Qe=b.default,Ge=y.default,Ke=w.default.Writable,We=_.default,He=function(){if(!Ie){try{Ie=require("debug")("follow-redirects")}catch(e){}"function"!=typeof Ie&&(Ie=function(){})}Ie.apply(null,arguments)},Ye=["abort","aborted","connect","error","socket","timeout"],Ze=Object.create(null);Ye.forEach((function(e){Ze[e]=function(a,n,i){this._redirectable.emit(e,a,n,i)}}));var Je=ca("ERR_INVALID_URL","Invalid URL",TypeError),Xe=ca("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),ea=ca("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),aa=ca("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),na=ca("ERR_STREAM_WRITE_AFTER_END","write after end");function ia(e,a){Ke.call(this),this._sanitizeOptions(e),this._options=e,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],a&&this.on("response",a);var n=this;this._onNativeResponse=function(e){n._processResponse(e)},this._performRequest()}function ta(e){var a={maxRedirects:21,maxBodyLength:10485760},n={};return Object.keys(e).forEach((function(i){var t=i+":",o=n[t]=e[i],r=a[i]=Object.create(o);Object.defineProperties(r,{request:{value:function(e,i,o){if(ua(e)){var r;try{r=ra(new Me(e))}catch(a){r=$e.parse(e)}if(!ua(r.protocol))throw new Je({input:e});e=r}else Me&&e instanceof Me?e=ra(e):(o=i,i=e,e={protocol:t});return pa(i)&&(o=i,i=null),(i=Object.assign({maxRedirects:a.maxRedirects,maxBodyLength:a.maxBodyLength},e,i)).nativeProtocols=n,ua(i.host)||ua(i.hostname)||(i.hostname="::1"),We.equal(i.protocol,t,"protocol mismatch"),He("options",i),new ia(i,o)},configurable:!0,enumerable:!0,writable:!0},get:{value:function(e,a,n){var i=r.request(e,a,n);return i.end(),i},configurable:!0,enumerable:!0,writable:!0}})})),a}function oa(){}function ra(e){var a={protocol:e.protocol,hostname:e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:e.pathname+e.search,href:e.href};return""!==e.port&&(a.port=Number(e.port)),a}function sa(e,a){var n;for(var i in a)e.test(i)&&(n=a[i],delete a[i]);return null==n?void 0:String(n).trim()}function ca(e,a,n){function i(n){Error.captureStackTrace(this,this.constructor),Object.assign(this,n||{}),this.code=e,this.message=this.cause?a+": "+this.cause.message:a}return i.prototype=new(n||Error),i.prototype.constructor=i,i.prototype.name="Error ["+e+"]",i}function la(e){for(var a of Ye)e.removeListener(a,Ze[a]);e.on("error",oa),e.abort()}function ua(e){return"string"==typeof e||e instanceof String}function pa(e){return"function"==typeof e}ia.prototype=Object.create(Ke.prototype),ia.prototype.abort=function(){la(this._currentRequest),this.emit("abort")},ia.prototype.write=function(e,a,n){if(this._ending)throw new na;if(!ua(e)&&("object"!=typeof(i=e)||!("length"in i)))throw new TypeError("data should be a string, Buffer or Uint8Array");var i;pa(a)&&(n=a,a=null),0!==e.length?this._requestBodyLength+e.length<=this._options.maxBodyLength?(this._requestBodyLength+=e.length,this._requestBodyBuffers.push({data:e,encoding:a}),this._currentRequest.write(e,a,n)):(this.emit("error",new aa),this.abort()):n&&n()},ia.prototype.end=function(e,a,n){if(pa(e)?(n=e,e=a=null):pa(a)&&(n=a,a=null),e){var i=this,t=this._currentRequest;this.write(e,a,(function(){i._ended=!0,t.end(null,null,n)})),this._ending=!0}else this._ended=this._ending=!0,this._currentRequest.end(null,null,n)},ia.prototype.setHeader=function(e,a){this._options.headers[e]=a,this._currentRequest.setHeader(e,a)},ia.prototype.removeHeader=function(e){delete this._options.headers[e],this._currentRequest.removeHeader(e)},ia.prototype.setTimeout=function(e,a){var n=this;function i(a){a.setTimeout(e),a.removeListener("timeout",a.destroy),a.addListener("timeout",a.destroy)}function t(a){n._timeout&&clearTimeout(n._timeout),n._timeout=setTimeout((function(){n.emit("timeout"),o()}),e),i(a)}function o(){n._timeout&&(clearTimeout(n._timeout),n._timeout=null),n.removeListener("abort",o),n.removeListener("error",o),n.removeListener("response",o),a&&n.removeListener("timeout",a),n.socket||n._currentRequest.removeListener("socket",t)}return a&&this.on("timeout",a),this.socket?t(this.socket):this._currentRequest.once("socket",t),this.on("socket",i),this.on("abort",o),this.on("error",o),this.on("response",o),this},["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach((function(e){ia.prototype[e]=function(a,n){return this._currentRequest[e](a,n)}})),["aborted","connection","socket"].forEach((function(e){Object.defineProperty(ia.prototype,e,{get:function(){return this._currentRequest[e]}})})),ia.prototype._sanitizeOptions=function(e){if(e.headers||(e.headers={}),e.host&&(e.hostname||(e.hostname=e.host),delete e.host),!e.pathname&&e.path){var a=e.path.indexOf("?");a<0?e.pathname=e.path:(e.pathname=e.path.substring(0,a),e.search=e.path.substring(a))}},ia.prototype._performRequest=function(){var e=this._options.protocol,a=this._options.nativeProtocols[e];if(a){if(this._options.agents){var n=e.slice(0,-1);this._options.agent=this._options.agents[n]}var i=this._currentRequest=a.request(this._options,this._onNativeResponse);for(var t of(i._redirectable=this,Ye))i.on(t,Ze[t]);if(this._currentUrl=/^\//.test(this._options.path)?$e.format(this._options):this._options.path,this._isRedirect){var o=0,r=this,s=this._requestBodyBuffers;!function e(a){if(i===r._currentRequest)if(a)r.emit("error",a);else if(o<s.length){var n=s[o++];i.finished||i.write(n.data,n.encoding,e)}else r._ended&&i.end()}()}}else this.emit("error",new TypeError("Unsupported protocol "+e))},ia.prototype._processResponse=function(e){var a=e.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:e.headers,statusCode:a});var n=e.headers.location;if(!n||!1===this._options.followRedirects||a<300||a>=400)return e.responseUrl=this._currentUrl,e.redirects=this._redirects,this.emit("response",e),void(this._requestBodyBuffers=[]);if(la(this._currentRequest),e.destroy(),++this._redirectCount>this._options.maxRedirects)this.emit("error",new ea);else{var i,t=this._options.beforeRedirect;t&&(i=Object.assign({Host:e.req.getHeader("host")},this._options.headers));var o=this._options.method;((301===a||302===a)&&"POST"===this._options.method||303===a&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],sa(/^content-/i,this._options.headers));var r,s=sa(/^host$/i,this._options.headers),c=$e.parse(this._currentUrl),l=s||c.host,u=/^\w+:/.test(n)?this._currentUrl:$e.format(Object.assign(c,{host:l}));try{r=$e.resolve(u,n)}catch(e){return void this.emit("error",new Xe({cause:e}))}He("redirecting to",r),this._isRedirect=!0;var p=$e.parse(r);if(Object.assign(this._options,p),(p.protocol!==c.protocol&&"https:"!==p.protocol||p.host!==l&&!function(e,a){We(ua(e)&&ua(a));var n=e.length-a.length-1;return n>0&&"."===e[n]&&e.endsWith(a)}(p.host,l))&&sa(/^(?:authorization|cookie)$/i,this._options.headers),pa(t)){var d={headers:e.headers,statusCode:a},m={url:u,method:o,headers:i};try{t(this._options,d,m)}catch(e){return void this.emit("error",e)}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(e){this.emit("error",new Xe({cause:e}))}}},Ue.exports=ta({http:Qe,https:Ge}),Ue.exports.wrap=ta;var da="0.27.2",ma=X,ha=ge,fa=we,ga=ne,va=b.default,ba=y.default,ya=Ue.exports.http,xa=Ue.exports.https,wa=x.default,_a=S.default,Sa=da,Ea=de,Ca=pe,ka=Te,Oa=/https:?/,Ia=["http:","https:","file:"];function Ta(e,a,n){if(e.hostname=a.host,e.host=a.host,e.port=a.port,e.path=n,a.auth){var i=Buffer.from(a.auth.username+":"+a.auth.password,"utf8").toString("base64");e.headers["Proxy-Authorization"]="Basic "+i}e.beforeRedirect=function(e){e.headers.host=e.host,Ta(e,a,e.href)}}var ja=function(e){return new Promise((function(a,n){var i;function t(){e.cancelToken&&e.cancelToken.unsubscribe(i),e.signal&&e.signal.removeEventListener("abort",i)}var o=function(e){t(),a(e)},r=!1,s=function(e){t(),r=!0,n(e)},c=e.data,l=e.headers,u={};if(Object.keys(l).forEach((function(e){u[e.toLowerCase()]=e})),"user-agent"in u?l[u["user-agent"]]||delete l[u["user-agent"]]:l["User-Agent"]="axios/"+Sa,ma.isFormData(c)&&ma.isFunction(c.getHeaders))Object.assign(l,c.getHeaders());else if(c&&!ma.isStream(c)){if(Buffer.isBuffer(c));else if(ma.isArrayBuffer(c))c=Buffer.from(new Uint8Array(c));else{if(!ma.isString(c))return s(new Ca("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",Ca.ERR_BAD_REQUEST,e));c=Buffer.from(c,"utf-8")}if(e.maxBodyLength>-1&&c.length>e.maxBodyLength)return s(new Ca("Request body larger than maxBodyLength limit",Ca.ERR_BAD_REQUEST,e));u["content-length"]||(l["Content-Length"]=c.length)}var p=void 0;e.auth&&(p=(e.auth.username||"")+":"+(e.auth.password||""));var d=fa(e.baseURL,e.url),m=wa.parse(d),h=m.protocol||Ia[0];if(-1===Ia.indexOf(h))return s(new Ca("Unsupported protocol "+h,Ca.ERR_BAD_REQUEST,e));if(!p&&m.auth){var f=m.auth.split(":");p=(f[0]||"")+":"+(f[1]||"")}p&&u.authorization&&delete l[u.authorization];var g=Oa.test(h),v=g?e.httpsAgent:e.httpAgent;try{ga(m.path,e.params,e.paramsSerializer).replace(/^\?/,"")}catch(a){var b=new Error(a.message);b.config=e,b.url=e.url,b.exists=!0,s(b)}var y={path:ga(m.path,e.params,e.paramsSerializer).replace(/^\?/,""),method:e.method.toUpperCase(),headers:l,agent:v,agents:{http:e.httpAgent,https:e.httpsAgent},auth:p};e.socketPath?y.socketPath=e.socketPath:(y.hostname=m.hostname,y.port=m.port);var x,w=e.proxy;if(!w&&!1!==w){var _=h.slice(0,-1)+"_proxy",S=process.env[_]||process.env[_.toUpperCase()];if(S){var E=wa.parse(S),C=process.env.no_proxy||process.env.NO_PROXY,k=!0;if(C){var O=C.split(",").map((function(e){return e.trim()}));k=!O.some((function(e){return!!e&&("*"===e||("."===e[0]&&m.hostname.substr(m.hostname.length-e.length)===e||m.hostname===e))}))}if(k&&(w={host:E.hostname,port:E.port,protocol:E.protocol},E.auth)){var I=E.auth.split(":");w.auth={username:I[0],password:I[1]}}}}w&&(y.headers.host=m.hostname+(m.port?":"+m.port:""),Ta(y,w,h+"//"+m.hostname+(m.port?":"+m.port:"")+y.path));var T=g&&(!w||Oa.test(w.protocol));e.transport?x=e.transport:0===e.maxRedirects?x=T?ba:va:(e.maxRedirects&&(y.maxRedirects=e.maxRedirects),e.beforeRedirect&&(y.beforeRedirect=e.beforeRedirect),x=T?xa:ya),e.maxBodyLength>-1&&(y.maxBodyLength=e.maxBodyLength),e.insecureHTTPParser&&(y.insecureHTTPParser=e.insecureHTTPParser);var j=x.request(y,(function(a){if(!j.aborted){var n=a,i=a.req||j;if(204!==a.statusCode&&"HEAD"!==i.method&&!1!==e.decompress)switch(a.headers["content-encoding"]){case"gzip":case"compress":case"deflate":n=n.pipe(_a.createUnzip()),delete a.headers["content-encoding"]}var t={status:a.statusCode,statusText:a.statusMessage,headers:a.headers,config:e,request:i};if("stream"===e.responseType)t.data=n,ha(o,s,t);else{var c=[],l=0;n.on("data",(function(a){c.push(a),l+=a.length,e.maxContentLength>-1&&l>e.maxContentLength&&(r=!0,n.destroy(),s(new Ca("maxContentLength size of "+e.maxContentLength+" exceeded",Ca.ERR_BAD_RESPONSE,e,i)))})),n.on("aborted",(function(){r||(n.destroy(),s(new Ca("maxContentLength size of "+e.maxContentLength+" exceeded",Ca.ERR_BAD_RESPONSE,e,i)))})),n.on("error",(function(a){j.aborted||s(Ca.from(a,null,e,i))})),n.on("end",(function(){try{var a=1===c.length?c[0]:Buffer.concat(c);"arraybuffer"!==e.responseType&&(a=a.toString(e.responseEncoding),e.responseEncoding&&"utf8"!==e.responseEncoding||(a=ma.stripBOM(a))),t.data=a}catch(a){s(Ca.from(a,null,e,t.request,t))}ha(o,s,t)}))}}}));if(j.on("error",(function(a){s(Ca.from(a,null,e,j))})),j.on("socket",(function(e){e.setKeepAlive(!0,6e4)})),e.timeout){var P=parseInt(e.timeout,10);if(isNaN(P))return void s(new Ca("error trying to parse `config.timeout` to int",Ca.ERR_BAD_OPTION_VALUE,e,j));j.setTimeout(P,(function(){j.abort();var a=e.transitional||Ea;s(new Ca("timeout of "+P+"ms exceeded",a.clarifyTimeoutError?Ca.ETIMEDOUT:Ca.ECONNABORTED,e,j))}))}(e.cancelToken||e.signal)&&(i=function(e){j.aborted||(j.abort(),s(!e||e&&e.type?new ka:e))},e.cancelToken&&e.cancelToken.subscribe(i),e.signal&&(e.signal.aborted?i():e.signal.addEventListener("abort",i))),ma.isStream(c)?c.on("error",(function(a){s(Ca.from(a,e,null,j))})).pipe(j):j.end(c)}))},Pa=w.default.Stream,Aa=Ra;function Ra(){this.source=null,this.dataSize=0,this.maxDataSize=1048576,this.pauseStream=!0,this._maxDataSizeExceeded=!1,this._released=!1,this._bufferedEvents=[]}E.default.inherits(Ra,Pa),Ra.create=function(e,a){var n=new this;for(var i in a=a||{})n[i]=a[i];n.source=e;var t=e.emit;return e.emit=function(){return n._handleEmit(arguments),t.apply(e,arguments)},e.on("error",(function(){})),n.pauseStream&&e.pause(),n},Object.defineProperty(Ra.prototype,"readable",{configurable:!0,enumerable:!0,get:function(){return this.source.readable}}),Ra.prototype.setEncoding=function(){return this.source.setEncoding.apply(this.source,arguments)},Ra.prototype.resume=function(){this._released||this.release(),this.source.resume()},Ra.prototype.pause=function(){this.source.pause()},Ra.prototype.release=function(){this._released=!0,this._bufferedEvents.forEach(function(e){this.emit.apply(this,e)}.bind(this)),this._bufferedEvents=[]},Ra.prototype.pipe=function(){var e=Pa.prototype.pipe.apply(this,arguments);return this.resume(),e},Ra.prototype._handleEmit=function(e){this._released?this.emit.apply(this,e):("data"===e[0]&&(this.dataSize+=e[1].length,this._checkIfMaxDataSizeExceeded()),this._bufferedEvents.push(e))},Ra.prototype._checkIfMaxDataSizeExceeded=function(){if(!(this._maxDataSizeExceeded||this.dataSize<=this.maxDataSize)){this._maxDataSizeExceeded=!0;var e="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this.emit("error",new Error(e))}};var Ba=E.default,Na=w.default.Stream,Da=Aa,La=Va;function Va(){this.writable=!1,this.readable=!0,this.dataSize=0,this.maxDataSize=2097152,this.pauseStreams=!0,this._released=!1,this._streams=[],this._currentStream=null,this._insideLoop=!1,this._pendingNext=!1}Ba.inherits(Va,Na),Va.create=function(e){var a=new this;for(var n in e=e||{})a[n]=e[n];return a},Va.isStreamLike=function(e){return"function"!=typeof e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e&&!Buffer.isBuffer(e)},Va.prototype.append=function(e){if(Va.isStreamLike(e)){if(!(e instanceof Da)){var a=Da.create(e,{maxDataSize:1/0,pauseStream:this.pauseStreams});e.on("data",this._checkDataSize.bind(this)),e=a}this._handleErrors(e),this.pauseStreams&&e.pause()}return this._streams.push(e),this},Va.prototype.pipe=function(e,a){return Na.prototype.pipe.call(this,e,a),this.resume(),e},Va.prototype._getNext=function(){if(this._currentStream=null,this._insideLoop)this._pendingNext=!0;else{this._insideLoop=!0;try{do{this._pendingNext=!1,this._realGetNext()}while(this._pendingNext)}finally{this._insideLoop=!1}}},Va.prototype._realGetNext=function(){var e=this._streams.shift();void 0!==e?"function"==typeof e?e(function(e){Va.isStreamLike(e)&&(e.on("data",this._checkDataSize.bind(this)),this._handleErrors(e)),this._pipeNext(e)}.bind(this)):this._pipeNext(e):this.end()},Va.prototype._pipeNext=function(e){if(this._currentStream=e,Va.isStreamLike(e))return e.on("end",this._getNext.bind(this)),void e.pipe(this,{end:!1});var a=e;this.write(a),this._getNext()},Va.prototype._handleErrors=function(e){var a=this;e.on("error",(function(e){a._emitError(e)}))},Va.prototype.write=function(e){this.emit("data",e)},Va.prototype.pause=function(){this.pauseStreams&&(this.pauseStreams&&this._currentStream&&"function"==typeof this._currentStream.pause&&this._currentStream.pause(),this.emit("pause"))},Va.prototype.resume=function(){this._released||(this._released=!0,this.writable=!0,this._getNext()),this.pauseStreams&&this._currentStream&&"function"==typeof this._currentStream.resume&&this._currentStream.resume(),this.emit("resume")},Va.prototype.end=function(){this._reset(),this.emit("end")},Va.prototype.destroy=function(){this._reset(),this.emit("close")},Va.prototype._reset=function(){this.writable=!1,this._streams=[],this._currentStream=null},Va.prototype._checkDataSize=function(){if(this._updateDataSize(),!(this.dataSize<=this.maxDataSize)){var e="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this._emitError(new Error(e))}},Va.prototype._updateDataSize=function(){this.dataSize=0;var e=this;this._streams.forEach((function(a){a.dataSize&&(e.dataSize+=a.dataSize)})),this._currentStream&&this._currentStream.dataSize&&(this.dataSize+=this._currentStream.dataSize)},Va.prototype._emitError=function(e){this._reset(),this.emit("error",e)};var Fa={},za={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/3gpp-ims+xml":{source:"iana",compressible:!0},"application/3gpphal+json":{source:"iana",compressible:!0},"application/3gpphalforms+json":{source:"iana",compressible:!0},"application/a2l":{source:"iana"},"application/ace+cbor":{source:"iana"},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:!0},"application/alto-costmap+json":{source:"iana",compressible:!0},"application/alto-costmapfilter+json":{source:"iana",compressible:!0},"application/alto-directory+json":{source:"iana",compressible:!0},"application/alto-endpointcost+json":{source:"iana",compressible:!0},"application/alto-endpointcostparams+json":{source:"iana",compressible:!0},"application/alto-endpointprop+json":{source:"iana",compressible:!0},"application/alto-endpointpropparams+json":{source:"iana",compressible:!0},"application/alto-error+json":{source:"iana",compressible:!0},"application/alto-networkmap+json":{source:"iana",compressible:!0},"application/alto-networkmapfilter+json":{source:"iana",compressible:!0},"application/alto-updatestreamcontrol+json":{source:"iana",compressible:!0},"application/alto-updatestreamparams+json":{source:"iana",compressible:!0},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/at+jwt":{source:"iana"},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-dynamic-event-message":{source:"iana"},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rdt+json":{source:"iana",compressible:!0},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:!0},"application/bacnet-xdd+zip":{source:"iana",compressible:!1},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:!1,extensions:["bdoc"]},"application/beep+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/calendar+json":{source:"iana",compressible:!0},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/captive+json":{source:"iana",compressible:!0},"application/cbor":{source:"iana"},"application/cbor-seq":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:!0},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:!0},"application/cellml+xml":{source:"iana",compressible:!0},"application/cfw":{source:"iana"},"application/city+json":{source:"iana",compressible:!0},"application/clr":{source:"iana"},"application/clue+xml":{source:"iana",compressible:!0},"application/clue_info+xml":{source:"iana",compressible:!0},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:!0},"application/coap-group+json":{source:"iana",compressible:!0},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:!0},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:!0},"application/cstadata+xml":{source:"iana",compressible:!0},"application/csvm+json":{source:"iana",compressible:!0},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:!0},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:!0},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:!0},"application/dicom+xml":{source:"iana",compressible:!0},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:!0},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dots+cbor":{source:"iana"},"application/dskpp+xml":{source:"iana",compressible:!0},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"iana",compressible:!0,extensions:["es","ecma"]},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:!1},"application/edifact":{source:"iana",compressible:!1},"application/efi":{source:"iana"},"application/elm+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/elm+xml":{source:"iana",compressible:!0},"application/emergencycalldata.cap+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/emergencycalldata.comment+xml":{source:"iana",compressible:!0},"application/emergencycalldata.control+xml":{source:"iana",compressible:!0},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.veds+xml":{source:"iana",compressible:!0},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana",compressible:!0},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/expect-ct-report+json":{source:"iana",compressible:!0},"application/express":{source:"iana",extensions:["exp"]},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/fhir+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/fhir+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:"iana"},"application/flexfec":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:!1},"application/framework-attributes+xml":{source:"iana",compressible:!0},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geoxacml+xml":{source:"iana",compressible:!0},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:!0},"application/hjson":{extensions:["hjson"]},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:!0},"application/ibe-pkg-reply+xml":{source:"iana",compressible:!0},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/jf2feed+json":{source:"iana",compressible:!0},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:!0},"application/jrd+json":{source:"iana",compressible:!0},"application/jscalendar+json":{source:"iana",compressible:!0},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:!0},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/jwk+json":{source:"iana",compressible:!0},"application/jwk-set+json":{source:"iana",compressible:!0},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:!0},"application/kpml-response+xml":{source:"iana",compressible:!0},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/link-format":{source:"iana"},"application/load-control+xml":{source:"iana",compressible:!0},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:!0},"application/lpf+zip":{source:"iana",compressible:!1},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:!0},"application/mathml-presentation+xml":{source:"iana",compressible:!0},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:!0},"application/mbms-deregister+xml":{source:"iana",compressible:!0},"application/mbms-envelope+xml":{source:"iana",compressible:!0},"application/mbms-msk+xml":{source:"iana",compressible:!0},"application/mbms-msk-response+xml":{source:"iana",compressible:!0},"application/mbms-protection-description+xml":{source:"iana",compressible:!0},"application/mbms-reception-report+xml":{source:"iana",compressible:!0},"application/mbms-register+xml":{source:"iana",compressible:!0},"application/mbms-register-response+xml":{source:"iana",compressible:!0},"application/mbms-schedule+xml":{source:"iana",compressible:!0},"application/mbms-user-service-description+xml":{source:"iana",compressible:!0},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/media_control+xml":{source:"iana",compressible:!0},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:!0},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mipc":{source:"iana"},"application/missing-blocks+cbor-seq":{source:"iana"},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:!0},"application/mrb-publish+xml":{source:"iana",compressible:!0},"application/msc-ivr+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msc-mixer+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:!0},"application/multipart-core":{source:"iana"},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana",charset:"US-ASCII"},"application/news-groupinfo":{source:"iana",charset:"US-ASCII"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:!0},"application/node":{source:"iana",extensions:["cjs"]},"application/nss":{source:"iana"},"application/oauth-authz-req+jwt":{source:"iana"},"application/oblivious-dns-message":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odm+xml":{source:"iana",compressible:!0},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{source:"iana",compressible:!0},"application/oscore":{source:"iana"},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p21":{source:"iana"},"application/p21+zip":{source:"iana",compressible:!1},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pem-certificate-chain":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"]},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pidf-diff+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:!0},"application/problem+json":{source:"iana",compressible:!0},"application/problem+xml":{source:"iana",compressible:!0},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.cyn":{source:"iana",charset:"7-BIT"},"application/prs.hpub+zip":{source:"iana",compressible:!1},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:!0},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/pvd+json":{source:"iana",compressible:!0},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:!0,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:!0},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"iana"},"application/reputon+json":{source:"iana",compressible:!0},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:!0},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:!0},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:!0},"application/samlmetadata+xml":{source:"iana",compressible:!0},"application/sarif+json":{source:"iana",compressible:!0},"application/sarif-external-properties+json":{source:"iana",compressible:!0},"application/sbe":{source:"iana"},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:!0},"application/scim+json":{source:"iana",compressible:!0},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:!0},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/senml-etch+cbor":{source:"iana"},"application/senml-etch+json":{source:"iana",compressible:!0},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:!0},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:!0},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/simple-filter+xml":{source:"iana",compressible:!0},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/sipc":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"iana"},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:!0},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/spdx+json":{source:"iana",compressible:!0},"application/spirits-event+xml":{source:"iana",compressible:!0},"application/sql":{source:"iana"},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/stix+json":{source:"iana",compressible:!0},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:!0},"application/taxii+json":{source:"iana",compressible:!0},"application/td+json":{source:"iana",compressible:!0},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/tetra_isi":{source:"iana"},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:!0},"application/tnauthlist":{source:"iana"},"application/token-introspection+jwt":{source:"iana"},"application/toml":{compressible:!0,extensions:["toml"]},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana",extensions:["trig"]},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/tve-trigger":{source:"iana"},"application/tzif":{source:"iana"},"application/tzif-leap":{source:"iana"},"application/ubjson":{compressible:!1,extensions:["ubj"]},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:!0},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/urc-uisocketdesc+xml":{source:"iana",compressible:!0},"application/vcard+json":{source:"iana",compressible:!0},"application/vcard+xml":{source:"iana",compressible:!0},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.5gnas":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gtpc":{source:"iana"},"application/vnd.3gpp.interworking-data":{source:"iana"},"application/vnd.3gpp.lpp":{source:"iana"},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-init-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-transmission-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ngap":{source:"iana"},"application/vnd.3gpp.pfcp":{source:"iana"},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.s1ap":{source:"iana"},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.afplinedata-pagedef":{source:"iana"},"application/vnd.afpc.cmoca-cmresource":{source:"iana"},"application/vnd.afpc.foca-charset":{source:"iana"},"application/vnd.afpc.foca-codedfont":{source:"iana"},"application/vnd.afpc.foca-codepage":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.afpc.modca-cmtable":{source:"iana"},"application/vnd.afpc.modca-formdef":{source:"iana"},"application/vnd.afpc.modca-mediummap":{source:"iana"},"application/vnd.afpc.modca-objectcontainer":{source:"iana"},"application/vnd.afpc.modca-overlay":{source:"iana"},"application/vnd.afpc.modca-pagesegment":{source:"iana"},"application/vnd.age":{source:"iana",extensions:["age"]},"application/vnd.ah-barcode":{source:"iana"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:!0},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:!0},"application/vnd.android.ota":{source:"iana"},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.arrow.file":{source:"iana"},"application/vnd.apache.arrow.stream":{source:"iana"},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:!0},"application/vnd.aplextor.warrp+json":{source:"iana",compressible:!0},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:!0},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:!1,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"iana"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:!0},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:!0},"application/vnd.avistar+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.error":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:!0},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:!0},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:!0},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.bpf":{source:"iana"},"application/vnd.bpf3":{source:"iana"},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:!0},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.ciedi":{source:"iana"},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:!0},"application/vnd.collection.doc+json":{source:"iana",compressible:!0},"application/vnd.collection.next+json":{source:"iana",compressible:!0},"application/vnd.comicbook+zip":{source:"iana",compressible:!1},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:!0},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.cryptii.pipe+json":{source:"iana",compressible:!0},"application/vnd.crypto-shade-file":{source:"iana"},"application/vnd.cryptomator.encrypted":{source:"iana"},"application/vnd.cryptomator.vault":{source:"iana"},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:!0},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:!0},"application/vnd.cybank":{source:"iana"},"application/vnd.cyclonedx+json":{source:"iana",compressible:!0},"application/vnd.cyclonedx+xml":{source:"iana",compressible:!0},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:!1},"application/vnd.d3m-dataset":{source:"iana"},"application/vnd.d3m-problem":{source:"iana"},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datapackage+json":{source:"iana",compressible:!0},"application/vnd.dataresource+json":{source:"iana",compressible:!0},"application/vnd.dbf":{source:"iana",extensions:["dbf"]},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:!0},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:!0},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:!0},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbisl+xml":{source:"iana",compressible:!0},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:!0},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.eclipse.ditto+json":{source:"iana",compressible:!0},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:!0},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:!0},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:!1},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:!1},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:!1},"application/vnd.etsi.cug+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:!0},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:!0},"application/vnd.etsi.sci+xml":{source:"iana",compressible:!0},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:!0},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:!0},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eu.kasparian.car+json":{source:"iana",compressible:!0},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:!1},"application/vnd.exstream-package":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.familysearch.gedcom+zip":{source:"iana",compressible:!1},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.ficlab.flb+zip":{source:"iana",compressible:!1},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujifilm.fb.docuworks":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.container":{source:"iana"},"application/vnd.fujifilm.fb.jfi+xml":{source:"iana",compressible:!0},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:!0},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.gentics.grd+json":{source:"iana",compressible:!0},"application/vnd.geo+json":{source:"iana",compressible:!0},"application/vnd.geocube+xml":{source:"iana",compressible:!0},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.slides":{source:"iana"},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-apps.document":{compressible:!1,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:!1,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"iana",compressible:!0},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:!1},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:!0},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:!0},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:!0},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:!0},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hl7cda+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hl7v2+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:!0},"application/vnd.hyper-item+json":{source:"iana",compressible:!0},"application/vnd.hyperdrive+json":{source:"iana",compressible:!0},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"iana"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:!1},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:!1},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:!0},"application/vnd.informix-visionary":{source:"iana"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:!0},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:!0},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.iso11783-10+zip":{source:"iana",compressible:!1},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las":{source:"iana"},"application/vnd.las.las+json":{source:"iana",compressible:!0},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.laszip":{source:"iana"},"application/vnd.leap+json":{source:"iana",compressible:!0},"application/vnd.liberty-request+xml":{source:"iana",compressible:!0},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.logipipe.circuit+zip":{source:"iana",compressible:!1},"application/vnd.loom":{source:"iana"},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:!0},"application/vnd.maxar.archive.3tz+zip":{source:"iana",compressible:!1},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:!0},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:!0},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:!0},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:!0},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:!0},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:!0},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:!0},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.nacamar.ybrid+json":{source:"iana",compressible:!0},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:!0},"application/vnd.nebumind.line":{source:"iana"},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:!0},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:!0},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:!0},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:!0},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oci.image.manifest.v1+json":{source:"iana",compressible:!0},"application/vnd.oftn.l10n+json":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:!0},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:!0},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:!0},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:!0},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:!0},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:!0},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:!0},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.drm-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:!0},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:!0},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+cbor":{source:"iana"},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:!0},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:!0},"application/vnd.omads-email+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-file+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-folder+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.opentimestamps.ots":{source:"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:!0},"application/vnd.oracle.resource+json":{source:"iana",compressible:!0},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:!0},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:!0},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.patientecommsdoc":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:!0},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:!0},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:!0},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana",extensions:["rar"]},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.resilient.logic":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:!0},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sar":{source:"iana"},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.seis+json":{source:"iana",compressible:!0},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shade-save-file":{source:"iana"},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:!0},"application/vnd.shopkick+json":{source:"iana",compressible:!0},"application/vnd.shp":{source:"iana"},"application/vnd.shx":{source:"iana"},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:!0},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.snesdev-page-table":{source:"iana"},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.sycle+xml":{source:"iana",compressible:!0},"application/vnd.syft+json":{source:"iana",compressible:!0},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:!0},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:!0},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:!0},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:!0},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.veritone.aion+json":{source:"iana",compressible:!0},"application/vnd.veryant.thin":{source:"iana"},"application/vnd.ves.encrypted":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.dpp":{source:"iana"},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:!0},"application/vnd.wv.ssp+xml":{source:"iana",compressible:!0},"application/vnd.xacml+json":{source:"iana",compressible:!0},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:!0},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.youtube.yt":{source:"iana"},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:!0},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/webpush-options+json":{source:"iana",compressible:!0},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:!1,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:!1,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:!0,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-iwork-keynote-sffkey":{extensions:["key"]},"application/x-iwork-numbers-sffnumbers":{extensions:["numbers"]},"application/x-iwork-pages-sffpages":{extensions:["pages"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-javascript":{compressible:!0},"application/x-keepass2":{extensions:["kdbx"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-pki-message":{source:"iana"},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:!0,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:!0,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:!0,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:!0,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:!0,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:!0,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:!0,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:!0,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:!0},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"]},"application/x-x509-ca-ra-cert":{source:"iana"},"application/x-x509-next-ca-cert":{source:"iana"},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:!0},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-error+xml":{source:"iana",compressible:!0},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xcon-conference-info+xml":{source:"iana",compressible:!0},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:!0},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:!0},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:!0},"application/xmpp+xml":{source:"iana",compressible:!0},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+json":{source:"iana",compressible:!0},"application/yang-data+xml":{source:"iana",compressible:!0},"application/yang-patch+json":{source:"iana",compressible:!0},"application/yang-patch+xml":{source:"iana",compressible:!0},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana"},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/flexfec":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:!1},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/mhas":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/scip":{source:"iana"},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sofa":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tetra_acelp":{source:"iana"},"audio/tetra_acelp_bb":{source:"iana"},"audio/tone":{source:"iana"},"audio/tsvcis":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dts.uhd":{source:"iana"},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"iana"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:"iana",compressible:!1},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{compressible:!1,extensions:["apng"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:!1},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-dds":{compressible:!0,extensions:["dds"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:!1},"message/imdn+xml":{source:"iana",compressible:!0},"message/news":{source:"iana"},"message/partial":{source:"iana",compressible:!1},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/s-http":{source:"iana"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"iana"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/e57":{source:"iana"},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"]},"model/obj":{source:"iana",extensions:["obj"]},"model/step":{source:"iana"},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"]},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:!0},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.pytha.pyox":{source:"iana"},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.sap.vds":{source:"iana",extensions:["vds"]},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"multipart/alternative":{source:"iana",compressible:!1},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:!1},"multipart/form-data":{source:"iana",compressible:!1},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana"},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:!1},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:!1},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/cql":{source:"iana"},"text/cql-expression":{source:"iana"},"text/cql-identifier":{source:"iana"},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"iana"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fhirpath":{source:"iana"},"text/flexfec":{source:"iana"},"text/fwdred":{source:"iana"},"text/gff3":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",compressible:!0},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:!0,extensions:["jsx"]},"text/less":{compressible:!0,extensions:["less"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mdx":{compressible:!0,extensions:["mdx"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/parameters":{source:"iana",charset:"UTF-8"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana",charset:"UTF-8"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shaclc":{source:"iana"},"text/shex":{source:"iana",extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana",charset:"UTF-8"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana",charset:"UTF-8"},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.ficlab.flt":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hans":{source:"iana"},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.senx.warpscript":{source:"iana"},"text/vnd.si.uricatalogue":{source:"iana"},"text/vnd.sosi":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana",charset:"UTF-8"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:!0,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:!0,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:!0,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:!0,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{compressible:!0,extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/av1":{source:"iana"},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/ffv1":{source:"iana"},"video/flexfec":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/jxsv":{source:"iana"},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/scip":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"iana"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vnd.youtube.yt":{source:"iana"},"video/vp8":{source:"iana"},"video/vp9":{source:"iana"},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}};
/*!
 * mime-types
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */
!function(e){var a,n,i,t=za,o=C.default.extname,r=/^\s*([^;\s]*)(?:;|\s|$)/,s=/^text\//i;function c(e){if(!e||"string"!=typeof e)return!1;var a=r.exec(e),n=a&&t[a[1].toLowerCase()];return n&&n.charset?n.charset:!(!a||!s.test(a[1]))&&"UTF-8"}e.charset=c,e.charsets={lookup:c},e.contentType=function(a){if(!a||"string"!=typeof a)return!1;var n=-1===a.indexOf("/")?e.lookup(a):a;if(!n)return!1;if(-1===n.indexOf("charset")){var i=e.charset(n);i&&(n+="; charset="+i.toLowerCase())}return n},e.extension=function(a){if(!a||"string"!=typeof a)return!1;var n=r.exec(a),i=n&&e.extensions[n[1].toLowerCase()];if(!i||!i.length)return!1;return i[0]},e.extensions=Object.create(null),e.lookup=function(a){if(!a||"string"!=typeof a)return!1;var n=o("x."+a).toLowerCase().substr(1);if(!n)return!1;return e.types[n]||!1},e.types=Object.create(null),a=e.extensions,n=e.types,i=["nginx","apache",void 0,"iana"],Object.keys(t).forEach((function(e){var o=t[e],r=o.extensions;if(r&&r.length){a[e]=r;for(var s=0;s<r.length;s++){var c=r[s];if(n[c]){var l=i.indexOf(t[n[c]].source),u=i.indexOf(o.source);if("application/octet-stream"!==n[c]&&(l>u||l===u&&"application/"===n[c].substr(0,12)))continue}n[c]=e}}}))}(Fa);var qa=function(e){var a="function"==typeof setImmediate?setImmediate:"object"==typeof process&&"function"==typeof process.nextTick?process.nextTick:null;a?a(e):setTimeout(e,0)},Ua=function(e){var a=!1;return qa((function(){a=!0})),function(n,i){a?e(n,i):qa((function(){e(n,i)}))}};var $a=function(e){Object.keys(e.jobs).forEach(Ma.bind(e)),e.jobs={}};function Ma(e){"function"==typeof this.jobs[e]&&this.jobs[e]()}var Qa=Ua,Ga=$a,Ka=function(e,a,n,i){var t=n.keyedList?n.keyedList[n.index]:n.index;n.jobs[t]=function(e,a,n,i){var t;t=2==e.length?e(n,Qa(i)):e(n,a,Qa(i));return t}(a,t,e[t],(function(e,a){t in n.jobs&&(delete n.jobs[t],e?Ga(n):n.results[t]=a,i(e,n.results))}))};var Wa=function(e,a){var n=!Array.isArray(e),i={index:0,keyedList:n||a?Object.keys(e):null,jobs:{},results:n?{}:[],size:n?Object.keys(e).length:e.length};a&&i.keyedList.sort(n?a:function(n,i){return a(e[n],e[i])});return i};var Ha=$a,Ya=Ua,Za=function(e){if(!Object.keys(this.jobs).length)return;this.index=this.size,Ha(this),Ya(e)(null,this.results)};var Ja=Ka,Xa=Wa,en=Za,an=function(e,a,n){var i=Xa(e);for(;i.index<(i.keyedList||e).length;)Ja(e,a,i,(function(e,a){e?n(e,a):0!==Object.keys(i.jobs).length||n(null,i.results)})),i.index++;return en.bind(i,n)};var nn={exports:{}},tn=Ka,on=Wa,rn=Za;function sn(e,a){return e<a?-1:e>a?1:0}nn.exports=function(e,a,n,i){var t=on(e,n);return tn(e,a,t,(function n(o,r){o?i(o,r):(t.index++,t.index<(t.keyedList||e).length?tn(e,a,t,n):i(null,t.results))})),rn.bind(t,i)},nn.exports.ascending=sn,nn.exports.descending=function(e,a){return-1*sn(e,a)};var cn=nn.exports;var ln={parallel:an,serial:function(e,a,n){return cn(e,a,null,n)},serialOrdered:nn.exports},un=La,pn=E.default,dn=C.default,mn=b.default,hn=y.default,fn=x.default.parse,gn=k.default,vn=w.default.Stream,bn=Fa,yn=ln,xn=function(e,a){return Object.keys(a).forEach((function(n){e[n]=e[n]||a[n]})),e},wn=_n;function _n(e){if(!(this instanceof _n))return new _n(e);for(var a in this._overheadLength=0,this._valueLength=0,this._valuesToMeasure=[],un.call(this),e=e||{})this[a]=e[a]}pn.inherits(_n,un),_n.LINE_BREAK="\r\n",_n.DEFAULT_CONTENT_TYPE="application/octet-stream",_n.prototype.append=function(e,a,n){"string"==typeof(n=n||{})&&(n={filename:n});var i=un.prototype.append.bind(this);if("number"==typeof a&&(a=""+a),pn.isArray(a))this._error(new Error("Arrays are not supported."));else{var t=this._multiPartHeader(e,a,n),o=this._multiPartFooter();i(t),i(a),i(o),this._trackLength(t,a,n)}},_n.prototype._trackLength=function(e,a,n){var i=0;null!=n.knownLength?i+=+n.knownLength:Buffer.isBuffer(a)?i=a.length:"string"==typeof a&&(i=Buffer.byteLength(a)),this._valueLength+=i,this._overheadLength+=Buffer.byteLength(e)+_n.LINE_BREAK.length,a&&(a.path||a.readable&&a.hasOwnProperty("httpVersion")||a instanceof vn)&&(n.knownLength||this._valuesToMeasure.push(a))},_n.prototype._lengthRetriever=function(e,a){e.hasOwnProperty("fd")?null!=e.end&&e.end!=1/0&&null!=e.start?a(null,e.end+1-(e.start?e.start:0)):gn.stat(e.path,(function(n,i){var t;n?a(n):(t=i.size-(e.start?e.start:0),a(null,t))})):e.hasOwnProperty("httpVersion")?a(null,+e.headers["content-length"]):e.hasOwnProperty("httpModule")?(e.on("response",(function(n){e.pause(),a(null,+n.headers["content-length"])})),e.resume()):a("Unknown stream")},_n.prototype._multiPartHeader=function(e,a,n){if("string"==typeof n.header)return n.header;var i,t=this._getContentDisposition(a,n),o=this._getContentType(a,n),r="",s={"Content-Disposition":["form-data",'name="'+e+'"'].concat(t||[]),"Content-Type":[].concat(o||[])};for(var c in"object"==typeof n.header&&xn(s,n.header),s)s.hasOwnProperty(c)&&null!=(i=s[c])&&(Array.isArray(i)||(i=[i]),i.length&&(r+=c+": "+i.join("; ")+_n.LINE_BREAK));return"--"+this.getBoundary()+_n.LINE_BREAK+r+_n.LINE_BREAK},_n.prototype._getContentDisposition=function(e,a){var n,i;return"string"==typeof a.filepath?n=dn.normalize(a.filepath).replace(/\\/g,"/"):a.filename||e.name||e.path?n=dn.basename(a.filename||e.name||e.path):e.readable&&e.hasOwnProperty("httpVersion")&&(n=dn.basename(e.client._httpMessage.path||"")),n&&(i='filename="'+n+'"'),i},_n.prototype._getContentType=function(e,a){var n=a.contentType;return!n&&e.name&&(n=bn.lookup(e.name)),!n&&e.path&&(n=bn.lookup(e.path)),!n&&e.readable&&e.hasOwnProperty("httpVersion")&&(n=e.headers["content-type"]),n||!a.filepath&&!a.filename||(n=bn.lookup(a.filepath||a.filename)),n||"object"!=typeof e||(n=_n.DEFAULT_CONTENT_TYPE),n},_n.prototype._multiPartFooter=function(){return function(e){var a=_n.LINE_BREAK;0===this._streams.length&&(a+=this._lastBoundary()),e(a)}.bind(this)},_n.prototype._lastBoundary=function(){return"--"+this.getBoundary()+"--"+_n.LINE_BREAK},_n.prototype.getHeaders=function(e){var a,n={"content-type":"multipart/form-data; boundary="+this.getBoundary()};for(a in e)e.hasOwnProperty(a)&&(n[a.toLowerCase()]=e[a]);return n},_n.prototype.setBoundary=function(e){this._boundary=e},_n.prototype.getBoundary=function(){return this._boundary||this._generateBoundary(),this._boundary},_n.prototype.getBuffer=function(){for(var e=new Buffer.alloc(0),a=this.getBoundary(),n=0,i=this._streams.length;n<i;n++)"function"!=typeof this._streams[n]&&(e=Buffer.isBuffer(this._streams[n])?Buffer.concat([e,this._streams[n]]):Buffer.concat([e,Buffer.from(this._streams[n])]),"string"==typeof this._streams[n]&&this._streams[n].substring(2,a.length+2)===a||(e=Buffer.concat([e,Buffer.from(_n.LINE_BREAK)])));return Buffer.concat([e,Buffer.from(this._lastBoundary())])},_n.prototype._generateBoundary=function(){for(var e="--------------------------",a=0;a<24;a++)e+=Math.floor(10*Math.random()).toString(16);this._boundary=e},_n.prototype.getLengthSync=function(){var e=this._overheadLength+this._valueLength;return this._streams.length&&(e+=this._lastBoundary().length),this.hasKnownLength()||this._error(new Error("Cannot calculate proper length in synchronous way.")),e},_n.prototype.hasKnownLength=function(){var e=!0;return this._valuesToMeasure.length&&(e=!1),e},_n.prototype.getLength=function(e){var a=this._overheadLength+this._valueLength;this._streams.length&&(a+=this._lastBoundary().length),this._valuesToMeasure.length?yn.parallel(this._valuesToMeasure,this._lengthRetriever,(function(n,i){n?e(n):(i.forEach((function(e){a+=e})),e(null,a))})):process.nextTick(e.bind(this,null,a))},_n.prototype.submit=function(e,a){var n,i,t={method:"post"};return"string"==typeof e?(e=fn(e),i=xn({port:e.port,path:e.pathname,host:e.hostname,protocol:e.protocol},t)):(i=xn(e,t)).port||(i.port="https:"==i.protocol?443:80),i.headers=this.getHeaders(e.headers),n="https:"==i.protocol?hn.request(i):mn.request(i),this.getLength(function(e,i){if(e&&"Unknown stream"!==e)this._error(e);else if(i&&n.setHeader("Content-Length",i),this.pipe(n),a){var t,o=function(e,i){return n.removeListener("error",o),n.removeListener("response",t),a.call(this,e,i)};t=o.bind(this,null),n.on("error",o),n.on("response",t)}}.bind(this)),n},_n.prototype._error=function(e){this.error||(this.error=e,this.pause(),this.emit("error",e))},_n.prototype.toString=function(){return"[object FormData]"};var Sn=wn,En=X,Cn=function(e,a){re.forEach(e,(function(n,i){i!==a&&i.toUpperCase()===a.toUpperCase()&&(e[a]=n,delete e[i])}))},kn=pe,On=he,In={"Content-Type":"application/x-www-form-urlencoded"};function Tn(e,a){!En.isUndefined(e)&&En.isUndefined(e["Content-Type"])&&(e["Content-Type"]=a)}var jn,Pn={transitional:de,adapter:("undefined"!=typeof XMLHttpRequest?jn=qe:"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)&&(jn=ja),jn),transformRequest:[function(e,a){if(Cn(a,"Accept"),Cn(a,"Content-Type"),En.isFormData(e)||En.isArrayBuffer(e)||En.isBuffer(e)||En.isStream(e)||En.isFile(e)||En.isBlob(e))return e;if(En.isArrayBufferView(e))return e.buffer;if(En.isURLSearchParams(e))return Tn(a,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n,i=En.isObject(e),t=a&&a["Content-Type"];if((n=En.isFileList(e))||i&&"multipart/form-data"===t){var o=this.env&&this.env.FormData;return On(n?{"files[]":e}:e,o&&new o)}return i||"application/json"===t?(Tn(a,"application/json"),function(e,a,n){if(En.isString(e))try{return(a||JSON.parse)(e),En.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var a=this.transitional||Pn.transitional,n=a&&a.silentJSONParsing,i=a&&a.forcedJSONParsing,t=!n&&"json"===this.responseType;if(t||i&&En.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(t){if("SyntaxError"===e.name)throw kn.from(e,kn.ERR_BAD_RESPONSE,this,null,this.response);throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Sn},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};En.forEach(["delete","get","head"],(function(e){Pn.headers[e]={}})),En.forEach(["post","put","patch"],(function(e){Pn.headers[e]=En.merge(In)}));var An=Pn,Rn=X,Bn=An,Nn=function(e){return!(!e||!e.__CANCEL__)},Dn=X,Ln=function(e,a,n){var i=this||Bn;return Rn.forEach(n,(function(n){e=n.call(i,e,a)})),e},Vn=Nn,Fn=An,zn=Te;function qn(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new zn}var Un=X,$n=function(e,a){a=a||{};var n={};function i(e,a){return Un.isPlainObject(e)&&Un.isPlainObject(a)?Un.merge(e,a):Un.isPlainObject(a)?Un.merge({},a):Un.isArray(a)?a.slice():a}function t(n){return Un.isUndefined(a[n])?Un.isUndefined(e[n])?void 0:i(void 0,e[n]):i(e[n],a[n])}function o(e){if(!Un.isUndefined(a[e]))return i(void 0,a[e])}function r(n){return Un.isUndefined(a[n])?Un.isUndefined(e[n])?void 0:i(void 0,e[n]):i(void 0,a[n])}function s(n){return n in a?i(e[n],a[n]):n in e?i(void 0,e[n]):void 0}var c={url:o,method:o,data:o,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:s};return Un.forEach(Object.keys(e).concat(Object.keys(a)),(function(e){var a=c[e]||t,i=a(e);Un.isUndefined(i)&&a!==s||(n[e]=i)})),n},Mn=da,Qn=pe,Gn={};["object","boolean","number","function","string","symbol"].forEach((function(e,a){Gn[e]=function(n){return typeof n===e||"a"+(a<1?"n ":" ")+e}}));var Kn={};Gn.transitional=function(e,a,n){function i(e,a){return"[Axios v"+Mn+"] Transitional option '"+e+"'"+a+(n?". "+n:"")}return function(n,t,o){if(!1===e)throw new Qn(i(t," has been removed"+(a?" in "+a:"")),Qn.ERR_DEPRECATED);return a&&!Kn[t]&&(Kn[t]=!0,console.warn(i(t," has been deprecated since v"+a+" and will be removed in the near future"))),!e||e(n,t,o)}};var Wn={assertOptions:function(e,a,n){if("object"!=typeof e)throw new Qn("options must be an object",Qn.ERR_BAD_OPTION_VALUE);for(var i=Object.keys(e),t=i.length;t-- >0;){var o=i[t],r=a[o];if(r){var s=e[o],c=void 0===s||r(s,o,e);if(!0!==c)throw new Qn("option "+o+" must be "+c,Qn.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Qn("Unknown option "+o,Qn.ERR_BAD_OPTION)}},validators:Gn},Hn=X,Yn=ne,Zn=oe,Jn=function(e){return qn(e),e.headers=e.headers||{},e.data=Ln.call(e,e.data,e.headers,e.transformRequest),e.headers=Dn.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Dn.forEach(["delete","get","head","post","put","patch","common"],(function(a){delete e.headers[a]})),(e.adapter||Fn.adapter)(e).then((function(a){return qn(e),a.data=Ln.call(e,a.data,a.headers,e.transformResponse),a}),(function(a){return Vn(a)||(qn(e),a&&a.response&&(a.response.data=Ln.call(e,a.response.data,a.response.headers,e.transformResponse))),Promise.reject(a)}))},Xn=$n,ei=we,ai=Wn,ni=ai.validators;function ii(e){this.defaults=e,this.interceptors={request:new Zn,response:new Zn}}ii.prototype.request=function(e,a){"string"==typeof e?(a=a||{}).url=e:a=e||{},(a=Xn(this.defaults,a)).method?a.method=a.method.toLowerCase():this.defaults.method?a.method=this.defaults.method.toLowerCase():a.method="get";var n=a.transitional;void 0!==n&&ai.assertOptions(n,{silentJSONParsing:ni.transitional(ni.boolean),forcedJSONParsing:ni.transitional(ni.boolean),clarifyTimeoutError:ni.transitional(ni.boolean)},!1);var i=[],t=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(a)||(t=t&&e.synchronous,i.unshift(e.fulfilled,e.rejected))}));var o,r=[];if(this.interceptors.response.forEach((function(e){r.push(e.fulfilled,e.rejected)})),!t){var s=[Jn,void 0];for(Array.prototype.unshift.apply(s,i),s=s.concat(r),o=Promise.resolve(a);s.length;)o=o.then(s.shift(),s.shift());return o}for(var c=a;i.length;){var l=i.shift(),u=i.shift();try{c=l(c)}catch(e){u(e);break}}try{o=Jn(c)}catch(e){return Promise.reject(e)}for(;r.length;)o=o.then(r.shift(),r.shift());return o},ii.prototype.getUri=function(e){e=Xn(this.defaults,e);var a=ei(e.baseURL,e.url);return Yn(a,e.params,e.paramsSerializer)},Hn.forEach(["delete","get","head","options"],(function(e){ii.prototype[e]=function(a,n){return this.request(Xn(n||{},{method:e,url:a,data:(n||{}).data}))}})),Hn.forEach(["post","put","patch"],(function(e){function a(a){return function(n,i,t){return this.request(Xn(t||{},{method:e,headers:a?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}ii.prototype[e]=a(),ii.prototype[e+"Form"]=a(!0)}));var ti=ii,oi=Te;function ri(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var a;this.promise=new Promise((function(e){a=e}));var n=this;this.promise.then((function(e){if(n._listeners){var a,i=n._listeners.length;for(a=0;a<i;a++)n._listeners[a](e);n._listeners=null}})),this.promise.then=function(e){var a,i=new Promise((function(e){n.subscribe(e),a=e})).then(e);return i.cancel=function(){n.unsubscribe(a)},i},e((function(e){n.reason||(n.reason=new oi(e),a(n.reason))}))}ri.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},ri.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},ri.prototype.unsubscribe=function(e){if(this._listeners){var a=this._listeners.indexOf(e);-1!==a&&this._listeners.splice(a,1)}},ri.source=function(){var e;return{token:new ri((function(a){e=a})),cancel:e}};var si=ri,ci=X,li=X,ui=B,pi=ti,di=$n;var mi=function e(a){var n=new pi(a),i=ui(pi.prototype.request,n);return li.extend(i,pi.prototype,n),li.extend(i,n),i.create=function(n){return e(di(a,n))},i}(An);mi.Axios=pi,mi.CanceledError=Te,mi.CancelToken=si,mi.isCancel=Nn,mi.VERSION=da,mi.toFormData=he,mi.AxiosError=pe,mi.Cancel=mi.CanceledError,mi.all=function(e){return Promise.all(e)},mi.spread=function(e){return function(a){return e.apply(null,a)}},mi.isAxiosError=function(e){return ci.isObject(e)&&!0===e.isAxiosError},R.exports=mi,R.exports.default=mi;var hi=R.exports,fi={BRAND_VENDOR_MAPPING:"sd_brand_vendor_mapping",VENDOR_SKU_MAPPING:"sd_vendor_sku_mapping",BRAND_DETAILS:"sd_brand_details",VENDOR_DETAILS:"sd_vendor_details",BRAND_SKU_MAPPING:"sd_brand_sku_mapping",GIFT_CARD_INVENTORY:"sd_gift_card_inventory",VENDOR_ORDERS:"sd_vendor_orders",LOG_TABLE:"sd_error_log",INVENTORY_BALANCE_REPORT:"sd_giftcard_inventory_balance_report"},gi={WORK_ADVANTAGE:"WK_ADV",AMAZON_QC:"QC_AMZN",FLIPKART_EGV:"FK_EGV",QUICKCILVER_EGV:"QC_EGV"};class vi{constructor(e,a){this.vouchersToInventory=async e=>{try{const a=new this.ItemsService(fi.GIFT_CARD_INVENTORY,this.accountabilitySchema);return await a.createMany(e)}catch(e){return await(new xi).jsonError({exception:e,error:"vouchersToInventory Error"},null,null),null}},this.vouchersToSingleInventory=async e=>{try{const a=new this.ItemsService(fi.GIFT_CARD_INVENTORY,this.accountabilitySchema);return await a.createOne(e)}catch(e){return await(new xi).jsonError({exception:e,error:"vouchersToInventory Error"},null,null),null}},this.addLog=async(e,a,n,i)=>{try{const t=new this.ItemsService(fi.LOG_TABLE,this.accountabilitySchema);return await t.createMany([{collection_name:e,error:a,reference_id:n,vendor_code:i}])}catch(e){return null}},this.sd_giftcard_inventory_balance_report=async e=>{try{await(new xi).log(`vouchers ${e}`,!1,null,null);const a={...this.accountabilitySchema,accountability:{admin:!0}},n=new this.ItemsService(fi.INVENTORY_BALANCE_REPORT,a);return await n.createOne(e)}catch(e){return await(new xi).jsonError({exception:e,error:"sd giftcard inventory balance report Error"},null,null),null}},this.ItemsService=e,this.accountabilitySchema=a}async addVendorOrder(e,a,n){try{const n=new this.ItemsService(fi.VENDOR_ORDERS,this.accountabilitySchema);return await n.createOne({reference_id:e,vendor:a})}catch(a){return await(new xi).jsonError({exception:a,error:"addVendorOrder Error"},e,n),null}}async updateVendorOrderStatus(e,a,n,i){try{const i=new this.ItemsService(fi.VENDOR_ORDERS,this.accountabilitySchema);return await i.updateOne(e,{order_status:n,vendor_order_id:a})}catch(a){return await(new xi).jsonError({exception:a,error:"updateVendorOrderStatus Error"},e,i),null}}async updateVendorOrderReferenceAppend(e,a,n){try{const n=new this.ItemsService(fi.VENDOR_ORDERS,this.accountabilitySchema);return await n.updateOne(e,{reference_append:a})}catch(a){return await(new xi).jsonError({exception:a,error:"updateVendorOrderReferenceAppend Error"},e,n),null}}async updateVendorOrderByKeys(e,a,n){try{const i=new this.ItemsService(fi.VENDOR_ORDERS,this.accountabilitySchema);return await i.updateOne(e,{order_status:n,vendor_order_id:a})}catch(e){return await(new xi).jsonError({exception:e,error:"updateVendorOrderStatus Error"},null,null),null}}async updateVendorWalletBalance(e,a){try{const n=new this.ItemsService(fi.VENDOR_DETAILS,this.accountabilitySchema);return await n.updateOne(e,{wallet_balance:a+""})}catch(e){return await(new xi).jsonError({exception:e,error:"updateVendorWalletBalance Error"},null,null),null}}async updateLinkVoucherStatus(e,a){try{await(new xi).log("update Link Voucher Status and order id",!1,null,null);const n={...this.accountabilitySchema,accountability:{admin:!0}},i=new this.ItemsService(fi.GIFT_CARD_INVENTORY,n);return await i.updateOne(e,{gift_card:!0,order_id:a})}catch(e){return await(new xi).jsonError({exception:e,error:"updateLinkVoucherStatus Error"},null,null),null}}async updateOtp(e,a,n){try{await(new xi).log("update Otp",!1,null,null);const n={...this.accountabilitySchema,accountability:{admin:!0}},i=new this.ItemsService(fi.GIFT_CARD_INVENTORY,n);return await i.updateOne(e,{reference_code_otp:a})}catch(e){return await(new xi).jsonError({exception:e,error:"update Otp Error"},null,null),null}}async updateSoftLinkRedemptionInCampaigns(e,a,n){try{let i=await hi.post(`${n.CAMPAIGN_BASE_URL}reward-links/webhook/updateredemption`,{link_reference_id:e,soft_link_redemption_id:a},{headers:{Authorization:n.CAMPAIGN_AUTH}});return await(new xi).log("update Soft Link Redemption Campaigns:",!1,null,null),await(new xi).log(`updateSoftLinkRedemptionInCampaigns step 10:${e}-${a}`,!1,null,null),i}catch(e){await(new xi).error({voucherCodeFromVppError:e},null,null)}}async referenceupdate(e){try{await(new xi).log("referenceupdate",!1,null,null);const a={...this.accountabilitySchema,accountability:{admin:!0}},n=new this.ItemsService(fi.GIFT_CARD_INVENTORY,a);return await n.updateOne(e,{reference_code_otp:"",link_reference_id:"",soft_link_order_id:""})}catch(e){return await(new xi).jsonError({exception:e,error:"reference update Error"},null,null),null}}async softLinkOtpVerificationUpdate(e){try{await(new xi).log("softLinkOtpVerification"+e,!1,null,null),await(new xi).log(`softLinkOtpVerificationUpdate:${e}`,!1,null,null);const a={...this.accountabilitySchema,accountability:{admin:!0}},n=new this.ItemsService(fi.GIFT_CARD_INVENTORY,a);return await n.updateOne(e,{soft_link_redeemed_status:!0})}catch(e){return await(new xi).jsonError({exception:e,error:"updateLinkVoucherStatus Error"},null,null),null}}async updateInventoryPin(e,a){try{const n={...this.accountabilitySchema,accountability:{admin:!0}},i=new this.ItemsService(fi.GIFT_CARD_INVENTORY,n);return await i.updateOne(e,{pin:a})}catch(e){return await(new xi).jsonError({exception:e,error:"update Inventory Pin Error"},null,null),null}}async updateVendorCategoryId(e,a){try{const n={...this.accountabilitySchema,accountability:{admin:!0}},i=new this.ItemsService(fi.VENDOR_DETAILS,n);return await i.updateOne(e,{categoryid:a})}catch(e){return await(new xi).jsonError({exception:e,error:"updateVendorCategoryId Error"},null,null),null}}async updateCheckBalaceStatus(e){try{await(new xi).log(`updateCheckBalaceStatus ${e}`,!1,null,null);const a={...this.accountabilitySchema,accountability:{admin:!0}},n=new this.ItemsService(fi.GIFT_CARD_INVENTORY,a);return await n.updateOne(e,{card_balance_status:!0})}catch(e){return await(new xi).jsonError({exception:e,error:"update Check Balace Status"},null,null),null}}async updateBulkQuantityStatus(e,a){try{const n={...this.accountabilitySchema,accountability:{admin:!0}},i=new this.ItemsService(fi.GIFT_CARD_INVENTORY,n);return await i.updateOne(e,{bulk_qty_status:a})}catch(e){return await(new xi).jsonError({exception:e,error:"update Inventory bulk_qty_status Error"},null,null),null}}async revalidateCheckBalaceStatus(e,a){try{await(new xi).log(`revalidateCheckBalaceStatus ${e}`,!1,null,null);const n={...this.accountabilitySchema,accountability:{admin:!0}},i=new this.ItemsService(fi.INVENTORY_BALANCE_REPORT,n);return await i.updateOne(e,{revalidate_status:!0,revalidate_date:a})}catch(e){return await(new xi).jsonError({exception:e,error:"update Check Balace Status"},null,null),null}}}let bi=null;class yi{constructor(e,a,n){this.get=null,this.accountabilitySchema=null,this.itemsService=null,this.prependText="",this.log=async(e,a,n,i,t)=>{null==n&&(n=!0);const o=new vi(this.itemsService,this.accountabilitySchema);await o.addLog(e,JSON.stringify({log:a,info:n?this.prependText:null}),i,t)},this.updateAccountabilitySchema=e=>{this.accountabilitySchema=e},this.accountabilitySchema=a,this.itemsService=e,this.prependText=n}}class xi{constructor(){this.createLoggerInstance=async(e,a,n)=>{bi=new yi(e,a,n)},this.updateAccountabilitySchema=e=>{try{bi.updateAccountabilitySchema(e)}catch(e){}},this.log=async(e,a,n,i)=>{bi.log(null,e,a,n,i)},this.error=async(e,a,n)=>{bi.log(null,e,a,n)},this.jsonError=async(e,a,n)=>{await bi.log(null,JSON.stringify(e),JSON.stringify(e.exception),a,n)}}}class wi{constructor(e,a){this.brandDetails=null,this.getBrandFromSKU=async(e,a,n)=>{try{const i=new this.ItemsService(fi.BRAND_DETAILS,this.accountabilitySchema);return(await i.readByQuery({fields:["*.*"],filter:{_and:[{status:{_eq:"active"}},{sku:{sku:{_eq:e}}},{sku:{amount:{_eq:a}}},{sku:{currency:{_eq:n}}}]}}))[0]}catch(e){await(new xi).jsonError({exception:e,error:"getBrandFromSKU Error"},null,null)}},this.checkBrandStatus=async(e,a,n,i,t)=>{try{const i=await this.getBrandFromSKU(e,a,n);return this.brandDetails=i,!!i}catch(e){await(new xi).jsonError({exception:e,error:"checkBrandStatus Error"},i,t)}},this.checkSkuAmountMapping=async(e,a)=>{try{const n=this.brandDetails.sku;for(let i=0;i<n.length;i++){const{sku:t,amount:o}=n[i];if(e==t&&a==o)return!0}return!1}catch(e){await(new xi).jsonError({exception:e,error:"checkSkuAmountMapping Error"},null,null)}},this.bestVendor=async(e,a,n,i,t)=>{try{const i=new this.ItemsService(fi.BRAND_VENDOR_MAPPING,this.accountabilitySchema),t=await i.readByQuery({fields:["*","choose_a_brand.*","choose_a_vendor.*","choose_a_brand.sku.*"],sort:["-discount_percentage","processing_fee"],filter:{_and:[{choose_a_brand:{sku:{sku:{_eq:e}}}},{choose_a_vendor:{vendor_sku:{sd_brand_sku:{sku:{_eq:e}}}}},{choose_a_brand:{sku:{amount:{_eq:a}}}},{choose_a_brand:{status:{_eq:"active"}}},{choose_a_vendor:{vendor_status:{_eq:"active"}}},{choose_a_vendor:{is_api_integrated:{_eq:!0}}},{_or:[{_and:[{denomination:{_eq:"fixed"}},{fixed:{_eq:a}}]},{_and:[{denomination:{_eq:"range"}},{from:{_lte:a}},{to:{_gte:a}}]}]},{currency:{_eq:n}}]}});let o=null;for(let e=0;e<t.length;e++){const a=t[e],{commercial_type:n}=a;"upfront_discount"==n&&(o=a,e=t.length)}if(!o)for(let e=0;e<t.length;e++){const a=t[e],{commercial_type:n}=a;"cashback"==n&&(o=a,e=t.length)}if(!o)for(let e=0;e<t.length;e++){const a=t[e],{commercial_type:n,processing_fee:i}=a;"processing_fee"==n&&(o||(o=a),o&&1*i<1*o.processing_fee&&(o=a))}return o}catch(e){await(new xi).jsonError({exception:e,error:"bestVendor Error"},i,t)}},this.mappedVendorSKU=async e=>{try{const a=new this.ItemsService(fi.VENDOR_SKU_MAPPING,this.accountabilitySchema);return(await a.readByQuery({fields:["*.*"],limit:1,filter:{sd_brand_sku:{sku:{_eq:e}}}}))[0]}catch(e){await(new xi).jsonError({exception:e,error:"mappedVendorSKU Error"},null,null)}},this.checkBrandVendorMapping=async(e,a,n,i,t,o)=>{try{const t=new this.ItemsService(fi.BRAND_VENDOR_MAPPING,this.accountabilitySchema),o=await t.readByQuery({fields:["*","choose_a_brand.*","choose_a_vendor.*","choose_a_brand.sku.*"],sort:["-discount_percentage","processing_fee"],filter:{_and:[{choose_a_brand:{sku:{sku:{_eq:e}}}},{choose_a_brand:{sku:{amount:{_eq:a}}}},{choose_a_brand:{status:{_eq:"active"}}},{choose_a_vendor:{vendor_status:{_eq:"active"}}},{choose_a_vendor:{api_integration_id:{_eq:i}}},{_or:[{_and:[{denomination:{_eq:"fixed"}},{fixed:{_eq:a}}]},{_and:[{denomination:{_eq:"range"}},{from:{_lte:a}},{to:{_gte:a}}]}]},{currency:{_eq:n}}]}});let r=null;for(let e=0;e<o.length;e++){const a=o[e],{commercial_type:n}=a;"upfront_discount"==n&&(r=a,e=o.length)}if(!r)for(let e=0;e<o.length;e++){const a=o[e],{commercial_type:n}=a;"cashback"==n&&(r=a,e=o.length)}if(!r)for(let e=0;e<o.length;e++){const a=o[e],{commercial_type:n,processing_fee:i}=a;"processing_fee"==n&&(r||(r=a),r&&1*i<1*r.processing_fee&&(r=a))}return r}catch(e){await(new xi).jsonError({exception:e,error:"bestVendor Error"},t,o)}},this.mappedVendorActiveBrandSKU=async(e,a,n)=>{try{const n=new this.ItemsService(fi.VENDOR_SKU_MAPPING,this.accountabilitySchema);return(await n.readByQuery({fields:["*.*"],limit:1,filter:{_and:[{sd_brand_sku:{sku:{_eq:e}}},{sd_brand_sku:{brand:{status:{_eq:"active"}}}},{vendor_name:{api_integration_id:{_eq:a}}}]}}))[0]}catch(e){await(new xi).jsonError({exception:e,error:"mappedVendorSKU Error"},n,a)}},this.ItemsService=e,this.accountabilitySchema=a}async voucherKeysFromInventory(e){try{const a=new this.ItemsService(fi.GIFT_CARD_INVENTORY,this.accountabilitySchema),n=await a.readByQuery({fields:["id"],filter:{code:{_in:e}}});return n?n.map((e=>e.id)):null}catch(e){return await(new xi).jsonError({exception:e,error:"voucherKeysFromInventory Error"},null,null),null}}async getBrandSkuMapping(e,a,n){try{const a=new this.ItemsService(fi.BRAND_SKU_MAPPING,this.accountabilitySchema);return(await a.readByQuery({fields:["*"],filter:{sku:{_eq:e}}}))[0]}catch(e){return await(new xi).jsonError({exception:e,error:"getBrandSkuMapping Error"},a,n),null}}async getVendorFromVendorCode(e,a){try{const a={...this.accountabilitySchema,accountability:{admin:!0}},n=new this.ItemsService(fi.VENDOR_DETAILS,a);return(await n.readByQuery({fields:["*"],filter:{api_integration_id:{_eq:e}}}))[0]}catch(n){return await(new xi).jsonError({exception:n,error:"getVendorFromVendorCode Error"},a,e),null}}async getVendorOrderFromRef(e,a,n){try{const n=new this.ItemsService(fi.VENDOR_ORDERS,this.accountabilitySchema);return(await n.readByQuery({fields:["*"],filter:{_and:[{reference_id:{_eq:e}},{vendor:{_eq:a}}]}}))[0]}catch(a){return await(new xi).jsonError({exception:a,error:"getVendorOrderFromRef Error"},e,n),null}}async getVendorTrasanctionDetails(e){try{const a=new this.ItemsService(fi.GIFT_CARD_INVENTORY,this.accountabilitySchema);return await a.readByQuery({filter:{vendor_order_id:{_eq:e}},fields:["*"],limit:-1})}catch(e){return await(new xi).jsonError({exception:e,error:"get Trasanction Details Error"},null,null),null}}async getVendorOrderByReferenceId(e,a){try{const a=new this.ItemsService(fi.VENDOR_ORDERS,this.accountabilitySchema);return await a.readByQuery({fields:["*","vendor.*"],filter:{reference_id:{_eq:e}}})}catch(n){return await(new xi).jsonError({exception:n,error:"getVendorOrderByReferenceId Error"},e,a),null}}async getLinkVoucherDetails(e,a){try{await(new xi).log("get Link VoucherDetails:",!1,null,null);const n={...this.accountabilitySchema,accountability:{admin:!0}},i=new this.ItemsService(fi.GIFT_CARD_INVENTORY,n);return await i.readByQuery({fields:["*"],filter:{_and:[{link_reference_id:{_neq:null}},{price:{_eq:a}},{product_code:{_eq:e}},{gift_card:{_eq:!1}}]},limit:1})}catch(e){return await(new xi).jsonError({exception:e,error:"get Link Voucher Details Query Error"},null,null),null}}async getLinkVoucherDetailsbyorderid(e){try{const a={...this.accountabilitySchema,accountability:{admin:!0}};await(new xi).log(`get Link order Details:OrderId:${e}`,!1,null,null);const n=new this.ItemsService(fi.GIFT_CARD_INVENTORY,a);return await n.readByQuery({fields:["*"],filter:{order_id:{_eq:e}}})}catch(e){return await(new xi).jsonError({exception:e,error:"get Link Voucher Details by orderid query Error"},null,null),null}}async inventoryOtpVerification(e,a){try{const n={...this.accountabilitySchema,accountability:{admin:!0}},i=new this.ItemsService(fi.GIFT_CARD_INVENTORY,n);return await i.readByQuery({fields:["*"],filter:{_and:[{link_reference_id:{_eq:e}},{reference_code_otp:{_eq:a}}]}})}catch(e){return await(new xi).jsonError({exception:e,error:"inventory Otp Verification Error"},null,null),null}}async getInventoryByreferance(e,a){try{const a={...this.accountabilitySchema,accountability:{admin:!0}},n=new this.ItemsService(fi.GIFT_CARD_INVENTORY,a);return await n.readByQuery({fields:["*"],filter:{_and:[{link_reference_id:{_eq:e}}]}})}catch(e){return await(new xi).jsonError({exception:e,error:"inventory Otp Verification Error"},null,null),null}}async getInventoryByorderid(e){try{const a={...this.accountabilitySchema,accountability:{admin:!0}},n=new this.ItemsService(fi.GIFT_CARD_INVENTORY,a);return await n.readByQuery({fields:["*"],filter:{_and:[{order_id:{_eq:e}}]}})}catch(e){return await(new xi).jsonError({exception:e,error:"inventory Otp Verification Error"},null,null),null}}async getInventoryByid(e){try{const a={...this.accountabilitySchema,accountability:{admin:!0}},n=new this.ItemsService(fi.GIFT_CARD_INVENTORY,a),i=await n.readByQuery({fields:["*"],filter:{_and:[{id:{_eq:e}}]}});return await(new xi).log("getInventoryByid:",!1,null,null),i}catch(e){return await(new xi).jsonError({exception:e,error:"inventory Otp Verification Error"},null,null),null}}async getBrandSkuMappingbySku(e){try{const a={...this.accountabilitySchema,accountability:{admin:!0}},n=new this.ItemsService(fi.BRAND_SKU_MAPPING,a);return(await n.readByQuery({fields:["*","brand.*"],filter:{sku:{_eq:e}}}))[0]}catch(e){return await(new xi).jsonError({exception:e,error:"getBrandSkuMapping Error"},null,null),null}}async getVoucherFromInventory(e){try{const a=new this.ItemsService(fi.GIFT_CARD_INVENTORY,this.accountabilitySchema);return await a.readByQuery({fields:["*"],filter:{link_reference_id:{_eq:e}}})}catch(e){return await(new xi).jsonError({exception:e,error:"voucherKeysFromInventory Error"},null,null),null}}async getVoucherFromInventorybykeys(e){try{const a=new this.ItemsService(fi.GIFT_CARD_INVENTORY,this.accountabilitySchema);return await a.readByQuery({fields:["id","link_reference_id","reference_code_otp"],filter:{link_reference_id:{_in:e}}})}catch(e){return await(new xi).jsonError({exception:e,error:"voucherKeysFromInventory Error"},null,null),null}}async getVoucherBySoftLinkId(e){try{const a={...this.accountabilitySchema,accountability:{admin:!0}},n=new this.ItemsService(fi.GIFT_CARD_INVENTORY,a);return await n.readByQuery({fields:["*"],filter:{_and:[{order_id:{_eq:e}}]}})}catch(e){return await(new xi).jsonError({exception:e,error:"get VoucherBy Soft LinkId"},null,null),null}}async getCampaignRedemptions(e,a){try{let n=await hi.post(`${a.CAMPAIGN_BASE_URL}reward-links/webhook/getoneredeem`,{link_reference_id:e},{headers:{Authorization:a.CAMPAIGN_AUTH}});return await(new xi).log(`getCampaignRedemptions link_reference_id:${e}`,!1,null,null),n}catch(e){await(new xi).error({voucherCodeFromVppError:e},null,null)}}async inventoryRedeemList(e,a,n){try{const i={...this.accountabilitySchema,accountability:{admin:!0}},t=new this.ItemsService(fi.GIFT_CARD_INVENTORY,i);return await t.readByQuery({fields:["*"],filter:{_and:[{order_id:{_nnull:!0}},{gift_card:{_eq:!0}},{validity:{_between:[e,a]}},{bulk_qty_status:{_eq:!0}},{card_balance_status:{_eq:!1}}]},limit:n})}catch(e){return await(new xi).jsonError({exception:e,error:"inventoryRedeemList Error"},null,null),null}}async inventoryRedeemListRevlidate(e,a){try{const n={...this.accountabilitySchema,accountability:{admin:!0}},i=new this.ItemsService(fi.INVENTORY_BALANCE_REPORT,n);return await i.readByQuery({fields:["*","giftcard_inventory_id.*"],filter:{_and:[{validity:{_between:[e,a]}},{revalidate_status:{_eq:!1}}]},limit:-1})}catch(e){return await(new xi).jsonError({exception:e,error:"inventoryRedeemList Error"},null,null),null}}}var _i={work_advantage:{AUTH_CODE:null,AUTH_CODE_LAST_UPDATED:0},qc_amazon:{AUTH_CODE:null,AUTH_CODE_LAST_UPDATED:0,OAUTH_CODE:null,OAUTH_CODE_LAST_UPDATED:0},quick_silver:{AUTH_CODE:null,AUTH_CODE_LAST_UPDATED:0,OAUTH_CODE:null,OAUTH_CODE_LAST_UPDATED:0}};class Si{constructor({client_id:e,client_secret:a,redirect_uri:n,authorization:i,base_url:t,place_order_config:o}){this.getAuthCode=async()=>{try{const e=await hi.get(this.base_url+"/fetch_authorization_code?client_id="+this.client_id+"&client_secret="+this.client_secret+"&redirect_uri="+this.redirect_uri,{headers:{Authorization:this.authorization}}),{success:a,code:n}=e.data;return _i.work_advantage.AUTH_CODE=n,_i.work_advantage.AUTH_CODE_LAST_UPDATED=(new Date).getTime(),{code:n}}catch(e){return await(new xi).jsonError({exception:e,error:"getAuthCode Error"},null,null),{codeException:!0}}},this.getOAuthToken=async(e,a,n)=>{try{return(await hi.post(this.base_url+"/oauth/token",{client_id:this.client_id,client_secret:this.client_secret,redirect_uri:this.redirect_uri,grant_type:"authorization_code",code:e},{headers:{Authorization:this.authorization}})).data}catch(e){return await(new xi).jsonError({exception:e,error:"getOAuthToken Error"},a,n),{oAuthException:!0}}},this.getCatalog=async(e,a)=>{try{return(await hi.get(this.base_url+`/api/v1/catalogs?iso3_code=${a}&page=0&limit=10000000`,{headers:{Authorization:e}})).data}catch(e){return await(new xi).jsonError({exception:e,error:"getCatalog Error"},null,null),{exception:!0}}},this.placeVouchersOrder=async({qty:e,upc_id:a,access_token:n,referenceId:i,vendor_code:t})=>{try{let o={type:"Web",quantity:e,billing_name:this.place_order_config.billing_name,billing_email:this.place_order_config.billing_email,contact:this.place_order_config.contact,postal_code:this.place_order_config.postal_code,city:this.place_order_config.city,address_line1:this.place_order_config.address_line1,state:this.place_order_config.state,country:this.place_order_config.country,reference_id:i,upc_id:a};await(new xi).log(`WORK ADVANTAGE Body:${JSON.stringify(o)}`,null,i,t),await(new xi).log(`WORK ADVANTAGE  access_token:${n}`,null,i,t);const r=await hi.post(this.base_url+"/external_order_place",null,{params:o,headers:{Authorization:n}});let s=null,c=null,l=!0,u="";try{s=r.data.result.codes,c=r.data.result.order_id}catch(e){l=!1,u=r.data.info}return{vouchers:s,success:l,message:u,orderId:c,vendorCode:t}}catch(e){return await(new xi).jsonError({exception:e,error:"placeVouchersOrder Error"},i,t),{orderException:!0}}},this.getBalance=async e=>{try{return(await hi.get(this.base_url+"/balenq",{headers:{Authorization:e}})).data}catch(e){return await(new xi).jsonError({exception:e,error:"getBalance Error"},null,null),{exception:!0}}},this.getOlderOrderDetails=async(e,a,n)=>{try{const i=await hi.get("https://secure.workadvantage.in/external_orders",{params:{reference_id:e},headers:{Authorization:a}}),{result:t,message:o}=i.data;let r=null,s=null,c=!0;try{const{codes:e,order_id:a}=t;r=e,s=a}catch(e){c=!1}return{vouchers:r,success:c,message:o||"",orderId:s,vendorCode:n}}catch(a){return await(new xi).jsonError({exception:a,error:"getOlderOrderDetails Error"},e,n),{oldOrderException:!0}}},this.client_id=e,this.client_secret=a,this.redirect_uri=n,this.authorization=i,this.base_url=t,this.place_order_config=o}}const Ei={client_id:process.env.WA_CLIENT_ID,client_secret:process.env.WA_CLIENT_SECRET,redirect_uri:process.env.WA_REDIRECT_URI,authorization:process.env.WA_AUTHORIZATION,base_url:process.env.WA_BASE_URL,place_order_config:{billing_name:process.env.WA_BILLING_NAME,billing_email:process.env.WA_BILLING_EMAIL,contact:process.env.WA_CONTACT,postal_code:process.env.WA_POSTAL_CODE,city:process.env.WA_CITY,address_line1:process.env.WA_ADDRESS_LINE,state:process.env.WA_STATE,country:process.env.WA_COUNTRY,reference_id:process.env.WA_RF_ID},code_validity_time:process.env.WA_AUTH_CODE_VALIDITY_TIME?process.env.WA_AUTH_CODE_VALIDITY_TIME:21600},Ci={client_id:process.env.QC_AMZN_CLIENT_ID,username:process.env.QC_AMZN_USERNAME,password:process.env.QC_AMZN_PASSWORD,client_secret:process.env.QC_AMZN_CLIENT_SECRET,authorization:process.env.QC_AMZN_AUTHORIZATION,order_history_retrieval_sleep_time:process.env.QC_AMZN_HISTORY_RETRIEVAL_SLEEP_TIME?process.env.QC_AMZN_HISTORY_RETRIEVAL_SLEEP_TIME:500,base_url:process.env.QC_AMZN_BASE_URL,code_validity_time:process.env.QC_AMZN_AUTH_CODE_VALIDITY_TIME?process.env.QC_AMZN_AUTH_CODE_VALIDITY_TIME:21600,place_order_config:{firstname:process.env.QC_AMZN_FIRSTNAME,lastname:process.env.QC_AMZN_LASTNAME,email:process.env.QC_AMZN_EMAIL,telephone:process.env.QC_AMZN_TELEPHONE,line1:process.env.QC_AMZN_ADR_LINE1,line2:process.env.QC_AMZN_ADR_LINE2,city:process.env.QC_AMZN_CITY,region:process.env.QC_AMZN_REGION,country:process.env.QC_AMZN_COUNTRY,postcode:process.env.QC_AMZN_POSTALCODE,company:process.env.QC_AMZN_COMPANYNAME},error_code:{DUPLICATE_ORDER_ERROR:5313}},ki={client_id:process.env.QUICK_CILVER_CLIENT_ID,username:process.env.QUICK_CILVER_USERNAME,password:process.env.QUICK_CILVER_PASSWORD,client_secret:process.env.QUICK_CILVER_CLIENT_SECRET,authorization:process.env.QUICK_CILVER_AUTHORIZATION,order_history_retrieval_sleep_time:process.env.QUICK_CILVER_HISTORY_RETRIEVAL_SLEEP_TIME?process.env.QUICK_CILVER_HISTORY_RETRIEVAL_SLEEP_TIME:500,base_url:process.env.QUICK_CILVER_BASE_URL,code_validity_time:process.env.QUICK_CILVER_AUTH_CODE_VALIDITY_TIME?process.env.QUICK_CILVER_AUTH_CODE_VALIDITY_TIME:21600,place_order_config:{firstname:process.env.QUICK_CILVER_FIRSTNAME,lastname:process.env.QUICK_CILVER_LASTNAME,email:process.env.QUICK_CILVER_EMAIL,telephone:process.env.QUICK_CILVER_TELEPHONE,line1:process.env.QUICK_CILVER_ADR_LINE1,line2:process.env.QUICK_CILVER_ADR_LINE2,city:process.env.QUICK_CILVER_CITY,region:process.env.QUICK_CILVER_REGION,country:process.env.QUICK_CILVER_COUNTRY,postcode:process.env.QUICK_CILVER_POSTALCODE,company:process.env.QUICK_CILVER_COMPANYNAME},error_code:{DUPLICATE_ORDER_ERROR:5313},cardNumber:process.env.QC_CARDNUMBER};var Oi,Ii={workAdvantageConfig:Ei,qcAmazonConfig:Ci,flipkartConfig:{headers:{"Content-Type":"application/json;charset=UTF-8","Flipkart-Gifting-Client-Id":process.env.FLIPKART_GIFTING_API_CLIENT_ID,"Flipkart-Gifting-Client-Token":process.env.FLIPKART_GIFTING_API_CLIENT_TOKEN},baseUrl:process.env.FLIPKART_GIFTING_BASE_URL},quickcilverConfig:ki},Ti={exports:{}},ji={exports:{}};ji.exports=(Oi=Oi||function(e,a){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==P&&P.crypto&&(n=P.crypto),!n)try{n=require("crypto")}catch(e){}var i=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},t=Object.create||function(){function e(){}return function(a){var n;return e.prototype=a,n=new e,e.prototype=null,n}}(),o={},r=o.lib={},s=r.Base={extend:function(e){var a=t(this);return e&&a.mixIn(e),a.hasOwnProperty("init")&&this.init!==a.init||(a.init=function(){a.$super.init.apply(this,arguments)}),a.init.prototype=a,a.$super=this,a},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var a in e)e.hasOwnProperty(a)&&(this[a]=e[a]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},c=r.WordArray=s.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=a?n:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var a=this.words,n=e.words,i=this.sigBytes,t=e.sigBytes;if(this.clamp(),i%4)for(var o=0;o<t;o++){var r=n[o>>>2]>>>24-o%4*8&255;a[i+o>>>2]|=r<<24-(i+o)%4*8}else for(var s=0;s<t;s+=4)a[i+s>>>2]=n[s>>>2];return this.sigBytes+=t,this},clamp:function(){var a=this.words,n=this.sigBytes;a[n>>>2]&=4294967295<<32-n%4*8,a.length=e.ceil(n/4)},clone:function(){var e=s.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var a=[],n=0;n<e;n+=4)a.push(i());return new c.init(a,e)}}),l=o.enc={},u=l.Hex={stringify:function(e){for(var a=e.words,n=e.sigBytes,i=[],t=0;t<n;t++){var o=a[t>>>2]>>>24-t%4*8&255;i.push((o>>>4).toString(16)),i.push((15&o).toString(16))}return i.join("")},parse:function(e){for(var a=e.length,n=[],i=0;i<a;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new c.init(n,a/2)}},p=l.Latin1={stringify:function(e){for(var a=e.words,n=e.sigBytes,i=[],t=0;t<n;t++){var o=a[t>>>2]>>>24-t%4*8&255;i.push(String.fromCharCode(o))}return i.join("")},parse:function(e){for(var a=e.length,n=[],i=0;i<a;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new c.init(n,a)}},d=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(p.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return p.parse(unescape(encodeURIComponent(e)))}},m=r.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(a){var n,i=this._data,t=i.words,o=i.sigBytes,r=this.blockSize,s=o/(4*r),l=(s=a?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*r,u=e.min(4*l,o);if(l){for(var p=0;p<l;p+=r)this._doProcessBlock(t,p);n=t.splice(0,l),i.sigBytes-=u}return new c.init(n,u)},clone:function(){var e=s.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=m.extend({cfg:s.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){m.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(a,n){return new e.init(n).finalize(a)}},_createHmacHelper:function(e){return function(a,n){return new h.HMAC.init(e,n).finalize(a)}}});var h=o.algo={};return o}(Math),Oi);var Pi={exports:{}};Pi.exports=function(e){return i=(n=e).lib,t=i.Base,o=i.WordArray,(r=n.x64={}).Word=t.extend({init:function(e,a){this.high=e,this.low=a}}),r.WordArray=t.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=a?n:8*e.length},toX32:function(){for(var e=this.words,a=e.length,n=[],i=0;i<a;i++){var t=e[i];n.push(t.high),n.push(t.low)}return o.create(n,this.sigBytes)},clone:function(){for(var e=t.clone.call(this),a=e.words=this.words.slice(0),n=a.length,i=0;i<n;i++)a[i]=a[i].clone();return e}}),e;var a,n,i,t,o,r}(ji.exports);var Ai={exports:{}};Ai.exports=function(e){return function(){var a=e,n=a.lib.Hasher,i=a.x64,t=i.Word,o=i.WordArray,r=a.algo;function s(){return t.create.apply(t,arguments)}var c=[s(1116352408,3609767458),s(1899447441,602891725),s(3049323471,3964484399),s(3921009573,2173295548),s(961987163,4081628472),s(1508970993,3053834265),s(2453635748,2937671579),s(2870763221,3664609560),s(3624381080,2734883394),s(310598401,1164996542),s(607225278,1323610764),s(1426881987,3590304994),s(1925078388,4068182383),s(2162078206,991336113),s(2614888103,633803317),s(3248222580,3479774868),s(3835390401,2666613458),s(4022224774,944711139),s(264347078,2341262773),s(604807628,2007800933),s(770255983,1495990901),s(1249150122,1856431235),s(1555081692,3175218132),s(1996064986,2198950837),s(2554220882,3999719339),s(2821834349,766784016),s(2952996808,2566594879),s(3210313671,3203337956),s(3336571891,1034457026),s(3584528711,2466948901),s(113926993,3758326383),s(338241895,168717936),s(666307205,1188179964),s(773529912,1546045734),s(1294757372,1522805485),s(1396182291,2643833823),s(1695183700,2343527390),s(1986661051,1014477480),s(2177026350,1206759142),s(2456956037,344077627),s(2730485921,1290863460),s(2820302411,3158454273),s(3259730800,3505952657),s(3345764771,106217008),s(3516065817,3606008344),s(3600352804,1432725776),s(4094571909,1467031594),s(275423344,851169720),s(430227734,3100823752),s(506948616,1363258195),s(659060556,3750685593),s(883997877,3785050280),s(958139571,3318307427),s(1322822218,3812723403),s(1537002063,2003034995),s(1747873779,3602036899),s(1955562222,1575990012),s(2024104815,1125592928),s(2227730452,2716904306),s(2361852424,442776044),s(2428436474,593698344),s(2756734187,3733110249),s(3204031479,2999351573),s(3329325298,3815920427),s(3391569614,3928383900),s(3515267271,566280711),s(3940187606,3454069534),s(4118630271,4000239992),s(116418474,1914138554),s(174292421,2731055270),s(289380356,3203993006),s(460393269,320620315),s(685471733,587496836),s(852142971,1086792851),s(1017036298,365543100),s(1126000580,2618297676),s(1288033470,3409855158),s(1501505948,4234509866),s(1607167915,987167468),s(1816402316,1246189591)],l=[];!function(){for(var e=0;e<80;e++)l[e]=s()}();var u=r.SHA512=n.extend({_doReset:function(){this._hash=new o.init([new t.init(1779033703,4089235720),new t.init(3144134277,2227873595),new t.init(1013904242,4271175723),new t.init(2773480762,1595750129),new t.init(1359893119,2917565137),new t.init(2600822924,725511199),new t.init(528734635,4215389547),new t.init(1541459225,327033209)])},_doProcessBlock:function(e,a){for(var n=this._hash.words,i=n[0],t=n[1],o=n[2],r=n[3],s=n[4],u=n[5],p=n[6],d=n[7],m=i.high,h=i.low,f=t.high,g=t.low,v=o.high,b=o.low,y=r.high,x=r.low,w=s.high,_=s.low,S=u.high,E=u.low,C=p.high,k=p.low,O=d.high,I=d.low,T=m,j=h,P=f,A=g,R=v,B=b,N=y,D=x,L=w,V=_,F=S,z=E,q=C,U=k,$=O,M=I,Q=0;Q<80;Q++){var G,K,W=l[Q];if(Q<16)K=W.high=0|e[a+2*Q],G=W.low=0|e[a+2*Q+1];else{var H=l[Q-15],Y=H.high,Z=H.low,J=(Y>>>1|Z<<31)^(Y>>>8|Z<<24)^Y>>>7,X=(Z>>>1|Y<<31)^(Z>>>8|Y<<24)^(Z>>>7|Y<<25),ee=l[Q-2],ae=ee.high,ne=ee.low,ie=(ae>>>19|ne<<13)^(ae<<3|ne>>>29)^ae>>>6,te=(ne>>>19|ae<<13)^(ne<<3|ae>>>29)^(ne>>>6|ae<<26),oe=l[Q-7],re=oe.high,se=oe.low,ce=l[Q-16],le=ce.high,ue=ce.low;K=(K=(K=J+re+((G=X+se)>>>0<X>>>0?1:0))+ie+((G+=te)>>>0<te>>>0?1:0))+le+((G+=ue)>>>0<ue>>>0?1:0),W.high=K,W.low=G}var pe,de=L&F^~L&q,me=V&z^~V&U,he=T&P^T&R^P&R,fe=j&A^j&B^A&B,ge=(T>>>28|j<<4)^(T<<30|j>>>2)^(T<<25|j>>>7),ve=(j>>>28|T<<4)^(j<<30|T>>>2)^(j<<25|T>>>7),be=(L>>>14|V<<18)^(L>>>18|V<<14)^(L<<23|V>>>9),ye=(V>>>14|L<<18)^(V>>>18|L<<14)^(V<<23|L>>>9),xe=c[Q],we=xe.high,_e=xe.low,Se=$+be+((pe=M+ye)>>>0<M>>>0?1:0),Ee=ve+fe;$=q,M=U,q=F,U=z,F=L,z=V,L=N+(Se=(Se=(Se=Se+de+((pe+=me)>>>0<me>>>0?1:0))+we+((pe+=_e)>>>0<_e>>>0?1:0))+K+((pe+=G)>>>0<G>>>0?1:0))+((V=D+pe|0)>>>0<D>>>0?1:0)|0,N=R,D=B,R=P,B=A,P=T,A=j,T=Se+(ge+he+(Ee>>>0<ve>>>0?1:0))+((j=pe+Ee|0)>>>0<pe>>>0?1:0)|0}h=i.low=h+j,i.high=m+T+(h>>>0<j>>>0?1:0),g=t.low=g+A,t.high=f+P+(g>>>0<A>>>0?1:0),b=o.low=b+B,o.high=v+R+(b>>>0<B>>>0?1:0),x=r.low=x+D,r.high=y+N+(x>>>0<D>>>0?1:0),_=s.low=_+V,s.high=w+L+(_>>>0<V>>>0?1:0),E=u.low=E+z,u.high=S+F+(E>>>0<z>>>0?1:0),k=p.low=k+U,p.high=C+q+(k>>>0<U>>>0?1:0),I=d.low=I+M,d.high=O+$+(I>>>0<M>>>0?1:0)},_doFinalize:function(){var e=this._data,a=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return a[i>>>5]|=128<<24-i%32,a[30+(i+128>>>10<<5)]=Math.floor(n/4294967296),a[31+(i+128>>>10<<5)]=n,e.sigBytes=4*a.length,this._process(),this._hash.toX32()},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});a.SHA512=n._createHelper(u),a.HmacSHA512=n._createHmacHelper(u)}(),e.SHA512}(ji.exports);var Ri={exports:{}};Ri.exports=function(e){var a,n,i;n=(a=e).lib.Base,i=a.enc.Utf8,a.algo.HMAC=n.extend({init:function(e,a){e=this._hasher=new e.init,"string"==typeof a&&(a=i.parse(a));var n=e.blockSize,t=4*n;a.sigBytes>t&&(a=e.finalize(a)),a.clamp();for(var o=this._oKey=a.clone(),r=this._iKey=a.clone(),s=o.words,c=r.words,l=0;l<n;l++)s[l]^=1549556828,c[l]^=909522486;o.sigBytes=r.sigBytes=t,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var a=this._hasher,n=a.finalize(e);return a.reset(),a.finalize(this._oKey.clone().concat(n))}})}(ji.exports);var Bi=Ti.exports=function(e){return e.HmacSHA512}(ji.exports);var Ni={exports:{}};!function(e){const a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol:e=>`Symbol(${e})`;function n(){}function i(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==P?P:void 0}const t=i();function o(e){return"object"==typeof e&&null!==e||"function"==typeof e}const r=n,s=Promise,c=Promise.prototype.then,l=Promise.resolve.bind(s),u=Promise.reject.bind(s);function p(e){return new s(e)}function d(e){return l(e)}function m(e){return u(e)}function h(e,a,n){return c.call(e,a,n)}function f(e,a,n){h(h(e,a,n),void 0,r)}function g(e,a){f(e,a)}function v(e,a){f(e,void 0,a)}function b(e,a,n){return h(e,a,n)}function y(e){h(e,void 0,r)}const x=(()=>{const e=t&&t.queueMicrotask;if("function"==typeof e)return e;const a=d(void 0);return e=>h(a,e)})();function w(e,a,n){if("function"!=typeof e)throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,a,n)}function _(e,a,n){try{return d(w(e,a,n))}catch(e){return m(e)}}const S=16384;class E{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(e){const a=this._back;let n=a;a._elements.length===S-1&&(n={_elements:[],_next:void 0}),a._elements.push(e),n!==a&&(this._back=n,a._next=n),++this._size}shift(){const e=this._front;let a=e;const n=this._cursor;let i=n+1;const t=e._elements,o=t[n];return i===S&&(a=e._next,i=0),--this._size,this._cursor=i,e!==a&&(this._front=a),t[n]=void 0,o}forEach(e){let a=this._cursor,n=this._front,i=n._elements;for(;!(a===i.length&&void 0===n._next||a===i.length&&(n=n._next,i=n._elements,a=0,0===i.length));)e(i[a]),++a}peek(){const e=this._front,a=this._cursor;return e._elements[a]}}function C(e,a){e._ownerReadableStream=a,a._reader=e,"readable"===a._state?T(e):"closed"===a._state?A(e):j(e,a._storedError)}function k(e,a){return Ci(e._ownerReadableStream,a)}function O(e){"readable"===e._ownerReadableStream._state?R(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):B(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function I(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function T(e){e._closedPromise=p(((a,n)=>{e._closedPromise_resolve=a,e._closedPromise_reject=n}))}function j(e,a){T(e),R(e,a)}function A(e){T(e),N(e)}function R(e,a){void 0!==e._closedPromise_reject&&(y(e._closedPromise),e._closedPromise_reject(a),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function B(e,a){j(e,a)}function N(e){void 0!==e._closedPromise_resolve&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}const D=a("[[AbortSteps]]"),L=a("[[ErrorSteps]]"),V=a("[[CancelSteps]]"),F=a("[[PullSteps]]"),z=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},q=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function U(e){return"object"==typeof e||"function"==typeof e}function $(e,a){if(void 0!==e&&!U(e))throw new TypeError(`${a} is not an object.`)}function M(e,a){if("function"!=typeof e)throw new TypeError(`${a} is not a function.`)}function Q(e){return"object"==typeof e&&null!==e||"function"==typeof e}function G(e,a){if(!Q(e))throw new TypeError(`${a} is not an object.`)}function K(e,a,n){if(void 0===e)throw new TypeError(`Parameter ${a} is required in '${n}'.`)}function W(e,a,n){if(void 0===e)throw new TypeError(`${a} is required in '${n}'.`)}function H(e){return Number(e)}function Y(e){return 0===e?0:e}function Z(e){return Y(q(e))}function J(e,a){const n=0,i=Number.MAX_SAFE_INTEGER;let t=Number(e);if(t=Y(t),!z(t))throw new TypeError(`${a} is not a finite number`);if(t=Z(t),t<n||t>i)throw new TypeError(`${a} is outside the accepted range of ${n} to ${i}, inclusive`);return z(t)&&0!==t?t:0}function X(e,a){if(!Si(e))throw new TypeError(`${a} is not a ReadableStream.`)}function ee(e){return new oe(e)}function ae(e,a){e._reader._readRequests.push(a)}function ne(e,a,n){const i=e._reader._readRequests.shift();n?i._closeSteps():i._chunkSteps(a)}function ie(e){return e._reader._readRequests.length}function te(e){const a=e._reader;return void 0!==a&&!!re(a)}class oe{constructor(e){if(K(e,1,"ReadableStreamDefaultReader"),X(e,"First parameter"),Ei(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");C(this,e),this._readRequests=new E}get closed(){return re(this)?this._closedPromise:m(ce("closed"))}cancel(e){return re(this)?void 0===this._ownerReadableStream?m(I("cancel")):k(this,e):m(ce("cancel"))}read(){if(!re(this))return m(ce("read"));if(void 0===this._ownerReadableStream)return m(I("read from"));let e,a;const n=p(((n,i)=>{e=n,a=i})),i={_chunkSteps:a=>e({value:a,done:!1}),_closeSteps:()=>e({value:void 0,done:!0}),_errorSteps:e=>a(e)};return se(this,i),n}releaseLock(){if(!re(this))throw ce("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");O(this)}}}function re(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readRequests")&&e instanceof oe}function se(e,a){const n=e._ownerReadableStream;n._disturbed=!0,"closed"===n._state?a._closeSteps():"errored"===n._state?a._errorSteps(n._storedError):n._readableStreamController[F](a)}function ce(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}Object.defineProperties(oe.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),"symbol"==typeof a.toStringTag&&Object.defineProperty(oe.prototype,a.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});const le=Object.getPrototypeOf(Object.getPrototypeOf((async function*(){})).prototype);class ue{constructor(e,a){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=e,this._preventCancel=a}next(){const e=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?b(this._ongoingPromise,e,e):e(),this._ongoingPromise}return(e){const a=()=>this._returnSteps(e);return this._ongoingPromise?b(this._ongoingPromise,a,a):a()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});const e=this._reader;if(void 0===e._ownerReadableStream)return m(I("iterate"));let a,n;const i=p(((e,i)=>{a=e,n=i}));return se(e,{_chunkSteps:e=>{this._ongoingPromise=void 0,x((()=>a({value:e,done:!1})))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,O(e),a({value:void 0,done:!0})},_errorSteps:a=>{this._ongoingPromise=void 0,this._isFinished=!0,O(e),n(a)}}),i}_returnSteps(e){if(this._isFinished)return Promise.resolve({value:e,done:!0});this._isFinished=!0;const a=this._reader;if(void 0===a._ownerReadableStream)return m(I("finish iterating"));if(!this._preventCancel){const n=k(a,e);return O(a),b(n,(()=>({value:e,done:!0})))}return O(a),d({value:e,done:!0})}}const pe={next(){return me(this)?this._asyncIteratorImpl.next():m(he("next"))},return(e){return me(this)?this._asyncIteratorImpl.return(e):m(he("return"))}};function de(e,a){const n=ee(e),i=new ue(n,a),t=Object.create(pe);return t._asyncIteratorImpl=i,t}function me(e){if(!o(e))return!1;if(!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof ue}catch(e){return!1}}function he(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}void 0!==le&&Object.setPrototypeOf(pe,le);const fe=Number.isNaN||function(e){return e!=e};function ge(e){return e.slice()}function ve(e,a,n,i,t){new Uint8Array(e).set(new Uint8Array(n,i,t),a)}function be(e){return e}function ye(e){return!1}function xe(e,a,n){if(e.slice)return e.slice(a,n);const i=n-a,t=new ArrayBuffer(i);return ve(t,0,e,a,i),t}function we(e){return!("number"!=typeof e||fe(e)||e<0)}function _e(e){const a=xe(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(a)}function Se(e){const a=e._queue.shift();return e._queueTotalSize-=a.size,e._queueTotalSize<0&&(e._queueTotalSize=0),a.value}function Ee(e,a,n){if(!we(n)||n===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:a,size:n}),e._queueTotalSize+=n}function Ce(e){return e._queue.peek().value}function ke(e){e._queue=new E,e._queueTotalSize=0}class Oe{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!je(this))throw ta("view");return this._view}respond(e){if(!je(this))throw ta("respond");if(K(e,1,"respond"),e=J(e,"First parameter"),void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");ye(this._view.buffer),Xe(this._associatedReadableByteStreamController,e)}respondWithNewView(e){if(!je(this))throw ta("respondWithNewView");if(K(e,1,"respondWithNewView"),!ArrayBuffer.isView(e))throw new TypeError("You can only respond with array buffer views");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");ye(e.buffer),ea(this._associatedReadableByteStreamController,e)}}Object.defineProperties(Oe.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),"symbol"==typeof a.toStringTag&&Object.defineProperty(Oe.prototype,a.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class Ie{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!Te(this))throw oa("byobRequest");return Ze(this)}get desiredSize(){if(!Te(this))throw oa("desiredSize");return Je(this)}close(){if(!Te(this))throw oa("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");const e=this._controlledReadableByteStream._state;if("readable"!==e)throw new TypeError(`The stream (in ${e} state) is not in the readable state and cannot be closed`);We(this)}enqueue(e){if(!Te(this))throw oa("enqueue");if(K(e,1,"enqueue"),!ArrayBuffer.isView(e))throw new TypeError("chunk must be an array buffer view");if(0===e.byteLength)throw new TypeError("chunk must have non-zero byteLength");if(0===e.buffer.byteLength)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");const a=this._controlledReadableByteStream._state;if("readable"!==a)throw new TypeError(`The stream (in ${a} state) is not in the readable state and cannot be enqueued to`);He(this,e)}error(e){if(!Te(this))throw oa("error");Ye(this,e)}[V](e){Ae(this),ke(this);const a=this._cancelAlgorithm(e);return Ke(this),a}[F](e){const a=this._controlledReadableByteStream;if(this._queueTotalSize>0){const a=this._queue.shift();this._queueTotalSize-=a.byteLength,Ve(this);const n=new Uint8Array(a.buffer,a.byteOffset,a.byteLength);return void e._chunkSteps(n)}const n=this._autoAllocateChunkSize;if(void 0!==n){let a;try{a=new ArrayBuffer(n)}catch(a){return void e._errorSteps(a)}const i={buffer:a,bufferByteLength:n,byteOffset:0,byteLength:n,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(i)}ae(a,e),Pe(this)}}function Te(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")&&e instanceof Ie}function je(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")&&e instanceof Oe}function Pe(e){Ge(e)&&(e._pulling?e._pullAgain=!0:(e._pulling=!0,f(e._pullAlgorithm(),(()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Pe(e))}),(a=>{Ye(e,a)}))))}function Ae(e){Fe(e),e._pendingPullIntos=new E}function Re(e,a){let n=!1;"closed"===e._state&&(n=!0);const i=Be(a);"default"===a.readerType?ne(e,i,n):ca(e,i,n)}function Be(e){const a=e.bytesFilled,n=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,a/n)}function Ne(e,a,n,i){e._queue.push({buffer:a,byteOffset:n,byteLength:i}),e._queueTotalSize+=i}function De(e,a){const n=a.elementSize,i=a.bytesFilled-a.bytesFilled%n,t=Math.min(e._queueTotalSize,a.byteLength-a.bytesFilled),o=a.bytesFilled+t,r=o-o%n;let s=t,c=!1;r>i&&(s=r-a.bytesFilled,c=!0);const l=e._queue;for(;s>0;){const n=l.peek(),i=Math.min(s,n.byteLength),t=a.byteOffset+a.bytesFilled;ve(a.buffer,t,n.buffer,n.byteOffset,i),n.byteLength===i?l.shift():(n.byteOffset+=i,n.byteLength-=i),e._queueTotalSize-=i,Le(e,i,a),s-=i}return c}function Le(e,a,n){n.bytesFilled+=a}function Ve(e){0===e._queueTotalSize&&e._closeRequested?(Ke(e),ki(e._controlledReadableByteStream)):Pe(e)}function Fe(e){null!==e._byobRequest&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function ze(e){for(;e._pendingPullIntos.length>0;){if(0===e._queueTotalSize)return;const a=e._pendingPullIntos.peek();De(e,a)&&(Qe(e),Re(e._controlledReadableByteStream,a))}}function qe(e,a,n){const i=e._controlledReadableByteStream;let t=1;a.constructor!==DataView&&(t=a.constructor.BYTES_PER_ELEMENT);const o=a.constructor,r=be(a.buffer),s={buffer:r,bufferByteLength:r.byteLength,byteOffset:a.byteOffset,byteLength:a.byteLength,bytesFilled:0,elementSize:t,viewConstructor:o,readerType:"byob"};if(e._pendingPullIntos.length>0)return e._pendingPullIntos.push(s),void sa(i,n);if("closed"!==i._state){if(e._queueTotalSize>0){if(De(e,s)){const a=Be(s);return Ve(e),void n._chunkSteps(a)}if(e._closeRequested){const a=new TypeError("Insufficient bytes to fill elements in the given buffer");return Ye(e,a),void n._errorSteps(a)}}e._pendingPullIntos.push(s),sa(i,n),Pe(e)}else{const e=new o(s.buffer,s.byteOffset,0);n._closeSteps(e)}}function Ue(e,a){const n=e._controlledReadableByteStream;if(ua(n))for(;la(n)>0;)Re(n,Qe(e))}function $e(e,a,n){if(Le(e,a,n),n.bytesFilled<n.elementSize)return;Qe(e);const i=n.bytesFilled%n.elementSize;if(i>0){const a=n.byteOffset+n.bytesFilled,t=xe(n.buffer,a-i,a);Ne(e,t,0,t.byteLength)}n.bytesFilled-=i,Re(e._controlledReadableByteStream,n),ze(e)}function Me(e,a){const n=e._pendingPullIntos.peek();Fe(e),"closed"===e._controlledReadableByteStream._state?Ue(e):$e(e,a,n),Pe(e)}function Qe(e){return e._pendingPullIntos.shift()}function Ge(e){const a=e._controlledReadableByteStream;return"readable"===a._state&&!e._closeRequested&&!!e._started&&(!!(te(a)&&ie(a)>0)||!!(ua(a)&&la(a)>0)||Je(e)>0)}function Ke(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function We(e){const a=e._controlledReadableByteStream;if(!e._closeRequested&&"readable"===a._state)if(e._queueTotalSize>0)e._closeRequested=!0;else{if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){const a=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Ye(e,a),a}Ke(e),ki(a)}}function He(e,a){const n=e._controlledReadableByteStream;if(e._closeRequested||"readable"!==n._state)return;const i=a.buffer,t=a.byteOffset,o=a.byteLength,r=be(i);if(e._pendingPullIntos.length>0){const a=e._pendingPullIntos.peek();ye(a.buffer),a.buffer=be(a.buffer)}Fe(e),te(n)?0===ie(n)?Ne(e,r,t,o):(e._pendingPullIntos.length>0&&Qe(e),ne(n,new Uint8Array(r,t,o),!1)):ua(n)?(Ne(e,r,t,o),ze(e)):Ne(e,r,t,o),Pe(e)}function Ye(e,a){const n=e._controlledReadableByteStream;"readable"===n._state&&(Ae(e),ke(e),Ke(e),Oi(n,a))}function Ze(e){if(null===e._byobRequest&&e._pendingPullIntos.length>0){const a=e._pendingPullIntos.peek(),n=new Uint8Array(a.buffer,a.byteOffset+a.bytesFilled,a.byteLength-a.bytesFilled),i=Object.create(Oe.prototype);ia(i,e,n),e._byobRequest=i}return e._byobRequest}function Je(e){const a=e._controlledReadableByteStream._state;return"errored"===a?null:"closed"===a?0:e._strategyHWM-e._queueTotalSize}function Xe(e,a){const n=e._pendingPullIntos.peek();if("closed"===e._controlledReadableByteStream._state){if(0!==a)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(0===a)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(n.bytesFilled+a>n.byteLength)throw new RangeError("bytesWritten out of range")}n.buffer=be(n.buffer),Me(e,a)}function ea(e,a){const n=e._pendingPullIntos.peek();if("closed"===e._controlledReadableByteStream._state){if(0!==a.byteLength)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(0===a.byteLength)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(n.byteOffset+n.bytesFilled!==a.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(n.bufferByteLength!==a.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(n.bytesFilled+a.byteLength>n.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");const i=a.byteLength;n.buffer=be(a.buffer),Me(e,i)}function aa(e,a,n,i,t,o,r){a._controlledReadableByteStream=e,a._pullAgain=!1,a._pulling=!1,a._byobRequest=null,a._queue=a._queueTotalSize=void 0,ke(a),a._closeRequested=!1,a._started=!1,a._strategyHWM=o,a._pullAlgorithm=i,a._cancelAlgorithm=t,a._autoAllocateChunkSize=r,a._pendingPullIntos=new E,e._readableStreamController=a,f(d(n()),(()=>{a._started=!0,Pe(a)}),(e=>{Ye(a,e)}))}function na(e,a,n){const i=Object.create(Ie.prototype);let t=()=>{},o=()=>d(void 0),r=()=>d(void 0);void 0!==a.start&&(t=()=>a.start(i)),void 0!==a.pull&&(o=()=>a.pull(i)),void 0!==a.cancel&&(r=e=>a.cancel(e));const s=a.autoAllocateChunkSize;if(0===s)throw new TypeError("autoAllocateChunkSize must be greater than 0");aa(e,i,t,o,r,n,s)}function ia(e,a,n){e._associatedReadableByteStreamController=a,e._view=n}function ta(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function oa(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function ra(e){return new pa(e)}function sa(e,a){e._reader._readIntoRequests.push(a)}function ca(e,a,n){const i=e._reader._readIntoRequests.shift();n?i._closeSteps(a):i._chunkSteps(a)}function la(e){return e._reader._readIntoRequests.length}function ua(e){const a=e._reader;return void 0!==a&&!!da(a)}Object.defineProperties(Ie.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof a.toStringTag&&Object.defineProperty(Ie.prototype,a.toStringTag,{value:"ReadableByteStreamController",configurable:!0});class pa{constructor(e){if(K(e,1,"ReadableStreamBYOBReader"),X(e,"First parameter"),Ei(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!Te(e._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");C(this,e),this._readIntoRequests=new E}get closed(){return da(this)?this._closedPromise:m(ha("closed"))}cancel(e){return da(this)?void 0===this._ownerReadableStream?m(I("cancel")):k(this,e):m(ha("cancel"))}read(e){if(!da(this))return m(ha("read"));if(!ArrayBuffer.isView(e))return m(new TypeError("view must be an array buffer view"));if(0===e.byteLength)return m(new TypeError("view must have non-zero byteLength"));if(0===e.buffer.byteLength)return m(new TypeError("view's buffer must have non-zero byteLength"));if(ye(e.buffer),void 0===this._ownerReadableStream)return m(I("read from"));let a,n;const i=p(((e,i)=>{a=e,n=i})),t={_chunkSteps:e=>a({value:e,done:!1}),_closeSteps:e=>a({value:e,done:!0}),_errorSteps:e=>n(e)};return ma(this,e,t),i}releaseLock(){if(!da(this))throw ha("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");O(this)}}}function da(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")&&e instanceof pa}function ma(e,a,n){const i=e._ownerReadableStream;i._disturbed=!0,"errored"===i._state?n._errorSteps(i._storedError):qe(i._readableStreamController,a,n)}function ha(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function fa(e,a){const{highWaterMark:n}=e;if(void 0===n)return a;if(fe(n)||n<0)throw new RangeError("Invalid highWaterMark");return n}function ga(e){const{size:a}=e;return a||(()=>1)}function va(e,a){$(e,a);const n=null==e?void 0:e.highWaterMark,i=null==e?void 0:e.size;return{highWaterMark:void 0===n?void 0:H(n),size:void 0===i?void 0:ba(i,`${a} has member 'size' that`)}}function ba(e,a){return M(e,a),a=>H(e(a))}function ya(e,a){$(e,a);const n=null==e?void 0:e.abort,i=null==e?void 0:e.close,t=null==e?void 0:e.start,o=null==e?void 0:e.type,r=null==e?void 0:e.write;return{abort:void 0===n?void 0:xa(n,e,`${a} has member 'abort' that`),close:void 0===i?void 0:wa(i,e,`${a} has member 'close' that`),start:void 0===t?void 0:_a(t,e,`${a} has member 'start' that`),write:void 0===r?void 0:Sa(r,e,`${a} has member 'write' that`),type:o}}function xa(e,a,n){return M(e,n),n=>_(e,a,[n])}function wa(e,a,n){return M(e,n),()=>_(e,a,[])}function _a(e,a,n){return M(e,n),n=>w(e,a,[n])}function Sa(e,a,n){return M(e,n),(n,i)=>_(e,a,[n,i])}function Ea(e,a){if(!Aa(e))throw new TypeError(`${a} is not a WritableStream.`)}function Ca(e){if("object"!=typeof e||null===e)return!1;try{return"boolean"==typeof e.aborted}catch(e){return!1}}Object.defineProperties(pa.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),"symbol"==typeof a.toStringTag&&Object.defineProperty(pa.prototype,a.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});const ka="function"==typeof AbortController;function Oa(){if(ka)return new AbortController}class Ia{constructor(e={},a={}){void 0===e?e=null:G(e,"First parameter");const n=va(a,"Second parameter"),i=ya(e,"First parameter");if(Pa(this),void 0!==i.type)throw new RangeError("Invalid type is specified");const t=ga(n);pn(this,i,fa(n,1),t)}get locked(){if(!Aa(this))throw Sn("locked");return Ra(this)}abort(e){return Aa(this)?Ra(this)?m(new TypeError("Cannot abort a stream that already has a writer")):Ba(this,e):m(Sn("abort"))}close(){return Aa(this)?Ra(this)?m(new TypeError("Cannot close a stream that already has a writer")):Ma(this)?m(new TypeError("Cannot close an already-closing stream")):Na(this):m(Sn("close"))}getWriter(){if(!Aa(this))throw Sn("getWriter");return Ta(this)}}function Ta(e){return new Ya(e)}function ja(e,a,n,i,t=1,o=(()=>1)){const r=Object.create(Ia.prototype);return Pa(r),un(r,Object.create(cn.prototype),e,a,n,i,t,o),r}function Pa(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new E,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function Aa(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")&&e instanceof Ia}function Ra(e){return void 0!==e._writer}function Ba(e,a){var n;if("closed"===e._state||"errored"===e._state)return d(void 0);e._writableStreamController._abortReason=a,null===(n=e._writableStreamController._abortController)||void 0===n||n.abort();const i=e._state;if("closed"===i||"errored"===i)return d(void 0);if(void 0!==e._pendingAbortRequest)return e._pendingAbortRequest._promise;let t=!1;"erroring"===i&&(t=!0,a=void 0);const o=p(((n,i)=>{e._pendingAbortRequest={_promise:void 0,_resolve:n,_reject:i,_reason:a,_wasAlreadyErroring:t}}));return e._pendingAbortRequest._promise=o,t||Va(e,a),o}function Na(e){const a=e._state;if("closed"===a||"errored"===a)return m(new TypeError(`The stream (in ${a} state) is not in the writable state and cannot be closed`));const n=p(((a,n)=>{const i={_resolve:a,_reject:n};e._closeRequest=i})),i=e._writer;return void 0!==i&&e._backpressure&&"writable"===a&&Fn(i),mn(e._writableStreamController),n}function Da(e){return p(((a,n)=>{const i={_resolve:a,_reject:n};e._writeRequests.push(i)}))}function La(e,a){"writable"!==e._state?Fa(e):Va(e,a)}function Va(e,a){const n=e._writableStreamController;e._state="erroring",e._storedError=a;const i=e._writer;void 0!==i&&nn(i,a),!Qa(e)&&n._started&&Fa(e)}function Fa(e){e._state="errored",e._writableStreamController[L]();const a=e._storedError;if(e._writeRequests.forEach((e=>{e._reject(a)})),e._writeRequests=new E,void 0===e._pendingAbortRequest)return void Wa(e);const n=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,n._wasAlreadyErroring)return n._reject(a),void Wa(e);f(e._writableStreamController[D](n._reason),(()=>{n._resolve(),Wa(e)}),(a=>{n._reject(a),Wa(e)}))}function za(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function qa(e,a){e._inFlightWriteRequest._reject(a),e._inFlightWriteRequest=void 0,La(e,a)}function Ua(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,"erroring"===e._state&&(e._storedError=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";const a=e._writer;void 0!==a&&An(a)}function $a(e,a){e._inFlightCloseRequest._reject(a),e._inFlightCloseRequest=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._reject(a),e._pendingAbortRequest=void 0),La(e,a)}function Ma(e){return void 0!==e._closeRequest||void 0!==e._inFlightCloseRequest}function Qa(e){return void 0!==e._inFlightWriteRequest||void 0!==e._inFlightCloseRequest}function Ga(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function Ka(e){e._inFlightWriteRequest=e._writeRequests.shift()}function Wa(e){void 0!==e._closeRequest&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);const a=e._writer;void 0!==a&&jn(a,e._storedError)}function Ha(e,a){const n=e._writer;void 0!==n&&a!==e._backpressure&&(a?Ln(n):Fn(n)),e._backpressure=a}Object.defineProperties(Ia.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),"symbol"==typeof a.toStringTag&&Object.defineProperty(Ia.prototype,a.toStringTag,{value:"WritableStream",configurable:!0});class Ya{constructor(e){if(K(e,1,"WritableStreamDefaultWriter"),Ea(e,"First parameter"),Ra(e))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=e,e._writer=this;const a=e._state;if("writable"===a)!Ma(e)&&e._backpressure?Rn(this):Nn(this),On(this);else if("erroring"===a)Bn(this,e._storedError),On(this);else if("closed"===a)Nn(this),Tn(this);else{const a=e._storedError;Bn(this,a),In(this,a)}}get closed(){return Za(this)?this._closedPromise:m(Cn("closed"))}get desiredSize(){if(!Za(this))throw Cn("desiredSize");if(void 0===this._ownerWritableStream)throw kn("desiredSize");return tn(this)}get ready(){return Za(this)?this._readyPromise:m(Cn("ready"))}abort(e){return Za(this)?void 0===this._ownerWritableStream?m(kn("abort")):Ja(this,e):m(Cn("abort"))}close(){if(!Za(this))return m(Cn("close"));const e=this._ownerWritableStream;return void 0===e?m(kn("close")):Ma(e)?m(new TypeError("Cannot close an already-closing stream")):Xa(this)}releaseLock(){if(!Za(this))throw Cn("releaseLock");void 0!==this._ownerWritableStream&&on(this)}write(e){return Za(this)?void 0===this._ownerWritableStream?m(kn("write to")):rn(this,e):m(Cn("write"))}}function Za(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")&&e instanceof Ya}function Ja(e,a){return Ba(e._ownerWritableStream,a)}function Xa(e){return Na(e._ownerWritableStream)}function en(e){const a=e._ownerWritableStream,n=a._state;return Ma(a)||"closed"===n?d(void 0):"errored"===n?m(a._storedError):Xa(e)}function an(e,a){"pending"===e._closedPromiseState?jn(e,a):Pn(e,a)}function nn(e,a){"pending"===e._readyPromiseState?Dn(e,a):Vn(e,a)}function tn(e){const a=e._ownerWritableStream,n=a._state;return"errored"===n||"erroring"===n?null:"closed"===n?0:fn(a._writableStreamController)}function on(e){const a=e._ownerWritableStream,n=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");nn(e,n),an(e,n),a._writer=void 0,e._ownerWritableStream=void 0}function rn(e,a){const n=e._ownerWritableStream,i=n._writableStreamController,t=hn(i,a);if(n!==e._ownerWritableStream)return m(kn("write to"));const o=n._state;if("errored"===o)return m(n._storedError);if(Ma(n)||"closed"===o)return m(new TypeError("The stream is closing or closed and cannot be written to"));if("erroring"===o)return m(n._storedError);const r=Da(n);return gn(i,a,t),r}Object.defineProperties(Ya.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),"symbol"==typeof a.toStringTag&&Object.defineProperty(Ya.prototype,a.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});const sn={};class cn{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!ln(this))throw En("abortReason");return this._abortReason}get signal(){if(!ln(this))throw En("signal");if(void 0===this._abortController)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(e){if(!ln(this))throw En("error");"writable"===this._controlledWritableStream._state&&_n(this,e)}[D](e){const a=this._abortAlgorithm(e);return dn(this),a}[L](){ke(this)}}function ln(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")&&e instanceof cn}function un(e,a,n,i,t,o,r,s){a._controlledWritableStream=e,e._writableStreamController=a,a._queue=void 0,a._queueTotalSize=void 0,ke(a),a._abortReason=void 0,a._abortController=Oa(),a._started=!1,a._strategySizeAlgorithm=s,a._strategyHWM=r,a._writeAlgorithm=i,a._closeAlgorithm=t,a._abortAlgorithm=o;const c=wn(a);Ha(e,c),f(d(n()),(()=>{a._started=!0,vn(a)}),(n=>{a._started=!0,La(e,n)}))}function pn(e,a,n,i){const t=Object.create(cn.prototype);let o=()=>{},r=()=>d(void 0),s=()=>d(void 0),c=()=>d(void 0);void 0!==a.start&&(o=()=>a.start(t)),void 0!==a.write&&(r=e=>a.write(e,t)),void 0!==a.close&&(s=()=>a.close()),void 0!==a.abort&&(c=e=>a.abort(e)),un(e,t,o,r,s,c,n,i)}function dn(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function mn(e){Ee(e,sn,0),vn(e)}function hn(e,a){try{return e._strategySizeAlgorithm(a)}catch(a){return bn(e,a),1}}function fn(e){return e._strategyHWM-e._queueTotalSize}function gn(e,a,n){try{Ee(e,a,n)}catch(a){return void bn(e,a)}const i=e._controlledWritableStream;Ma(i)||"writable"!==i._state||Ha(i,wn(e)),vn(e)}function vn(e){const a=e._controlledWritableStream;if(!e._started)return;if(void 0!==a._inFlightWriteRequest)return;if("erroring"===a._state)return void Fa(a);if(0===e._queue.length)return;const n=Ce(e);n===sn?yn(e):xn(e,n)}function bn(e,a){"writable"===e._controlledWritableStream._state&&_n(e,a)}function yn(e){const a=e._controlledWritableStream;Ga(a),Se(e);const n=e._closeAlgorithm();dn(e),f(n,(()=>{Ua(a)}),(e=>{$a(a,e)}))}function xn(e,a){const n=e._controlledWritableStream;Ka(n),f(e._writeAlgorithm(a),(()=>{za(n);const a=n._state;if(Se(e),!Ma(n)&&"writable"===a){const a=wn(e);Ha(n,a)}vn(e)}),(a=>{"writable"===n._state&&dn(e),qa(n,a)}))}function wn(e){return fn(e)<=0}function _n(e,a){const n=e._controlledWritableStream;dn(e),Va(n,a)}function Sn(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function En(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function Cn(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function kn(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function On(e){e._closedPromise=p(((a,n)=>{e._closedPromise_resolve=a,e._closedPromise_reject=n,e._closedPromiseState="pending"}))}function In(e,a){On(e),jn(e,a)}function Tn(e){On(e),An(e)}function jn(e,a){void 0!==e._closedPromise_reject&&(y(e._closedPromise),e._closedPromise_reject(a),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function Pn(e,a){In(e,a)}function An(e){void 0!==e._closedPromise_resolve&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function Rn(e){e._readyPromise=p(((a,n)=>{e._readyPromise_resolve=a,e._readyPromise_reject=n})),e._readyPromiseState="pending"}function Bn(e,a){Rn(e),Dn(e,a)}function Nn(e){Rn(e),Fn(e)}function Dn(e,a){void 0!==e._readyPromise_reject&&(y(e._readyPromise),e._readyPromise_reject(a),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function Ln(e){Rn(e)}function Vn(e,a){Bn(e,a)}function Fn(e){void 0!==e._readyPromise_resolve&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}Object.defineProperties(cn.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),"symbol"==typeof a.toStringTag&&Object.defineProperty(cn.prototype,a.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});const zn="undefined"!=typeof DOMException?DOMException:void 0;function qn(e){if("function"!=typeof e&&"object"!=typeof e)return!1;try{return new e,!0}catch(e){return!1}}function Un(){const e=function(e,a){this.message=e||"",this.name=a||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}const $n=qn(zn)?zn:Un();function Mn(e,a,i,t,o,r){const s=ee(e),c=Ta(a);e._disturbed=!0;let l=!1,u=d(void 0);return p(((m,b)=>{let x;if(void 0!==r){if(x=()=>{const n=new $n("Aborted","AbortError"),i=[];t||i.push((()=>"writable"===a._state?Ba(a,n):d(void 0))),o||i.push((()=>"readable"===e._state?Ci(e,n):d(void 0))),k((()=>Promise.all(i.map((e=>e())))),!0,n)},r.aborted)return void x();r.addEventListener("abort",x)}function w(){return p(((e,a)=>{function n(i){i?e():h(_(),n,a)}n(!1)}))}function _(){return l?d(!0):h(c._readyPromise,(()=>p(((e,a)=>{se(s,{_chunkSteps:a=>{u=h(rn(c,a),void 0,n),e(!1)},_closeSteps:()=>e(!0),_errorSteps:a})}))))}if(E(e,s._closedPromise,(e=>{t?I(!0,e):k((()=>Ba(a,e)),!0,e)})),E(a,c._closedPromise,(a=>{o?I(!0,a):k((()=>Ci(e,a)),!0,a)})),C(e,s._closedPromise,(()=>{i?I():k((()=>en(c)))})),Ma(a)||"closed"===a._state){const a=new TypeError("the destination writable stream closed before all data could be piped to it");o?I(!0,a):k((()=>Ci(e,a)),!0,a)}function S(){const e=u;return h(u,(()=>e!==u?S():void 0))}function E(e,a,n){"errored"===e._state?n(e._storedError):v(a,n)}function C(e,a,n){"closed"===e._state?n():g(a,n)}function k(e,n,i){function t(){f(e(),(()=>T(n,i)),(e=>T(!0,e)))}l||(l=!0,"writable"!==a._state||Ma(a)?t():g(S(),t))}function I(e,n){l||(l=!0,"writable"!==a._state||Ma(a)?T(e,n):g(S(),(()=>T(e,n))))}function T(e,a){on(c),O(s),void 0!==r&&r.removeEventListener("abort",x),e?b(a):m(void 0)}y(w())}))}class Qn{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Gn(this))throw ti("desiredSize");return Xn(this)}close(){if(!Gn(this))throw ti("close");if(!ai(this))throw new TypeError("The stream is not in a state that permits close");Yn(this)}enqueue(e){if(!Gn(this))throw ti("enqueue");if(!ai(this))throw new TypeError("The stream is not in a state that permits enqueue");return Zn(this,e)}error(e){if(!Gn(this))throw ti("error");Jn(this,e)}[V](e){ke(this);const a=this._cancelAlgorithm(e);return Hn(this),a}[F](e){const a=this._controlledReadableStream;if(this._queue.length>0){const n=Se(this);this._closeRequested&&0===this._queue.length?(Hn(this),ki(a)):Kn(this),e._chunkSteps(n)}else ae(a,e),Kn(this)}}function Gn(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")&&e instanceof Qn}function Kn(e){Wn(e)&&(e._pulling?e._pullAgain=!0:(e._pulling=!0,f(e._pullAlgorithm(),(()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Kn(e))}),(a=>{Jn(e,a)}))))}function Wn(e){const a=e._controlledReadableStream;return!!ai(e)&&!!e._started&&(!!(Ei(a)&&ie(a)>0)||Xn(e)>0)}function Hn(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Yn(e){if(!ai(e))return;const a=e._controlledReadableStream;e._closeRequested=!0,0===e._queue.length&&(Hn(e),ki(a))}function Zn(e,a){if(!ai(e))return;const n=e._controlledReadableStream;if(Ei(n)&&ie(n)>0)ne(n,a,!1);else{let n;try{n=e._strategySizeAlgorithm(a)}catch(a){throw Jn(e,a),a}try{Ee(e,a,n)}catch(a){throw Jn(e,a),a}}Kn(e)}function Jn(e,a){const n=e._controlledReadableStream;"readable"===n._state&&(ke(e),Hn(e),Oi(n,a))}function Xn(e){const a=e._controlledReadableStream._state;return"errored"===a?null:"closed"===a?0:e._strategyHWM-e._queueTotalSize}function ei(e){return!Wn(e)}function ai(e){const a=e._controlledReadableStream._state;return!e._closeRequested&&"readable"===a}function ni(e,a,n,i,t,o,r){a._controlledReadableStream=e,a._queue=void 0,a._queueTotalSize=void 0,ke(a),a._started=!1,a._closeRequested=!1,a._pullAgain=!1,a._pulling=!1,a._strategySizeAlgorithm=r,a._strategyHWM=o,a._pullAlgorithm=i,a._cancelAlgorithm=t,e._readableStreamController=a,f(d(n()),(()=>{a._started=!0,Kn(a)}),(e=>{Jn(a,e)}))}function ii(e,a,n,i){const t=Object.create(Qn.prototype);let o=()=>{},r=()=>d(void 0),s=()=>d(void 0);void 0!==a.start&&(o=()=>a.start(t)),void 0!==a.pull&&(r=()=>a.pull(t)),void 0!==a.cancel&&(s=e=>a.cancel(e)),ni(e,t,o,r,s,n,i)}function ti(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function oi(e,a){return Te(e._readableStreamController)?si(e):ri(e)}function ri(e,a){const n=ee(e);let i,t,o,r,s,c=!1,l=!1,u=!1,m=!1;const h=p((e=>{s=e}));function f(){return c?(l=!0,d(void 0)):(c=!0,se(n,{_chunkSteps:e=>{x((()=>{l=!1;const a=e,n=e;u||Zn(o._readableStreamController,a),m||Zn(r._readableStreamController,n),c=!1,l&&f()}))},_closeSteps:()=>{c=!1,u||Yn(o._readableStreamController),m||Yn(r._readableStreamController),u&&m||s(void 0)},_errorSteps:()=>{c=!1}}),d(void 0))}function g(a){if(u=!0,i=a,m){const a=ge([i,t]),n=Ci(e,a);s(n)}return h}function b(a){if(m=!0,t=a,u){const a=ge([i,t]),n=Ci(e,a);s(n)}return h}function y(){}return o=xi(y,f,g),r=xi(y,f,b),v(n._closedPromise,(e=>{Jn(o._readableStreamController,e),Jn(r._readableStreamController,e),u&&m||s(void 0)})),[o,r]}function si(e){let a,n,i,t,o,r=ee(e),s=!1,c=!1,l=!1,u=!1,m=!1;const h=p((e=>{o=e}));function f(e){v(e._closedPromise,(a=>{e===r&&(Ye(i._readableStreamController,a),Ye(t._readableStreamController,a),u&&m||o(void 0))}))}function g(){da(r)&&(O(r),r=ee(e),f(r)),se(r,{_chunkSteps:a=>{x((()=>{c=!1,l=!1;const n=a;let r=a;if(!u&&!m)try{r=_e(a)}catch(a){return Ye(i._readableStreamController,a),Ye(t._readableStreamController,a),void o(Ci(e,a))}u||He(i._readableStreamController,n),m||He(t._readableStreamController,r),s=!1,c?y():l&&w()}))},_closeSteps:()=>{s=!1,u||We(i._readableStreamController),m||We(t._readableStreamController),i._readableStreamController._pendingPullIntos.length>0&&Xe(i._readableStreamController,0),t._readableStreamController._pendingPullIntos.length>0&&Xe(t._readableStreamController,0),u&&m||o(void 0)},_errorSteps:()=>{s=!1}})}function b(a,n){re(r)&&(O(r),r=ra(e),f(r));const p=n?t:i,d=n?i:t;ma(r,a,{_chunkSteps:a=>{x((()=>{c=!1,l=!1;const i=n?m:u;if(n?u:m)i||ea(p._readableStreamController,a);else{let n;try{n=_e(a)}catch(a){return Ye(p._readableStreamController,a),Ye(d._readableStreamController,a),void o(Ci(e,a))}i||ea(p._readableStreamController,a),He(d._readableStreamController,n)}s=!1,c?y():l&&w()}))},_closeSteps:e=>{s=!1;const a=n?m:u,i=n?u:m;a||We(p._readableStreamController),i||We(d._readableStreamController),void 0!==e&&(a||ea(p._readableStreamController,e),!i&&d._readableStreamController._pendingPullIntos.length>0&&Xe(d._readableStreamController,0)),a&&i||o(void 0)},_errorSteps:()=>{s=!1}})}function y(){if(s)return c=!0,d(void 0);s=!0;const e=Ze(i._readableStreamController);return null===e?g():b(e._view,!1),d(void 0)}function w(){if(s)return l=!0,d(void 0);s=!0;const e=Ze(t._readableStreamController);return null===e?g():b(e._view,!0),d(void 0)}function _(i){if(u=!0,a=i,m){const i=ge([a,n]),t=Ci(e,i);o(t)}return h}function S(i){if(m=!0,n=i,u){const i=ge([a,n]),t=Ci(e,i);o(t)}return h}function E(){}return i=wi(E,y,_),t=wi(E,w,S),f(r),[i,t]}function ci(e,a){$(e,a);const n=e,i=null==n?void 0:n.autoAllocateChunkSize,t=null==n?void 0:n.cancel,o=null==n?void 0:n.pull,r=null==n?void 0:n.start,s=null==n?void 0:n.type;return{autoAllocateChunkSize:void 0===i?void 0:J(i,`${a} has member 'autoAllocateChunkSize' that`),cancel:void 0===t?void 0:li(t,n,`${a} has member 'cancel' that`),pull:void 0===o?void 0:ui(o,n,`${a} has member 'pull' that`),start:void 0===r?void 0:pi(r,n,`${a} has member 'start' that`),type:void 0===s?void 0:di(s,`${a} has member 'type' that`)}}function li(e,a,n){return M(e,n),n=>_(e,a,[n])}function ui(e,a,n){return M(e,n),n=>_(e,a,[n])}function pi(e,a,n){return M(e,n),n=>w(e,a,[n])}function di(e,a){if("bytes"!=(e=`${e}`))throw new TypeError(`${a} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function mi(e,a){$(e,a);const n=null==e?void 0:e.mode;return{mode:void 0===n?void 0:hi(n,`${a} has member 'mode' that`)}}function hi(e,a){if("byob"!=(e=`${e}`))throw new TypeError(`${a} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function fi(e,a){$(e,a);const n=null==e?void 0:e.preventCancel;return{preventCancel:Boolean(n)}}function gi(e,a){$(e,a);const n=null==e?void 0:e.preventAbort,i=null==e?void 0:e.preventCancel,t=null==e?void 0:e.preventClose,o=null==e?void 0:e.signal;return void 0!==o&&vi(o,`${a} has member 'signal' that`),{preventAbort:Boolean(n),preventCancel:Boolean(i),preventClose:Boolean(t),signal:o}}function vi(e,a){if(!Ca(e))throw new TypeError(`${a} is not an AbortSignal.`)}function bi(e,a){$(e,a);const n=null==e?void 0:e.readable;W(n,"readable","ReadableWritablePair"),X(n,`${a} has member 'readable' that`);const i=null==e?void 0:e.writable;return W(i,"writable","ReadableWritablePair"),Ea(i,`${a} has member 'writable' that`),{readable:n,writable:i}}Object.defineProperties(Qn.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof a.toStringTag&&Object.defineProperty(Qn.prototype,a.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});class yi{constructor(e={},a={}){void 0===e?e=null:G(e,"First parameter");const n=va(a,"Second parameter"),i=ci(e,"First parameter");if(_i(this),"bytes"===i.type){if(void 0!==n.size)throw new RangeError("The strategy for a byte stream cannot have a size function");na(this,i,fa(n,0))}else{const e=ga(n);ii(this,i,fa(n,1),e)}}get locked(){if(!Si(this))throw Ii("locked");return Ei(this)}cancel(e){return Si(this)?Ei(this)?m(new TypeError("Cannot cancel a stream that already has a reader")):Ci(this,e):m(Ii("cancel"))}getReader(e){if(!Si(this))throw Ii("getReader");return void 0===mi(e,"First parameter").mode?ee(this):ra(this)}pipeThrough(e,a={}){if(!Si(this))throw Ii("pipeThrough");K(e,1,"pipeThrough");const n=bi(e,"First parameter"),i=gi(a,"Second parameter");if(Ei(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(Ra(n.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return y(Mn(this,n.writable,i.preventClose,i.preventAbort,i.preventCancel,i.signal)),n.readable}pipeTo(e,a={}){if(!Si(this))return m(Ii("pipeTo"));if(void 0===e)return m("Parameter 1 is required in 'pipeTo'.");if(!Aa(e))return m(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let n;try{n=gi(a,"Second parameter")}catch(e){return m(e)}return Ei(this)?m(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):Ra(e)?m(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Mn(this,e,n.preventClose,n.preventAbort,n.preventCancel,n.signal)}tee(){if(!Si(this))throw Ii("tee");return ge(oi(this))}values(e){if(!Si(this))throw Ii("values");return de(this,fi(e,"First parameter").preventCancel)}}function xi(e,a,n,i=1,t=(()=>1)){const o=Object.create(yi.prototype);return _i(o),ni(o,Object.create(Qn.prototype),e,a,n,i,t),o}function wi(e,a,n){const i=Object.create(yi.prototype);return _i(i),aa(i,Object.create(Ie.prototype),e,a,n,0,void 0),i}function _i(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function Si(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")&&e instanceof yi}function Ei(e){return void 0!==e._reader}function Ci(e,a){if(e._disturbed=!0,"closed"===e._state)return d(void 0);if("errored"===e._state)return m(e._storedError);ki(e);const i=e._reader;return void 0!==i&&da(i)&&(i._readIntoRequests.forEach((e=>{e._closeSteps(void 0)})),i._readIntoRequests=new E),b(e._readableStreamController[V](a),n)}function ki(e){e._state="closed";const a=e._reader;void 0!==a&&(N(a),re(a)&&(a._readRequests.forEach((e=>{e._closeSteps()})),a._readRequests=new E))}function Oi(e,a){e._state="errored",e._storedError=a;const n=e._reader;void 0!==n&&(R(n,a),re(n)?(n._readRequests.forEach((e=>{e._errorSteps(a)})),n._readRequests=new E):(n._readIntoRequests.forEach((e=>{e._errorSteps(a)})),n._readIntoRequests=new E))}function Ii(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function Ti(e,a){$(e,a);const n=null==e?void 0:e.highWaterMark;return W(n,"highWaterMark","QueuingStrategyInit"),{highWaterMark:H(n)}}Object.defineProperties(yi.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),"symbol"==typeof a.toStringTag&&Object.defineProperty(yi.prototype,a.toStringTag,{value:"ReadableStream",configurable:!0}),"symbol"==typeof a.asyncIterator&&Object.defineProperty(yi.prototype,a.asyncIterator,{value:yi.prototype.values,writable:!0,configurable:!0});const ji=e=>e.byteLength;try{Object.defineProperty(ji,"name",{value:"size",configurable:!0})}catch(e){}class Pi{constructor(e){K(e,1,"ByteLengthQueuingStrategy"),e=Ti(e,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=e.highWaterMark}get highWaterMark(){if(!Ri(this))throw Ai("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Ri(this))throw Ai("size");return ji}}function Ai(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function Ri(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")&&e instanceof Pi}Object.defineProperties(Pi.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),"symbol"==typeof a.toStringTag&&Object.defineProperty(Pi.prototype,a.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});const Bi=()=>1;try{Object.defineProperty(Bi,"name",{value:"size",configurable:!0})}catch(e){}class Ni{constructor(e){K(e,1,"CountQueuingStrategy"),e=Ti(e,"First parameter"),this._countQueuingStrategyHighWaterMark=e.highWaterMark}get highWaterMark(){if(!Li(this))throw Di("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!Li(this))throw Di("size");return Bi}}function Di(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function Li(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")&&e instanceof Ni}function Vi(e,a){$(e,a);const n=null==e?void 0:e.flush,i=null==e?void 0:e.readableType,t=null==e?void 0:e.start,o=null==e?void 0:e.transform,r=null==e?void 0:e.writableType;return{flush:void 0===n?void 0:Fi(n,e,`${a} has member 'flush' that`),readableType:i,start:void 0===t?void 0:zi(t,e,`${a} has member 'start' that`),transform:void 0===o?void 0:qi(o,e,`${a} has member 'transform' that`),writableType:r}}function Fi(e,a,n){return M(e,n),n=>_(e,a,[n])}function zi(e,a,n){return M(e,n),n=>w(e,a,[n])}function qi(e,a,n){return M(e,n),(n,i)=>_(e,a,[n,i])}Object.defineProperties(Ni.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),"symbol"==typeof a.toStringTag&&Object.defineProperty(Ni.prototype,a.toStringTag,{value:"CountQueuingStrategy",configurable:!0});class Ui{constructor(e={},a={},n={}){void 0===e&&(e=null);const i=va(a,"Second parameter"),t=va(n,"Third parameter"),o=Vi(e,"First parameter");if(void 0!==o.readableType)throw new RangeError("Invalid readableType specified");if(void 0!==o.writableType)throw new RangeError("Invalid writableType specified");const r=fa(t,0),s=ga(t),c=fa(i,1),l=ga(i);let u;$i(this,p((e=>{u=e})),c,l,r,s),Zi(this,o),void 0!==o.start?u(o.start(this._transformStreamController)):u(void 0)}get readable(){if(!Mi(this))throw ct("readable");return this._readable}get writable(){if(!Mi(this))throw ct("writable");return this._writable}}function $i(e,a,n,i,t,o){function r(){return a}function s(a){return it(e,a)}function c(a){return tt(e,a)}function l(){return ot(e)}function u(){return rt(e)}function p(a){return Gi(e,a),d(void 0)}e._writable=ja(r,s,l,c,n,i),e._readable=xi(r,u,p,t,o),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,Ki(e,!0),e._transformStreamController=void 0}function Mi(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")&&e instanceof Ui}function Qi(e,a){Jn(e._readable._readableStreamController,a),Gi(e,a)}function Gi(e,a){Ji(e._transformStreamController),bn(e._writable._writableStreamController,a),e._backpressure&&Ki(e,!1)}function Ki(e,a){void 0!==e._backpressureChangePromise&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=p((a=>{e._backpressureChangePromise_resolve=a})),e._backpressure=a}Object.defineProperties(Ui.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),"symbol"==typeof a.toStringTag&&Object.defineProperty(Ui.prototype,a.toStringTag,{value:"TransformStream",configurable:!0});class Wi{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Hi(this))throw st("desiredSize");return Xn(this._controlledTransformStream._readable._readableStreamController)}enqueue(e){if(!Hi(this))throw st("enqueue");Xi(this,e)}error(e){if(!Hi(this))throw st("error");et(this,e)}terminate(){if(!Hi(this))throw st("terminate");nt(this)}}function Hi(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")&&e instanceof Wi}function Yi(e,a,n,i){a._controlledTransformStream=e,e._transformStreamController=a,a._transformAlgorithm=n,a._flushAlgorithm=i}function Zi(e,a){const n=Object.create(Wi.prototype);let i=e=>{try{return Xi(n,e),d(void 0)}catch(e){return m(e)}},t=()=>d(void 0);void 0!==a.transform&&(i=e=>a.transform(e,n)),void 0!==a.flush&&(t=()=>a.flush(n)),Yi(e,n,i,t)}function Ji(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function Xi(e,a){const n=e._controlledTransformStream,i=n._readable._readableStreamController;if(!ai(i))throw new TypeError("Readable side is not in a state that permits enqueue");try{Zn(i,a)}catch(e){throw Gi(n,e),n._readable._storedError}ei(i)!==n._backpressure&&Ki(n,!0)}function et(e,a){Qi(e._controlledTransformStream,a)}function at(e,a){return b(e._transformAlgorithm(a),void 0,(a=>{throw Qi(e._controlledTransformStream,a),a}))}function nt(e){const a=e._controlledTransformStream;Yn(a._readable._readableStreamController),Gi(a,new TypeError("TransformStream terminated"))}function it(e,a){const n=e._transformStreamController;return e._backpressure?b(e._backpressureChangePromise,(()=>{const i=e._writable;if("erroring"===i._state)throw i._storedError;return at(n,a)})):at(n,a)}function tt(e,a){return Qi(e,a),d(void 0)}function ot(e){const a=e._readable,n=e._transformStreamController,i=n._flushAlgorithm();return Ji(n),b(i,(()=>{if("errored"===a._state)throw a._storedError;Yn(a._readableStreamController)}),(n=>{throw Qi(e,n),a._storedError}))}function rt(e){return Ki(e,!1),e._backpressureChangePromise}function st(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function ct(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}Object.defineProperties(Wi.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof a.toStringTag&&Object.defineProperty(Wi.prototype,a.toStringTag,{value:"TransformStreamDefaultController",configurable:!0}),e.ByteLengthQueuingStrategy=Pi,e.CountQueuingStrategy=Ni,e.ReadableByteStreamController=Ie,e.ReadableStream=yi,e.ReadableStreamBYOBReader=pa,e.ReadableStreamBYOBRequest=Oe,e.ReadableStreamDefaultController=Qn,e.ReadableStreamDefaultReader=oe,e.TransformStream=Ui,e.TransformStreamDefaultController=Wi,e.WritableStream=Ia,e.WritableStreamDefaultController=cn,e.WritableStreamDefaultWriter=Ya,Object.defineProperty(e,"__esModule",{value:!0})}(Ni.exports);if(!globalThis.ReadableStream)try{const e=require("node:process"),{emitWarning:a}=e;try{e.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),e.emitWarning=a}catch(n){throw e.emitWarning=a,n}}catch(e){Object.assign(globalThis,Ni.exports)}try{const{Blob:e}=require("buffer");e&&!e.prototype.stream&&(e.prototype.stream=function(e){let a=0;const n=this;return new ReadableStream({type:"bytes",async pull(e){const i=n.slice(a,Math.min(n.size,a+65536)),t=await i.arrayBuffer();a+=t.byteLength,e.enqueue(new Uint8Array(t)),a===n.size&&e.close()}})})}catch(e){}
/*! fetch-blob. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */async function*Di(e,a=!0){for(const n of e)if("stream"in n)yield*n.stream();else if(ArrayBuffer.isView(n))if(a){let e=n.byteOffset;const a=n.byteOffset+n.byteLength;for(;e!==a;){const i=Math.min(a-e,65536),t=n.buffer.slice(e,e+i);e+=t.byteLength,yield new Uint8Array(t)}}else yield n;else{let e=0,a=n;for(;e!==a.size;){const n=a.slice(e,Math.min(a.size,e+65536)),i=await n.arrayBuffer();e+=i.byteLength,yield new Uint8Array(i)}}}const Li=class e{#e=[];#a="";#n=0;#i="transparent";constructor(a=[],n={}){if("object"!=typeof a||null===a)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if("function"!=typeof a[Symbol.iterator])throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if("object"!=typeof n&&"function"!=typeof n)throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");null===n&&(n={});const i=new TextEncoder;for(const n of a){let a;a=ArrayBuffer.isView(n)?new Uint8Array(n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)):n instanceof ArrayBuffer?new Uint8Array(n.slice(0)):n instanceof e?n:i.encode(`${n}`),this.#n+=ArrayBuffer.isView(a)?a.byteLength:a.size,this.#e.push(a)}this.#i=`${void 0===n.endings?"transparent":n.endings}`;const t=void 0===n.type?"":String(n.type);this.#a=/^[\x20-\x7E]*$/.test(t)?t:""}get size(){return this.#n}get type(){return this.#a}async text(){const e=new TextDecoder;let a="";for await(const n of Di(this.#e,!1))a+=e.decode(n,{stream:!0});return a+=e.decode(),a}async arrayBuffer(){const e=new Uint8Array(this.size);let a=0;for await(const n of Di(this.#e,!1))e.set(n,a),a+=n.length;return e.buffer}stream(){const e=Di(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(a){const n=await e.next();n.done?a.close():a.enqueue(n.value)},async cancel(){await e.return()}})}slice(a=0,n=this.size,i=""){const{size:t}=this;let o=a<0?Math.max(t+a,0):Math.min(a,t),r=n<0?Math.max(t+n,0):Math.min(n,t);const s=Math.max(r-o,0),c=this.#e,l=[];let u=0;for(const e of c){if(u>=s)break;const a=ArrayBuffer.isView(e)?e.byteLength:e.size;if(o&&a<=o)o-=a,r-=a;else{let n;ArrayBuffer.isView(e)?(n=e.subarray(o,Math.min(a,r)),u+=n.byteLength):(n=e.slice(o,Math.min(a,r)),u+=n.size),r-=a,l.push(n),o=0}}const p=new e([],{type:String(i).toLowerCase()});return p.#n=s,p.#e=l,p}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](e){return e&&"object"==typeof e&&"function"==typeof e.constructor&&("function"==typeof e.stream||"function"==typeof e.arrayBuffer)&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}};Object.defineProperties(Li.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});var Vi=Li;const Fi=class extends Vi{#t=0;#o="";constructor(e,a,n={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(e,n),null===n&&(n={});const i=void 0===n.lastModified?Date.now():Number(n.lastModified);Number.isNaN(i)||(this.#t=i),this.#o=String(a)}get name(){return this.#o}get lastModified(){return this.#t}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](e){return!!e&&e instanceof Vi&&/^(File)$/.test(e[Symbol.toStringTag])}};
/*! formdata-polyfill. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */
var{toStringTag:zi,iterator:qi,hasInstance:Ui}=Symbol,$i=Math.random,Mi="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),Qi=(e,a,n)=>(e+="",/^(Blob|File)$/.test(a&&a[zi])?[(n=void 0!==n?n+"":"File"==a[zi]?a.name:"blob",e),a.name!==n||"blob"==a[zi]?new Fi([a],n,a):a]:[e,a+""]),Gi=(e,a)=>(a?e:e.replace(/\r?\n|\r/g,"\r\n")).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),Ki=(e,a,n)=>{if(a.length<n)throw new TypeError(`Failed to execute '${e}' on 'FormData': ${n} arguments required, but only ${a.length} present.`)};const Wi=class{#r=[];constructor(...e){if(e.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[zi](){return"FormData"}[qi](){return this.entries()}static[Ui](e){return e&&"object"==typeof e&&"FormData"===e[zi]&&!Mi.some((a=>"function"!=typeof e[a]))}append(...e){Ki("append",arguments,2),this.#r.push(Qi(...e))}delete(e){Ki("delete",arguments,1),e+="",this.#r=this.#r.filter((([a])=>a!==e))}get(e){Ki("get",arguments,1),e+="";for(var a=this.#r,n=a.length,i=0;i<n;i++)if(a[i][0]===e)return a[i][1];return null}getAll(e,a){return Ki("getAll",arguments,1),a=[],e+="",this.#r.forEach((n=>n[0]===e&&a.push(n[1]))),a}has(e){return Ki("has",arguments,1),e+="",this.#r.some((a=>a[0]===e))}forEach(e,a){for(var[n,i]of(Ki("forEach",arguments,1),this))e.call(a,i,n,this)}set(...e){Ki("set",arguments,2);var a=[],n=!0;e=Qi(...e),this.#r.forEach((i=>{i[0]===e[0]?n&&(n=!a.push(e)):a.push(i)})),n&&a.push(e),this.#r=a}*entries(){yield*this.#r}*keys(){for(var[e]of this)yield e}*values(){for(var[,e]of this)yield e}};class Hi extends Error{constructor(e,a){super(e),Error.captureStackTrace(this,this.constructor),this.type=a}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}}class Yi extends Hi{constructor(e,a,n){super(e,a),n&&(this.code=this.errno=n.code,this.erroredSysCall=n.syscall)}}const Zi=Symbol.toStringTag,Ji=e=>"object"==typeof e&&"function"==typeof e.append&&"function"==typeof e.delete&&"function"==typeof e.get&&"function"==typeof e.getAll&&"function"==typeof e.has&&"function"==typeof e.set&&"function"==typeof e.sort&&"URLSearchParams"===e[Zi],Xi=e=>e&&"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&"function"==typeof e.constructor&&/^(Blob|File)$/.test(e[Zi]),et=h.promisify(j.default.pipeline),at=Symbol("Body internals");class nt{constructor(e,{size:a=0}={}){let n=null;null===e?e=null:Ji(e)?e=m.Buffer.from(e.toString()):Xi(e)||m.Buffer.isBuffer(e)||(h.types.isAnyArrayBuffer(e)?e=m.Buffer.from(e):ArrayBuffer.isView(e)?e=m.Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof j.default||(e instanceof Wi?(e=function(e,a=Vi){var n=`${$i()}${$i()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),i=[],t=`--${n}\r\nContent-Disposition: form-data; name="`;return e.forEach(((e,a)=>"string"==typeof e?i.push(t+Gi(a)+`"\r\n\r\n${e.replace(/\r(?!\n)|(?<!\r)\n/g,"\r\n")}\r\n`):i.push(t+Gi(a)+`"; filename="${Gi(e.name,1)}"\r\nContent-Type: ${e.type||"application/octet-stream"}\r\n\r\n`,e,"\r\n"))),i.push(`--${n}--`),new a(i,{type:"multipart/form-data; boundary="+n})}(e),n=e.type.split("=")[1]):e=m.Buffer.from(String(e))));let i=e;m.Buffer.isBuffer(e)?i=j.default.Readable.from(e):Xi(e)&&(i=j.default.Readable.from(e.stream())),this[at]={body:e,stream:i,boundary:n,disturbed:!1,error:null},this.size=a,e instanceof j.default&&e.on("error",(e=>{const a=e instanceof Hi?e:new Yi(`Invalid response body while trying to fetch ${this.url}: ${e.message}`,"system",e);this[at].error=a}))}get body(){return this[at].stream}get bodyUsed(){return this[at].disturbed}async arrayBuffer(){const{buffer:e,byteOffset:a,byteLength:n}=await it(this);return e.slice(a,a+n)}async formData(){const e=this.headers.get("content-type");if(e.startsWith("application/x-www-form-urlencoded")){const e=new Wi,a=new URLSearchParams(await this.text());for(const[n,i]of a)e.append(n,i);return e}const{toFormData:a}=await Promise.resolve().then((function(){return Kt}));return a(this.body,e)}async blob(){const e=this.headers&&this.headers.get("content-type")||this[at].body&&this[at].body.type||"",a=await this.arrayBuffer();return new Vi([a],{type:e})}async json(){const e=await this.text();return JSON.parse(e)}async text(){const e=await it(this);return(new TextDecoder).decode(e)}buffer(){return it(this)}}async function it(e){if(e[at].disturbed)throw new TypeError(`body used already for: ${e.url}`);if(e[at].disturbed=!0,e[at].error)throw e[at].error;const{body:a}=e;if(null===a)return m.Buffer.alloc(0);if(!(a instanceof j.default))return m.Buffer.alloc(0);const n=[];let i=0;try{for await(const t of a){if(e.size>0&&i+t.length>e.size){const n=new Yi(`content size at ${e.url} over limit: ${e.size}`,"max-size");throw a.destroy(n),n}i+=t.length,n.push(t)}}catch(a){throw a instanceof Hi?a:new Yi(`Invalid response body while trying to fetch ${e.url}: ${a.message}`,"system",a)}if(!0!==a.readableEnded&&!0!==a._readableState.ended)throw new Yi(`Premature close of server response while trying to fetch ${e.url}`);try{return n.every((e=>"string"==typeof e))?m.Buffer.from(n.join("")):m.Buffer.concat(n,i)}catch(a){throw new Yi(`Could not create Buffer from response body for ${e.url}: ${a.message}`,"system",a)}}nt.prototype.buffer=h.deprecate(nt.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer"),Object.defineProperties(nt.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:h.deprecate((()=>{}),"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});const tt=(e,a)=>{let n,i,{body:t}=e[at];if(e.bodyUsed)throw new Error("cannot clone body after it is used");return t instanceof j.default&&"function"!=typeof t.getBoundary&&(n=new d.PassThrough({highWaterMark:a}),i=new d.PassThrough({highWaterMark:a}),t.pipe(n),t.pipe(i),e[at].stream=n,t=i),t},ot=h.deprecate((e=>e.getBoundary()),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),rt=(e,a)=>null===e?null:"string"==typeof e?"text/plain;charset=UTF-8":Ji(e)?"application/x-www-form-urlencoded;charset=UTF-8":Xi(e)?e.type||null:m.Buffer.isBuffer(e)||h.types.isAnyArrayBuffer(e)||ArrayBuffer.isView(e)?null:e instanceof Wi?`multipart/form-data; boundary=${a[at].boundary}`:e&&"function"==typeof e.getBoundary?`multipart/form-data;boundary=${ot(e)}`:e instanceof j.default?null:"text/plain;charset=UTF-8",st="function"==typeof O.default.validateHeaderName?O.default.validateHeaderName:e=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e)){const a=new TypeError(`Header name must be a valid HTTP token [${e}]`);throw Object.defineProperty(a,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),a}},ct="function"==typeof O.default.validateHeaderValue?O.default.validateHeaderValue:(e,a)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(a)){const a=new TypeError(`Invalid character in header content ["${e}"]`);throw Object.defineProperty(a,"code",{value:"ERR_INVALID_CHAR"}),a}};class lt extends URLSearchParams{constructor(e){let a=[];if(e instanceof lt){const n=e.raw();for(const[e,i]of Object.entries(n))a.push(...i.map((a=>[e,a])))}else if(null==e);else{if("object"!=typeof e||h.types.isBoxedPrimitive(e))throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");{const n=e[Symbol.iterator];if(null==n)a.push(...Object.entries(e));else{if("function"!=typeof n)throw new TypeError("Header pairs must be iterable");a=[...e].map((e=>{if("object"!=typeof e||h.types.isBoxedPrimitive(e))throw new TypeError("Each header pair must be an iterable object");return[...e]})).map((e=>{if(2!==e.length)throw new TypeError("Each header pair must be a name/value tuple");return[...e]}))}}}return a=a.length>0?a.map((([e,a])=>(st(e),ct(e,String(a)),[String(e).toLowerCase(),String(a)]))):void 0,super(a),new Proxy(this,{get(e,a,n){switch(a){case"append":case"set":return(n,i)=>(st(n),ct(n,String(i)),URLSearchParams.prototype[a].call(e,String(n).toLowerCase(),String(i)));case"delete":case"has":case"getAll":return n=>(st(n),URLSearchParams.prototype[a].call(e,String(n).toLowerCase()));case"keys":return()=>(e.sort(),new Set(URLSearchParams.prototype.keys.call(e)).keys());default:return Reflect.get(e,a,n)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){const a=this.getAll(e);if(0===a.length)return null;let n=a.join(", ");return/^content-encoding$/i.test(e)&&(n=n.toLowerCase()),n}forEach(e,a){for(const n of this.keys())Reflect.apply(e,a,[this.get(n),n,this])}*values(){for(const e of this.keys())yield this.get(e)}*entries(){for(const e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce(((e,a)=>(e[a]=this.getAll(a),e)),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce(((e,a)=>{const n=this.getAll(a);return e[a]="host"===a?n[0]:n.length>1?n:n[0],e}),{})}}Object.defineProperties(lt.prototype,["get","entries","forEach","values"].reduce(((e,a)=>(e[a]={enumerable:!0},e)),{}));const ut=new Set([301,302,303,307,308]),pt=e=>ut.has(e),dt=Symbol("Response internals");class mt extends nt{constructor(e=null,a={}){super(e,a);const n=null!=a.status?a.status:200,i=new lt(a.headers);if(null!==e&&!i.has("Content-Type")){const a=rt(e,this);a&&i.append("Content-Type",a)}this[dt]={type:"default",url:a.url,status:n,statusText:a.statusText||"",headers:i,counter:a.counter,highWaterMark:a.highWaterMark}}get type(){return this[dt].type}get url(){return this[dt].url||""}get status(){return this[dt].status}get ok(){return this[dt].status>=200&&this[dt].status<300}get redirected(){return this[dt].counter>0}get statusText(){return this[dt].statusText}get headers(){return this[dt].headers}get highWaterMark(){return this[dt].highWaterMark}clone(){return new mt(tt(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(e,a=302){if(!pt(a))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new mt(null,{headers:{location:new URL(e).toString()},status:a})}static error(){const e=new mt(null,{status:0,statusText:""});return e[dt].type="error",e}static json(e,a={}){const n=JSON.stringify(e);if(void 0===n)throw new TypeError("data is not JSON serializable");const i=new lt(a&&a.headers);return i.has("content-type")||i.set("content-type","application/json"),new mt(n,{...a,headers:i})}get[Symbol.toStringTag](){return"Response"}}Object.defineProperties(mt.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});function ht(e,a=!1){return null==e?"no-referrer":(e=new URL(e),/^(about|blob|data):$/.test(e.protocol)?"no-referrer":(e.username="",e.password="",e.hash="",a&&(e.pathname="",e.search=""),e))}const ft=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]);function gt(e){return!!/^about:(blank|srcdoc)$/.test(e)||("data:"===e.protocol||(!!/^(blob|filesystem):$/.test(e.protocol)||function(e){if(/^(http|ws)s:$/.test(e.protocol))return!0;const a=e.host.replace(/(^\[)|(]$)/g,""),n=g.isIP(a);return!(4!==n||!/^127\./.test(a))||!(6!==n||!/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(a))||"localhost"!==e.host&&!e.host.endsWith(".localhost")&&"file:"===e.protocol}(e)))}const vt=Symbol("Request internals"),bt=e=>"object"==typeof e&&"object"==typeof e[vt],yt=h.deprecate((()=>{}),".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)");class xt extends nt{constructor(e,a={}){let n;if(bt(e)?n=new URL(e.url):(n=new URL(e),e={}),""!==n.username||""!==n.password)throw new TypeError(`${n} is an url with embedded credentials.`);let i=a.method||e.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(i)&&(i=i.toUpperCase()),!bt(a)&&"data"in a&&yt(),(null!=a.body||bt(e)&&null!==e.body)&&("GET"===i||"HEAD"===i))throw new TypeError("Request with GET/HEAD method cannot have body");const t=a.body?a.body:bt(e)&&null!==e.body?tt(e):null;super(t,{size:a.size||e.size||0});const o=new lt(a.headers||e.headers||{});if(null!==t&&!o.has("Content-Type")){const e=rt(t,this);e&&o.set("Content-Type",e)}let r=bt(e)?e.signal:null;if("signal"in a&&(r=a.signal),null!=r&&("object"!=typeof(s=r)||"AbortSignal"!==s[Zi]&&"EventTarget"!==s[Zi]))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");var s;let c=null==a.referrer?e.referrer:a.referrer;if(""===c)c="no-referrer";else if(c){const e=new URL(c);c=/^about:(\/\/)?client$/.test(e)?"client":e}else c=void 0;this[vt]={method:i,redirect:a.redirect||e.redirect||"follow",headers:o,parsedURL:n,signal:r,referrer:c},this.follow=void 0===a.follow?void 0===e.follow?20:e.follow:a.follow,this.compress=void 0===a.compress?void 0===e.compress||e.compress:a.compress,this.counter=a.counter||e.counter||0,this.agent=a.agent||e.agent,this.highWaterMark=a.highWaterMark||e.highWaterMark||16384,this.insecureHTTPParser=a.insecureHTTPParser||e.insecureHTTPParser||!1,this.referrerPolicy=a.referrerPolicy||e.referrerPolicy||""}get method(){return this[vt].method}get url(){return f.format(this[vt].parsedURL)}get headers(){return this[vt].headers}get redirect(){return this[vt].redirect}get signal(){return this[vt].signal}get referrer(){return"no-referrer"===this[vt].referrer?"":"client"===this[vt].referrer?"about:client":this[vt].referrer?this[vt].referrer.toString():void 0}get referrerPolicy(){return this[vt].referrerPolicy}set referrerPolicy(e){this[vt].referrerPolicy=function(e){if(!ft.has(e))throw new TypeError(`Invalid referrerPolicy: ${e}`);return e}(e)}clone(){return new xt(this)}get[Symbol.toStringTag](){return"Request"}}Object.defineProperties(xt.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});const wt=e=>{const{parsedURL:a}=e[vt],n=new lt(e[vt].headers);n.has("Accept")||n.set("Accept","*/*");let i=null;if(null===e.body&&/^(post|put)$/i.test(e.method)&&(i="0"),null!==e.body){const a=(e=>{const{body:a}=e[at];return null===a?0:Xi(a)?a.size:m.Buffer.isBuffer(a)?a.length:a&&"function"==typeof a.getLengthSync&&a.hasKnownLength&&a.hasKnownLength()?a.getLengthSync():null})(e);"number"!=typeof a||Number.isNaN(a)||(i=String(a))}i&&n.set("Content-Length",i),""===e.referrerPolicy&&(e.referrerPolicy="strict-origin-when-cross-origin"),e.referrer&&"no-referrer"!==e.referrer?e[vt].referrer=function(e,{referrerURLCallback:a,referrerOriginCallback:n}={}){if("no-referrer"===e.referrer||""===e.referrerPolicy)return null;const i=e.referrerPolicy;if("about:client"===e.referrer)return"no-referrer";const t=e.referrer;let o=ht(t),r=ht(t,!0);o.toString().length>4096&&(o=r),a&&(o=a(o)),n&&(r=n(r));const s=new URL(e.url);switch(i){case"no-referrer":return"no-referrer";case"origin":return r;case"unsafe-url":return o;case"strict-origin":return gt(o)&&!gt(s)?"no-referrer":r.toString();case"strict-origin-when-cross-origin":return o.origin===s.origin?o:gt(o)&&!gt(s)?"no-referrer":r;case"same-origin":return o.origin===s.origin?o:"no-referrer";case"origin-when-cross-origin":return o.origin===s.origin?o:r;case"no-referrer-when-downgrade":return gt(o)&&!gt(s)?"no-referrer":o;default:throw new TypeError(`Invalid referrerPolicy: ${i}`)}}(e):e[vt].referrer="no-referrer",e[vt].referrer instanceof URL&&n.set("Referer",e.referrer),n.has("User-Agent")||n.set("User-Agent","node-fetch"),e.compress&&!n.has("Accept-Encoding")&&n.set("Accept-Encoding","gzip, deflate, br");let{agent:t}=e;"function"==typeof t&&(t=t(a));const o=(e=>{if(e.search)return e.search;const a=e.href.length-1,n=e.hash||("#"===e.href[a]?"#":"");return"?"===e.href[a-n.length]?"?":""})(a);return{parsedURL:a,options:{path:a.pathname+o,method:e.method,headers:n[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:e.insecureHTTPParser,agent:t}}};class _t extends Hi{constructor(e,a="aborted"){super(e,a)}}
/*! node-domexception. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */if(!globalThis.DOMException)try{const{MessageChannel:e}=require("worker_threads"),a=(new e).port1,n=new ArrayBuffer;a.postMessage(n,[n,n])}catch(e){"DOMException"===e.constructor.name&&(globalThis.DOMException=e.constructor)}const St=new Set(["data:","http:","https:"]);async function Et(e,a){return new Promise(((n,i)=>{const t=new xt(e,a),{parsedURL:o,options:r}=wt(t);if(!St.has(o.protocol))throw new TypeError(`node-fetch cannot load ${e}. URL scheme "${o.protocol.replace(/:$/,"")}" is not supported.`);if("data:"===o.protocol){const e=function(e){if(!/^data:/i.test(e))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');const a=(e=e.replace(/\r?\n/g,"")).indexOf(",");if(-1===a||a<=4)throw new TypeError("malformed data: URI");const n=e.substring(5,a).split(";");let i="",t=!1;const o=n[0]||"text/plain";let r=o;for(let e=1;e<n.length;e++)"base64"===n[e]?t=!0:n[e]&&(r+=`;${n[e]}`,0===n[e].indexOf("charset=")&&(i=n[e].substring(8)));n[0]||i.length||(r+=";charset=US-ASCII",i="US-ASCII");const s=t?"base64":"ascii",c=unescape(e.substring(a+1)),l=Buffer.from(c,s);return l.type=o,l.typeFull=r,l.charset=i,l}(t.url),a=new mt(e,{headers:{"Content-Type":e.typeFull}});return void n(a)}const s=("https:"===o.protocol?I.default:O.default).request,{signal:c}=t;let l=null;const u=()=>{const e=new _t("The operation was aborted.");i(e),t.body&&t.body instanceof j.default.Readable&&t.body.destroy(e),l&&l.body&&l.body.emit("error",e)};if(c&&c.aborted)return void u();const p=()=>{u(),f()},h=s(o.toString(),r);c&&c.addEventListener("abort",p);const f=()=>{h.abort(),c&&c.removeEventListener("abort",p)};h.on("error",(e=>{i(new Yi(`request to ${t.url} failed, reason: ${e.message}`,"system",e)),f()})),function(e,a){const n=m.Buffer.from("0\r\n\r\n");let i,t=!1,o=!1;e.on("response",(e=>{const{headers:a}=e;t="chunked"===a["transfer-encoding"]&&!a["content-length"]})),e.on("socket",(r=>{const s=()=>{if(t&&!o){const e=new Error("Premature close");e.code="ERR_STREAM_PREMATURE_CLOSE",a(e)}},c=e=>{o=0===m.Buffer.compare(e.slice(-5),n),!o&&i&&(o=0===m.Buffer.compare(i.slice(-3),n.slice(0,3))&&0===m.Buffer.compare(e.slice(-2),n.slice(3))),i=e};r.prependListener("close",s),r.on("data",c),e.on("close",(()=>{r.removeListener("close",s),r.removeListener("data",c)}))}))}(h,(e=>{l&&l.body&&l.body.destroy(e)})),process.version<"v14"&&h.on("socket",(e=>{let a;e.prependListener("end",(()=>{a=e._eventsCount})),e.prependListener("close",(n=>{if(l&&a<e._eventsCount&&!n){const e=new Error("Premature close");e.code="ERR_STREAM_PREMATURE_CLOSE",l.body.emit("error",e)}}))})),h.on("response",(e=>{h.setTimeout(0);const o=function(e=[]){return new lt(e.reduce(((e,a,n,i)=>(n%2==0&&e.push(i.slice(n,n+2)),e)),[]).filter((([e,a])=>{try{return st(e),ct(e,String(a)),!0}catch{return!1}})))}(e.rawHeaders);if(pt(e.statusCode)){const s=o.get("Location");let c=null;try{c=null===s?null:new URL(s,t.url)}catch{if("manual"!==t.redirect)return i(new Yi(`uri requested responds with an invalid redirect URL: ${s}`,"invalid-redirect")),void f()}switch(t.redirect){case"error":return i(new Yi(`uri requested responds with a redirect, redirect mode is set to error: ${t.url}`,"no-redirect")),void f();case"manual":break;case"follow":{if(null===c)break;if(t.counter>=t.follow)return i(new Yi(`maximum redirect reached at: ${t.url}`,"max-redirect")),void f();const s={headers:new lt(t.headers),follow:t.follow,counter:t.counter+1,agent:t.agent,compress:t.compress,method:t.method,body:tt(t),signal:t.signal,size:t.size,referrer:t.referrer,referrerPolicy:t.referrerPolicy};if(!((e,a)=>{const n=new URL(a).hostname,i=new URL(e).hostname;return n===i||n.endsWith(`.${i}`)})(t.url,c)||(r=t.url,new URL(c).protocol!==new URL(r).protocol))for(const e of["authorization","www-authenticate","cookie","cookie2"])s.headers.delete(e);if(303!==e.statusCode&&t.body&&a.body instanceof j.default.Readable)return i(new Yi("Cannot follow redirect with body being a readable stream","unsupported-redirect")),void f();303!==e.statusCode&&(301!==e.statusCode&&302!==e.statusCode||"POST"!==t.method)||(s.method="GET",s.body=void 0,s.headers.delete("content-length"));const l=function(e){const a=(e.get("referrer-policy")||"").split(/[,\s]+/);let n="";for(const e of a)e&&ft.has(e)&&(n=e);return n}(o);return l&&(s.referrerPolicy=l),n(Et(new xt(c,s))),void f()}default:return i(new TypeError(`Redirect option '${t.redirect}' is not a valid value of RequestRedirect`))}}var r;c&&e.once("end",(()=>{c.removeEventListener("abort",p)}));let s=d.pipeline(e,new d.PassThrough,(e=>{e&&i(e)}));process.version<"v12.10"&&e.on("aborted",p);const u={url:t.url,status:e.statusCode,statusText:e.statusMessage,headers:o,size:t.size,counter:t.counter,highWaterMark:t.highWaterMark},m=o.get("Content-Encoding");if(!t.compress||"HEAD"===t.method||null===m||204===e.statusCode||304===e.statusCode)return l=new mt(s,u),void n(l);const g={flush:T.default.Z_SYNC_FLUSH,finishFlush:T.default.Z_SYNC_FLUSH};if("gzip"===m||"x-gzip"===m)return s=d.pipeline(s,T.default.createGunzip(g),(e=>{e&&i(e)})),l=new mt(s,u),void n(l);if("deflate"===m||"x-deflate"===m){const a=d.pipeline(e,new d.PassThrough,(e=>{e&&i(e)}));return a.once("data",(e=>{s=8==(15&e[0])?d.pipeline(s,T.default.createInflate(),(e=>{e&&i(e)})):d.pipeline(s,T.default.createInflateRaw(),(e=>{e&&i(e)})),l=new mt(s,u),n(l)})),void a.once("end",(()=>{l||(l=new mt(s,u),n(l))}))}if("br"===m)return s=d.pipeline(s,T.default.createBrotliDecompress(),(e=>{e&&i(e)})),l=new mt(s,u),void n(l);l=new mt(s,u),n(l)})),(async(e,{body:a})=>{null===a?e.end():await et(a,e)})(h,t).catch(i)}))}class Ct{constructor({client_id:e,client_secret:a,redirect_uri:n,authorization:i,base_url:t,place_order_config:o,username:r,password:s}){this.generateSignature=async(e,a,n)=>{try{var i=a,t=(n+"").toUpperCase(),o=e,r=this.client_secret;let s=e=>{if(e instanceof Array)var a=[],n=Object.keys(e);else a={},n=Object.keys(e);for(var i in n.sort((function(e,a){return e<a?-1:e>a?1:0})),n){var t=n[i];"object"==typeof e[t]?(e[t]instanceof Array&&(a[t]=s(e[t])),a[t]=s(e[t])):a[t]=e[t]}return a},c=()=>{var e=o.split("?"),a=e[0],n=e[1].split("&");return o=a+"?"+n.sort().join("&"),u(o)},l=()=>{var e=[];return e.push(t.toUpperCase()),o.indexOf("?")>=0?e.push(c()):e.push(u(o)),i&&Object.keys(i).length&&e.push(u(JSON.stringify(s(i)))),e.join("&")},u=e=>encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}));return Bi(l(),r).toString()}catch(e){await(new xi).jsonError({exception:e,error:"QC generateSignature Error"})}},this.getAuthCode=async(e,a)=>{try{const e=await hi.post(this.base_url+"/oauth2/verify",{clientId:this.client_id,username:this.username,password:this.password}),{authorizationCode:a}=e.data;return _i.qc_amazon.AUTH_CODE=a,_i.qc_amazon.AUTH_CODE_LAST_UPDATED=(new Date).getTime(),{code:a}}catch(n){return await(new xi).jsonError({exception:n,error:"QC getAuthCode Error"},e,a),{codeException:!0}}},this.getOAuthToken=async(e,a,n)=>{try{const a=await hi.post(this.base_url+"/oauth2/token",{clientId:this.client_id,clientSecret:this.client_secret,authorizationCode:e}),{token:n}=a.data;return _i.qc_amazon.OAUTH_CODE=n,_i.qc_amazon.OAUTH_CODE_LAST_UPDATED=(new Date).getTime(),{access_token:n}}catch(e){return await(new xi).jsonError({exception:e,error:"QC getOAuthToken Error"},a,n),{oAuthException:!0}}},this.getOrderStatus=async(e,a,n)=>{try{const i=this.base_url+`/rest/v3/order/${e}/status`,t={connection:"close","content-type":"application/json",dateatclient:(new Date).toISOString()+"",signature:await this.generateSignature(i,null,"GET"),"accept-encoding":"gzip, deflate, br",Authorization:i.includes("zeus")?"":`Bearer ${a}`};i.includes("zeus")&&(t["sp-qc-auth"]=`Bearer ${a}`);const o=await Et(i,{headers:t,method:"GET"}),r=await o.json();return await(new xi).log(`get Order Status${o}`,!1,e,n),{response:r}}catch(a){return await(new xi).jsonError({exception:a,error:"QC getOrderStatus Error"},e,n),{oAuthException:!0}}},this.placeVouchersOrder=async({qty:e,vendorSku:a,access_token:n,referenceId:i,price:t,currencyISOCode:o,syncOnly:r,vendor_code:s})=>{try{const c={address:{firstname:this.place_order_config.firstname,lastname:this.place_order_config.lastname,email:this.place_order_config.email,telephone:this.place_order_config.telephone,line1:this.place_order_config.line1,line2:this.place_order_config.line2,city:this.place_order_config.city,region:this.place_order_config.region,country:this.place_order_config.country,postcode:this.place_order_config.postcode,company:this.place_order_config.company,billToThis:!0},payments:[{code:"svc",amount:t*e}],refno:i,syncOnly:r,deliveryMode:"API",products:[{sku:a,price:t,qty:e,currency:o,theme:""}]};await(new xi).log(`QC-AMAZON Body:${JSON.stringify(c)}`,null,i,s),await(new xi).log(`QC-AMAZON access_token:${n}`,null,i,s);const l=this.base_url+"/rest/v3/orders",u={connection:"close","content-type":"application/json",dateatclient:(new Date).toISOString()+"",signature:await this.generateSignature(l,c,"POST"),"accept-encoding":"gzip, deflate, br",Authorization:l.includes("zeus")?"":`Bearer ${n}`};l.includes("zeus")&&(u["sp-qc-auth"]=`Bearer ${n}`);const p=await Et(l,{headers:u,body:JSON.stringify(c),method:"POST"}),d=await p.json();let{status:m,message:h,cards:f,orderId:g,code:v}=d,b=null,y=null,x="COMPLETE"==m||"PROCESSING"==m;try{b=f.map((e=>({cardnumber:e.cardNumber,pin_or_url:e.cardPin,expiry:e.validity})))}catch(e){x=!1}try{y=d.payments[0].balance}catch(e){await(new xi).jsonError({exception:e,error:"Wallet balance retrieval Error"},i,s)}return{vouchers:b,success:x,message:h,orderId:g,status:m,statusCode:v,walletBalance:y}}catch(e){return await(new xi).jsonError({exception:e,error:"QC placeVouchersOrder Error"},i,s),{orderException:!0}}},this.client_id=e,this.client_secret=a,this.redirect_uri=n,this.authorization=i,this.base_url=t,this.place_order_config=o,this.username=r,this.password=s}async getOlderOrderDetails(e,a,n,i){try{const n=this.base_url+`/rest/v3/order/${e}/cards/?limit=400`,i={connection:"close","content-type":"application/json",dateatclient:(new Date).toISOString()+"",signature:await this.generateSignature(n,null,"GET"),"accept-encoding":"gzip, deflate, br",Authorization:n.includes("zeus")?"":`Bearer ${a}`};n.includes("zeus")&&(i["sp-qc-auth"]=`Bearer ${a}`);const t=await Et(n,{headers:i,method:"GET"}),o=await t.json();let{cards:r}=o,s=!1,c=null;try{c=r.map((e=>({cardnumber:e.cardNumber,pin_or_url:e.cardPin,expiry:e.validity}))),s=!0}catch(e){s=!1}return{vouchers:c,success:s,message:""}}catch(e){return await(new xi).jsonError({exception:e,error:"QC getOlderOrderDetails Error"},n,i),{oldOrderException:!0,vendorCode:i}}}async getCategory(e){try{const a=this.base_url+"/rest/v3/catalog/categories",n={connection:"close","content-type":"application/json",dateatclient:(new Date).toISOString()+"",signature:await this.generateSignature(a,null,"GET"),"accept-encoding":"gzip, deflate, br",Authorization:a.includes("zeus")?"":`Bearer ${e}`};a.includes("zeus")&&(n["sp-qc-auth"]=`Bearer ${e}`);const i=await Et(a,{headers:n,method:"GET"}),t=await i.json();return{categoryId:t.id}}catch(e){return await(new xi).jsonError({exception:e,error:"QC getCategory Error"}),null}}async getProducts(e,a){try{await(new xi).log(`categoryId ${e}`,!1,null,null);const n=this.base_url+`/rest/v3/catalog/categories/${e}/products`,i={connection:"close","content-type":"application/json",dateatclient:(new Date).toISOString()+"",signature:await this.generateSignature(n,null,"GET"),"accept-encoding":"gzip, deflate, br",Authorization:n.includes("zeus")?"":`Bearer ${a}`};n.includes("zeus")&&(i["sp-qc-auth"]=`Bearer ${a}`);const t=await Et(n,{headers:i,method:"GET"}),o=(await t.json()).products;return await(new xi).log(`productList ${o}`,!1,null,null),{productList:o}}catch(e){return await(new xi).jsonError({exception:e,error:"QC getCategory Error"},null,null),null}}}var kt={AED:{name:"United Arab Emirates Dirham",demonym:"UAE",majorSingle:"Dirham",majorPlural:"Dirhams",ISOnum:784,symbol:"د.إ.",symbolNative:"د.إ.",minorSingle:"Fils",minorPlural:"Fils",ISOdigits:2,decimals:2,numToBasic:100},AFN:{name:"Afghan Afghani",demonym:"Afghan",majorSingle:"Afghani",majorPlural:"Afghani",ISOnum:971,symbol:"Af",symbolNative:"؋",minorSingle:"Pul",minorPlural:"Pul",ISOdigits:2,decimals:2,numToBasic:100},ALL:{name:"Albanian Lek",demonym:"Albanian",majorSingle:"Lek",majorPlural:"Lekë",ISOnum:8,symbol:"L",symbolNative:"L",minorSingle:"Qindarka",minorPlural:"Qindarka",ISOdigits:2,decimals:2,numToBasic:100},AMD:{name:"Armenian Dram",demonym:"Armenian",majorSingle:"Dram",majorPlural:"Dram",ISOnum:51,symbol:"֏",symbolNative:"դր",minorSingle:"Luma",minorPlural:"Luma",ISOdigits:2,decimals:2,numToBasic:100},ANG:{name:"Netherlands Antillean Guilder",demonym:"Netherlands Antillean",majorSingle:"Guilder",majorPlural:"Guilders",ISOnum:532,symbol:"ƒ",symbolNative:"ƒ",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},AOA:{name:"Angolan Kwanza",demonym:"Angolan",majorSingle:"Kwanza",majorPlural:"Kwanza",ISOnum:973,symbol:"Kz",symbolNative:"Kz",minorSingle:"Centimo",minorPlural:"Centimos",ISOdigits:2,decimals:2,numToBasic:100},ARS:{name:"Argentine Peso",demonym:"Argentine",majorSingle:"Peso",majorPlural:"Pesos",ISOnum:32,symbol:"AR$",symbolNative:"$",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},AUD:{name:"Australian Dollar",demonym:"Australian",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:36,symbol:"AU$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},AWG:{name:"Aruban Florin",demonym:"Aruban",majorSingle:"Florin",majorPlural:"Florin",ISOnum:533,symbol:"ƒ",symbolNative:"ƒ",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},AZN:{name:"Azerbaijani Manat",demonym:"Azerbaijani",majorSingle:"Manat",majorPlural:"Manat",ISOnum:944,symbol:"ман",symbolNative:"₼",minorSingle:"Qapik",minorPlural:"Qapik",ISOdigits:2,decimals:2,numToBasic:100},BAM:{name:"Bosnia and Herzegovina Convertible Mark",demonym:"Bosnia-Herzegovina",majorSingle:"Convertible Mark",majorPlural:"Marks",ISOnum:977,symbol:"KM",symbolNative:"КМ",minorSingle:"Fening",minorPlural:"Fening",ISOdigits:2,decimals:2,numToBasic:100},BBD:{name:"Barbadian Dollar",demonym:"Barbadian",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:52,symbol:"BBD$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},BDT:{name:"Bangladeshi Taka",demonym:"Bangladeshi",majorSingle:"Taka",majorPlural:"Taka",ISOnum:50,symbol:"৳",symbolNative:"৳",minorSingle:"Poisha",minorPlural:"Poisha",ISOdigits:2,decimals:2,numToBasic:100},BGN:{name:"Bulgarian Lev",demonym:"Bulgarian",majorSingle:"Lev",majorPlural:"Leva",ISOnum:975,symbol:"лв.",symbolNative:"лв.",minorSingle:"Stotinka",minorPlural:"Stotinki",ISOdigits:2,decimals:2,numToBasic:100},BHD:{name:"Bahraini Dinar",demonym:"Bahraini",majorSingle:"Dinar",majorPlural:"Dinars",ISOnum:48,symbol:"BD",symbolNative:"د.ب.",minorSingle:"Fils",minorPlural:"Fils",ISOdigits:3,decimals:3,numToBasic:1e3},BIF:{name:"Burundian Franc",demonym:"Burundian",majorSingle:"Franc",majorPlural:"Francs",ISOnum:108,symbol:"FBu",symbolNative:"FBu",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:0,decimals:2,numToBasic:100},BMD:{name:"Bermudian Dollar",demonym:"Bermudian",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:60,symbol:"$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},BND:{name:"Brunei Dollar",demonym:"Brunei",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:96,symbol:"B$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},BOB:{name:"Bolivian Boliviano",demonym:"Bolivian",majorSingle:"Boliviano",majorPlural:"Bolivianos",ISOnum:68,symbol:"Bs.",symbolNative:"Bs.",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},BRL:{name:"Brazilian Real",demonym:"Brazilian",majorSingle:"Real",majorPlural:"Reais",ISOnum:986,symbol:"R$",symbolNative:"R$",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},BSD:{name:"Bahamian Dollar",demonym:"Bahamian",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:44,symbol:"$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},BTN:{name:"Bhutanese Ngultrum",demonym:"Bhutanese",majorSingle:"Ngultrum",majorPlural:"Ngultrums",ISOnum:64,symbol:"Nu.",symbolNative:"Nu.",minorSingle:"Chetrum",minorPlural:"Chetrums",ISOdigits:2,decimals:2,numToBasic:100},BWP:{name:"Botswana Pula",demonym:"Botswana",majorSingle:"Pula",majorPlural:"Pula",ISOnum:72,symbol:"P",symbolNative:"P",minorSingle:"Thebe",minorPlural:"Thebe",ISOdigits:2,decimals:2,numToBasic:100},BYN:{name:"Belarusian Ruble",demonym:"Belarusian",majorSingle:"Ruble",majorPlural:"Rubles",ISOnum:933,symbol:"Br",symbolNative:"руб.",minorSingle:"Kapiejka",minorPlural:"Kapiejka",ISOdigits:2,decimals:2,numToBasic:100},BZD:{name:"Belize Dollar",demonym:"Belize",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:84,symbol:"BZ$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},CAD:{name:"Canadian Dollar",demonym:"Canadian",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:124,symbol:"CA$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},CDF:{name:"Congolese Franc",demonym:"Congolese",majorSingle:"Franc",majorPlural:"Francs",ISOnum:976,symbol:"FC",symbolNative:"₣",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:2,decimals:2,numToBasic:100},CHF:{name:"Swiss Franc",demonym:"Swiss",majorSingle:"Franc",majorPlural:"Francs",ISOnum:756,symbol:"Fr.",symbolNative:"₣",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:2,decimals:2,numToBasic:100},CKD:{name:"Cook Islands Dollar",demonym:"Cook Islands",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:null,symbol:"$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},CLP:{name:"Chilean Peso",demonym:"Chilean",majorSingle:"Peso",majorPlural:"Pesos",ISOnum:152,symbol:"CL$",symbolNative:"$",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:0,decimals:0,numToBasic:100},CNY:{name:"Chinese Yuan",demonym:"Chinese",majorSingle:"Yuan",majorPlural:"Yuan",ISOnum:156,symbol:"CN¥",symbolNative:"¥元",minorSingle:"Fen",minorPlural:"Fen",ISOdigits:2,decimals:2,numToBasic:100},COP:{name:"Colombian Peso",demonym:"Colombian",majorSingle:"Peso",majorPlural:"Pesos",ISOnum:170,symbol:"CO$",symbolNative:"$",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},CRC:{name:"Costa Rican Colon",demonym:"Costa Rican",majorSingle:"Colón",majorPlural:"Colones",ISOnum:188,symbol:"₡",symbolNative:"₡",minorSingle:"Centimo",minorPlural:"Centimos",ISOdigits:2,decimals:2,numToBasic:100},CUC:{name:"Cuban convertible Peso",demonym:"Cuban Convertible",majorSingle:"Peso",majorPlural:"Pesos",ISOnum:931,symbol:"CUC$",symbolNative:"$",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},CUP:{name:"Cuban Peso",demonym:"Cuban",majorSingle:"Peso",majorPlural:"Pesos",ISOnum:192,symbol:"$MN",symbolNative:"₱",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},CVE:{name:"Cabo Verdean Escudo",demonym:"Cabo Verdean",majorSingle:"Escudo",majorPlural:"Escudo",ISOnum:132,symbol:"CV$",symbolNative:"$",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},CZK:{name:"Czech Koruna",demonym:"Czech",majorSingle:"Koruna",majorPlural:"Koruny",ISOnum:203,symbol:"Kč",symbolNative:"Kč",minorSingle:"Haléř",minorPlural:"Haléř",ISOdigits:2,decimals:2,numToBasic:100},DJF:{name:"Djiboutian Franc",demonym:"Djiboutian",majorSingle:"Franc",majorPlural:"Francs",ISOnum:262,symbol:"Fdj",symbolNative:"ف.ج.",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:0,decimals:2,numToBasic:100},DKK:{name:"Danish Krone",demonym:"Danish",majorSingle:"Krone",majorPlural:"Kroner",ISOnum:208,symbol:"kr.",symbolNative:"kr.",minorSingle:"Øre",minorPlural:"Øre",ISOdigits:2,decimals:2,numToBasic:100},DOP:{name:"Dominican Peso",demonym:"Dominican",majorSingle:"Peso",majorPlural:"Pesos",ISOnum:214,symbol:"RD$",symbolNative:"$",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},DZD:{name:"Algerian Dinar",demonym:"Algerian",majorSingle:"Dinar",majorPlural:"Dinars",ISOnum:12,symbol:"DA",symbolNative:"د.ج.",minorSingle:"Santeem",minorPlural:"Santeems",ISOdigits:2,decimals:2,numToBasic:100},EGP:{name:"Egyptian Pound",demonym:"Egyptian",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:818,symbol:"E£",symbolNative:"ج.م.",minorSingle:"Qirsh",minorPlural:"Qirsh",ISOdigits:2,decimals:2,numToBasic:100},EHP:{name:"Sahrawi Peseta",demonym:"Sahrawi",majorSingle:"Peseta",majorPlural:"Pesetas",ISOnum:null,symbol:"Ptas.",symbolNative:"Ptas.",minorSingle:"Céntimo",minorPlural:"Céntimos",ISOdigits:2,decimals:2,numToBasic:100},ERN:{name:"Eritrean Nakfa",demonym:"Eritrean",majorSingle:"Nakfa",majorPlural:"Nakfa",ISOnum:232,symbol:"Nkf",symbolNative:"ناكفا",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},ETB:{name:"Ethiopian Birr",demonym:"Ethiopian",majorSingle:"Birr",majorPlural:"Birr",ISOnum:230,symbol:"Br",symbolNative:"ብር",minorSingle:"Santim",minorPlural:"Santim",ISOdigits:2,decimals:2,numToBasic:100},EUR:{name:"Euro",demonym:"",majorSingle:"Euro",majorPlural:"Euros",ISOnum:978,symbol:"€",symbolNative:"€",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},FJD:{name:"Fijian Dollar",demonym:"Fijian",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:242,symbol:"FJ$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},FKP:{name:"Falkland Islands Pound",demonym:"Falkland Islands",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:238,symbol:"FK£",symbolNative:"£",minorSingle:"Penny",minorPlural:"Pence",ISOdigits:2,decimals:2,numToBasic:100},FOK:{name:"Faroese Króna",demonym:"Faroese",majorSingle:"Króna",majorPlural:"Krónas",ISOnum:null,symbol:"kr",symbolNative:"kr",minorSingle:"Oyra",minorPlural:"Oyra",ISOdigits:2,decimals:2,numToBasic:100},GBP:{name:"Pound Sterling",demonym:"Pound Sterling",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:826,symbol:"£",symbolNative:"£",minorSingle:"Penny",minorPlural:"Pence",ISOdigits:2,decimals:2,numToBasic:100},GEL:{name:"Georgian Lari",demonym:"Georgian",majorSingle:"Lari",majorPlural:"Lari",ISOnum:981,symbol:"₾",symbolNative:"₾",minorSingle:"Tetri",minorPlural:"Tetri",ISOdigits:2,decimals:2,numToBasic:100},GGP:{name:"Guernsey Pound",demonym:"Guernsey",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:null,symbol:"£",symbolNative:"£",minorSingle:"Penny",minorPlural:"Pence",ISOdigits:2,decimals:2,numToBasic:100},GHS:{name:"Ghanaian Cedi",demonym:"Ghanaian",majorSingle:"Cedi",majorPlural:"Cedis",ISOnum:936,symbol:"GH₵",symbolNative:"₵",minorSingle:"Pesewa",minorPlural:"Pesewas",ISOdigits:2,decimals:2,numToBasic:100},GIP:{name:"Gibraltar Pound",demonym:"Gibraltar",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:292,symbol:"£",symbolNative:"£",minorSingle:"Penny",minorPlural:"Pence",ISOdigits:2,decimals:2,numToBasic:100},GMD:{name:"Gambian Dalasi",demonym:"Gambian",majorSingle:"Dalasi",majorPlural:"Dalasis",ISOnum:270,symbol:"D",symbolNative:"D",minorSingle:"Butut",minorPlural:"Bututs",ISOdigits:2,decimals:2,numToBasic:100},GNF:{name:"Guinean Franc",demonym:"Guinean",majorSingle:"Franc",majorPlural:"Francs",ISOnum:324,symbol:"FG",symbolNative:"FG",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:0,decimals:2,numToBasic:100},GTQ:{name:"Guatemalan Quetzal",demonym:"Guatemalan",majorSingle:"Quetzal",majorPlural:"Quetzales",ISOnum:320,symbol:"Q",symbolNative:"$",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},GYD:{name:"Guyanese Dollar",demonym:"Guyanese",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:328,symbol:"G$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},HKD:{name:"Hong Kong Dollar",demonym:"Hong Kong",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:344,symbol:"HK$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},HNL:{name:"Honduran Lempira",demonym:"Honduran",majorSingle:"Lempira",majorPlural:"Lempiras",ISOnum:340,symbol:"L",symbolNative:"L",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},HRK:{name:"Croatian Kuna",demonym:"Croatian",majorSingle:"Kuna",majorPlural:"Kuna",ISOnum:191,symbol:"kn",symbolNative:"kn",minorSingle:"Lipa",minorPlural:"Lipa",ISOdigits:2,decimals:2,numToBasic:100},HTG:{name:"Haitian Gourde",demonym:"Haitian",majorSingle:"Gourde",majorPlural:"Gourdes",ISOnum:332,symbol:"G",symbolNative:"G",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:2,decimals:2,numToBasic:100},HUF:{name:"Hungarian Forint",demonym:"Hungarian",majorSingle:"Forint",majorPlural:"Forint",ISOnum:348,symbol:"Ft",symbolNative:"Ft",minorSingle:"fillér",minorPlural:"fillér",ISOdigits:2,decimals:2,numToBasic:100},IDR:{name:"Indonesian Rupiah",demonym:"Indonesian",majorSingle:"Rupiah",majorPlural:"Rupiah",ISOnum:360,symbol:"Rp",symbolNative:"Rp",minorSingle:"Sen",minorPlural:"Sen",ISOdigits:2,decimals:2,numToBasic:100},ILS:{name:"Israeli new Shekel",demonym:"Israeli",majorSingle:"Shekel",majorPlural:"Shekels",ISOnum:376,symbol:"₪",symbolNative:"₪",minorSingle:"Agora",minorPlural:"Agoras",ISOdigits:2,decimals:2,numToBasic:100},IMP:{name:"Manx Pound",demonym:"Manx",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:null,symbol:"£",symbolNative:"£",minorSingle:"Penny",minorPlural:"Pence",ISOdigits:2,decimals:2,numToBasic:100},INR:{name:"Indian Rupee",demonym:"Indian",majorSingle:"Rupee",majorPlural:"Rupees",ISOnum:356,symbol:"Rs.",symbolNative:"₹",minorSingle:"Paisa",minorPlural:"Paise",ISOdigits:2,decimals:2,numToBasic:100},IQD:{name:"Iraqi Dinar",demonym:"Iraqi",majorSingle:"Dinar",majorPlural:"Dinars",ISOnum:368,symbol:"د.ع.",symbolNative:"د.ع.",minorSingle:"Fils",minorPlural:"Fils",ISOdigits:3,decimals:3,numToBasic:1e3},IRR:{name:"Iranian Rial",demonym:"Iranian",majorSingle:"Rial",majorPlural:"Rials",ISOnum:364,symbol:"﷼",symbolNative:"﷼",minorSingle:"Dinar",minorPlural:"Dinars",ISOdigits:2,decimals:2,numToBasic:100},ISK:{name:"Icelandic Krona",demonym:"Icelandic",majorSingle:"Krona",majorPlural:"Krónur",ISOnum:352,symbol:"kr",symbolNative:"kr",minorSingle:"Aurar",minorPlural:"Aurar",ISOdigits:0,decimals:2,numToBasic:100},JEP:{name:"Jersey Pound",demonym:"Jersey",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:null,symbol:"£",symbolNative:"£",minorSingle:"Penny",minorPlural:"Pence",ISOdigits:2,decimals:2,numToBasic:100},JMD:{name:"Jamaican Dollar",demonym:"Jamaican",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:388,symbol:"J$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},JOD:{name:"Jordanian Dinar",demonym:"Jordanian",majorSingle:"Dinar",majorPlural:"Dinars",ISOnum:400,symbol:"JD",symbolNative:"د.أ.",minorSingle:"Fils",minorPlural:"Fils",ISOdigits:3,decimals:3,numToBasic:1e3},JPY:{name:"Japanese Yen",demonym:"Japanese",majorSingle:"Yen",majorPlural:"Yen",ISOnum:392,symbol:"¥",symbolNative:"¥",minorSingle:"Sen",minorPlural:"Sen",ISOdigits:0,decimals:2,numToBasic:100},KES:{name:"Kenyan Shilling",demonym:"Kenyan",majorSingle:"Shilling",majorPlural:"Shillings",ISOnum:404,symbol:"KSh",symbolNative:"KSh",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},KGS:{name:"Kyrgyzstani Som",demonym:"Kyrgyzstani",majorSingle:"Som",majorPlural:"Som",ISOnum:417,symbol:"с",symbolNative:"с",minorSingle:"Tyiyn",minorPlural:"Tyiyn",ISOdigits:2,decimals:2,numToBasic:100},KHR:{name:"Cambodian Riel",demonym:"Cambodian",majorSingle:"Riel",majorPlural:"Riels",ISOnum:116,symbol:"៛",symbolNative:"៛",minorSingle:"Sen",minorPlural:"Sen",ISOdigits:2,decimals:2,numToBasic:100},KID:{name:"Kiribati Dollar",demonym:"Kiribati",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:null,symbol:"$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},KMF:{name:"Comorian Franc",demonym:"Comorian",majorSingle:"Franc",majorPlural:"Francs",ISOnum:174,symbol:"CF",symbolNative:"CF",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:0,decimals:2,numToBasic:100},KPW:{name:"North Korean Won",demonym:"North Korean",majorSingle:"Won",majorPlural:"Won",ISOnum:408,symbol:"₩",symbolNative:"₩",minorSingle:"Chon",minorPlural:"Chon",ISOdigits:2,decimals:2,numToBasic:100},KRW:{name:"South Korean Won",demonym:"South Korean",majorSingle:"Won",majorPlural:"Won",ISOnum:410,symbol:"₩",symbolNative:"₩",minorSingle:"Jeon",minorPlural:"Jeon",ISOdigits:0,decimals:2,numToBasic:100},KWD:{name:"Kuwaiti Dinar",demonym:"Kuwaiti",majorSingle:"Dinar",majorPlural:"Dinars",ISOnum:414,symbol:"KD",symbolNative:"د.ك.",minorSingle:"Fils",minorPlural:"Fils",ISOdigits:3,decimals:3,numToBasic:1e3},KYD:{name:"Cayman Islands Dollar",demonym:"Cayman Islands",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:136,symbol:"CI$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},KZT:{name:"Kazakhstani Tenge",demonym:"Kazakhstani",majorSingle:"Tenge",majorPlural:"Tenge",ISOnum:398,symbol:"₸",symbolNative:"₸",minorSingle:"Tıyn",minorPlural:"Tıyn",ISOdigits:2,decimals:2,numToBasic:100},LAK:{name:"Lao Kip",demonym:"Lao",majorSingle:"Kip",majorPlural:"Kip",ISOnum:418,symbol:"₭N",symbolNative:"₭",minorSingle:"Att",minorPlural:"Att",ISOdigits:2,decimals:2,numToBasic:100},LBP:{name:"Lebanese Pound",demonym:"Lebanese",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:422,symbol:"LL.",symbolNative:"ل.ل.",minorSingle:"Qirsh",minorPlural:"Qirsh",ISOdigits:2,decimals:2,numToBasic:100},LKR:{name:"Sri Lankan Rupee",demonym:"Sri Lankan",majorSingle:"Rupee",majorPlural:"Rupees",ISOnum:144,symbol:"Rs.",symbolNative:"රු or ரூ",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},LRD:{name:"Liberian Dollar",demonym:"Liberian",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:430,symbol:"L$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},LSL:{name:"Lesotho Loti",demonym:"Lesotho",majorSingle:"Loti",majorPlural:"maLoti",ISOnum:426,symbol:"L",symbolNative:"L",minorSingle:"Sente",minorPlural:"Lisente",ISOdigits:2,decimals:2,numToBasic:100},LYD:{name:"Libyan Dinar",demonym:"Libyan",majorSingle:"Dinar",majorPlural:"Dinars",ISOnum:434,symbol:"LD",symbolNative:"ل.د.",minorSingle:"Dirham",minorPlural:"Dirhams",ISOdigits:3,decimals:3,numToBasic:1e3},MAD:{name:"Moroccan Dirham",demonym:"Moroccan",majorSingle:"Dirham",majorPlural:"Dirhams",ISOnum:504,symbol:"DH",symbolNative:"د.م.",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:2,decimals:2,numToBasic:100},MDL:{name:"Moldovan Leu",demonym:"Moldovan",majorSingle:"Leu",majorPlural:"Lei",ISOnum:498,symbol:"L",symbolNative:"L",minorSingle:"Ban",minorPlural:"Bani",ISOdigits:2,decimals:2,numToBasic:100},MGA:{name:"Malagasy Ariary",demonym:"Malagasy",majorSingle:"Ariary",majorPlural:"Ariary",ISOnum:969,symbol:"Ar",symbolNative:"Ar",minorSingle:"Iraimbilanja",minorPlural:"Iraimbilanja",ISOdigits:2,decimals:0,numToBasic:5},MKD:{name:"Macedonian Denar",demonym:"Macedonian",majorSingle:"Denar",majorPlural:"Denars",ISOnum:807,symbol:"den",symbolNative:"ден",minorSingle:"Deni",minorPlural:"Deni",ISOdigits:2,decimals:2,numToBasic:100},MMK:{name:"Myanmar Kyat",demonym:"Myanmar",majorSingle:"Kyat",majorPlural:"Kyat",ISOnum:104,symbol:"Ks",symbolNative:"Ks",minorSingle:"Pya",minorPlural:"Pya",ISOdigits:2,decimals:2,numToBasic:100},MNT:{name:"Mongolian Tögrög",demonym:"Mongolian",majorSingle:"Tögrög",majorPlural:"Tögrög",ISOnum:496,symbol:"₮",symbolNative:"₮",minorSingle:"möngö",minorPlural:"möngö",ISOdigits:2,decimals:2,numToBasic:100},MOP:{name:"Macanese Pataca",demonym:"Macanese",majorSingle:"Pataca",majorPlural:"Patacas",ISOnum:446,symbol:"MOP$",symbolNative:"MOP$",minorSingle:"Avo",minorPlural:"Avos",ISOdigits:2,decimals:2,numToBasic:100},MRU:{name:"Mauritanian Ouguiya",demonym:"Mauritanian",majorSingle:"Ouguiya",majorPlural:"Ouguiya",ISOnum:929,symbol:"UM",symbolNative:"أ.م.",minorSingle:"Khoums",minorPlural:"Khoums",ISOdigits:2,decimals:0,numToBasic:5},MUR:{name:"Mauritian Rupee",demonym:"Mauritian",majorSingle:"Rupee",majorPlural:"Rupees",ISOnum:480,symbol:"Rs.",symbolNative:"रु ",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},MVR:{name:"Maldivian Rufiyaa",demonym:"Maldivian",majorSingle:"Rufiyaa",majorPlural:"Rufiyaa",ISOnum:462,symbol:"MRf",symbolNative:".ރ",minorSingle:"laari",minorPlural:"laari",ISOdigits:2,decimals:2,numToBasic:100},MWK:{name:"Malawian Kwacha",demonym:"Malawian",majorSingle:"Kwacha",majorPlural:"Kwacha",ISOnum:454,symbol:"MK",symbolNative:"MK",minorSingle:"Tambala",minorPlural:"Tambala",ISOdigits:2,decimals:2,numToBasic:100},MXN:{name:"Mexican Peso",demonym:"Mexican",majorSingle:"Peso",majorPlural:"Pesos",ISOnum:484,symbol:"MX$",symbolNative:"$",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},MYR:{name:"Malaysian Ringgit",demonym:"Malaysian",majorSingle:"Ringgit",majorPlural:"Ringgit",ISOnum:458,symbol:"RM",symbolNative:"RM",minorSingle:"Sen",minorPlural:"Sen",ISOdigits:2,decimals:2,numToBasic:100},MZN:{name:"Mozambican Metical",demonym:"Mozambican",majorSingle:"Metical",majorPlural:"Meticais",ISOnum:943,symbol:"MTn",symbolNative:"MT",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},NAD:{name:"Namibian Dollar",demonym:"Namibian",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:516,symbol:"N$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},NGN:{name:"Nigerian Naira",demonym:"Nigerian",majorSingle:"Naira",majorPlural:"Naira",ISOnum:566,symbol:"₦",symbolNative:"₦",minorSingle:"Kobo",minorPlural:"Kobo",ISOdigits:2,decimals:2,numToBasic:100},NIO:{name:"Nicaraguan Córdoba",demonym:"Nicaraguan",majorSingle:"Córdoba Oro",majorPlural:"Córdoba Oro",ISOnum:558,symbol:"C$",symbolNative:"C$",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},NOK:{name:"Norwegian Krone",demonym:"Norwegian",majorSingle:"Krone",majorPlural:"Kroner",ISOnum:578,symbol:"kr",symbolNative:"kr",minorSingle:"øre",minorPlural:"øre",ISOdigits:2,decimals:2,numToBasic:100},NPR:{name:"Nepalese Rupee",demonym:"Nepalese",majorSingle:"Rupee",majorPlural:"Rupees",ISOnum:524,symbol:"Rs.",symbolNative:"रू",minorSingle:"Paisa",minorPlural:"Paise",ISOdigits:2,decimals:2,numToBasic:100},NZD:{name:"New Zealand Dollar",demonym:"New Zealand",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:554,symbol:"NZ$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},OMR:{name:"Omani Rial",demonym:"Omani",majorSingle:"Rial",majorPlural:"Rials",ISOnum:512,symbol:"OR",symbolNative:"ر.ع.",minorSingle:"Baisa",minorPlural:"Baisa",ISOdigits:3,decimals:3,numToBasic:1e3},PAB:{name:"Panamanian Balboa",demonym:"Panamanian",majorSingle:"Balboa",majorPlural:"Balboa",ISOnum:590,symbol:"B/.",symbolNative:"B/.",minorSingle:"Centésimo",minorPlural:"Centésimos",ISOdigits:2,decimals:2,numToBasic:100},PEN:{name:"Peruvian Sol",demonym:"Peruvian",majorSingle:"Sol",majorPlural:"Soles",ISOnum:604,symbol:"S/.",symbolNative:"S/.",minorSingle:"Céntimo",minorPlural:"Céntimos",ISOdigits:2,decimals:2,numToBasic:100},PGK:{name:"Papua New Guinean Kina",demonym:"Papua New Guinean",majorSingle:"Kina",majorPlural:"Kina",ISOnum:598,symbol:"K",symbolNative:"K",minorSingle:"Toea",minorPlural:"Toea",ISOdigits:2,decimals:2,numToBasic:100},PHP:{name:"Philippine Peso",demonym:"Philippine",majorSingle:"Peso",majorPlural:"Pesos",ISOnum:608,symbol:"₱",symbolNative:"₱",minorSingle:"Sentimo",minorPlural:"Sentimo",ISOdigits:2,decimals:2,numToBasic:100},PKR:{name:"Pakistani Rupee",demonym:"Pakistani",majorSingle:"Rupee",majorPlural:"Rupees",ISOnum:586,symbol:"Rs.",symbolNative:"Rs",minorSingle:"Paisa",minorPlural:"Paise",ISOdigits:2,decimals:2,numToBasic:100},PLN:{name:"Polish Zloty",demonym:"Polish",majorSingle:"Zloty",majorPlural:"Zlotys",ISOnum:985,symbol:"zł",symbolNative:"zł",minorSingle:"Grosz",minorPlural:"Groszy",ISOdigits:2,decimals:2,numToBasic:100},PND:{name:"Pitcairn Islands Dollar",demonym:"Pitcairn Islands",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:null,symbol:"$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},PRB:{name:"Transnistrian Ruble",demonym:"Transnistrian",majorSingle:"Ruble",majorPlural:"Rubles",ISOnum:null,symbol:"р.",symbolNative:"р.",minorSingle:"Kopek",minorPlural:"Kopeks",ISOdigits:2,decimals:2,numToBasic:100},PYG:{name:"Paraguayan Guaraní",demonym:"Paraguayan",majorSingle:"Guaraní",majorPlural:"Guaraníes",ISOnum:600,symbol:"₲",symbolNative:"₲",minorSingle:"Centimo",minorPlural:"Centimos",ISOdigits:0,decimals:2,numToBasic:100},QAR:{name:"Qatari Riyal",demonym:"Qatari",majorSingle:"Riyal",majorPlural:"Riyals",ISOnum:634,symbol:"QR",symbolNative:"ر.ق.",minorSingle:"Dirham",minorPlural:"Dirhams",ISOdigits:2,decimals:2,numToBasic:100},RON:{name:"Romanian Leu",demonym:"Romanian",majorSingle:"Leu",majorPlural:"Lei",ISOnum:946,symbol:"L",symbolNative:"L",minorSingle:"Ban",minorPlural:"Bani",ISOdigits:2,decimals:2,numToBasic:100},RSD:{name:"Serbian Dinar",demonym:"Serbian",majorSingle:"Dinar",majorPlural:"Dinars",ISOnum:941,symbol:"din",symbolNative:"дин",minorSingle:"Para",minorPlural:"Para",ISOdigits:2,decimals:2,numToBasic:100},RUB:{name:"Russian Ruble",demonym:"Russian",majorSingle:"Ruble",majorPlural:"Rubles",ISOnum:643,symbol:"₽",symbolNative:"₽",minorSingle:"Kopek",minorPlural:"Kopeks",ISOdigits:2,decimals:2,numToBasic:100},RWF:{name:"Rwandan Franc",demonym:"Rwandan",majorSingle:"Franc",majorPlural:"Francs",ISOnum:646,symbol:"FRw",symbolNative:"R₣",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:0,decimals:2,numToBasic:100},SAR:{name:"Saudi Riyal",demonym:"Saudi",majorSingle:"Riyal",majorPlural:"Riyals",ISOnum:682,symbol:"SR",symbolNative:"ر.س.",minorSingle:"Halalah",minorPlural:"Halalahs",ISOdigits:2,decimals:2,numToBasic:100},SBD:{name:"Solomon Islands Dollar",demonym:"Solomon Islands",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:90,symbol:"SI$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},SCR:{name:"Seychellois Rupee",demonym:"Seychellois",majorSingle:"Rupee",majorPlural:"Rupees",ISOnum:690,symbol:"Rs.",symbolNative:"Rs",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},SDG:{name:"Sudanese Pound",demonym:"Sudanese",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:938,symbol:"£SD",symbolNative:"ج.س.",minorSingle:"Qirsh",minorPlural:"Qirsh",ISOdigits:2,decimals:2,numToBasic:100},SEK:{name:"Swedish Krona",demonym:"Swedish",majorSingle:"Krona",majorPlural:"Kronor",ISOnum:752,symbol:"kr",symbolNative:"kr",minorSingle:"Öre",minorPlural:"Öre",ISOdigits:2,decimals:2,numToBasic:100},SGD:{name:"Singapore Dollar",demonym:"Singapore",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:702,symbol:"S$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},SHP:{name:"Saint Helena Pound",demonym:"Saint Helena",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:654,symbol:"£",symbolNative:"£",minorSingle:"Penny",minorPlural:"Pence",ISOdigits:2,decimals:2,numToBasic:100},SLL:{name:"Sierra Leonean Leone",demonym:"Sierra Leonean",majorSingle:"Leone",majorPlural:"Leones",ISOnum:694,symbol:"Le",symbolNative:"Le",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},SLS:{name:"Somaliland Shilling",demonym:"Somaliland",majorSingle:"Shilling",majorPlural:"Shillings",ISOnum:null,symbol:"Sl",symbolNative:"Sl",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},SOS:{name:"Somali Shilling",demonym:"Somali",majorSingle:"Shilling",majorPlural:"Shillings",ISOnum:706,symbol:"Sh.So.",symbolNative:"Ssh",minorSingle:"Senti",minorPlural:"Senti",ISOdigits:2,decimals:2,numToBasic:100},SRD:{name:"Surinamese Dollar",demonym:"Surinamese",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:968,symbol:"Sr$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},SSP:{name:"South Sudanese Pound",demonym:"South Sudanese",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:728,symbol:"SS£",symbolNative:"SS£",minorSingle:"Qirsh",minorPlural:"Qirsh",ISOdigits:2,decimals:2,numToBasic:100},STN:{name:"Sao Tome and Príncipe Dobra",demonym:"Sao Tome",majorSingle:"Dobra",majorPlural:"Dobras",ISOnum:930,symbol:"Db",symbolNative:"Db",minorSingle:"Centimo",minorPlural:"Centimos",ISOdigits:2,decimals:2,numToBasic:100},SVC:{name:"Salvadoran Colón",demonym:"Salvadoran",majorSingle:"Colón",majorPlural:"Colones",ISOnum:222,symbol:"₡",symbolNative:"₡",minorSingle:"Centavo",minorPlural:"Centavos",ISOdigits:2,decimals:2,numToBasic:100},SYP:{name:"Syrian Pound",demonym:"Syrian",majorSingle:"Pound",majorPlural:"Pounds",ISOnum:760,symbol:"LS",symbolNative:"ل.س.",minorSingle:"Qirsh",minorPlural:"Qirsh",ISOdigits:2,decimals:2,numToBasic:100},SZL:{name:"Swazi Lilangeni",demonym:"Swazi",majorSingle:"Lilangeni",majorPlural:"Emalangeni",ISOnum:748,symbol:"L",symbolNative:"L",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},THB:{name:"Thai Baht",demonym:"Thai",majorSingle:"Baht",majorPlural:"Baht",ISOnum:764,symbol:"฿",symbolNative:"฿",minorSingle:"Satang",minorPlural:"Satang",ISOdigits:2,decimals:2,numToBasic:100},TJS:{name:"Tajikistani Somoni",demonym:"Tajikistani",majorSingle:"Somoni",majorPlural:"Somoni",ISOnum:972,symbol:"SM",symbolNative:"SM",minorSingle:"Diram",minorPlural:"Diram",ISOdigits:2,decimals:2,numToBasic:100},TMT:{name:"Turkmenistan Manat",demonym:"Turkmenistan",majorSingle:"Manat",majorPlural:"Manat",ISOnum:934,symbol:"m.",symbolNative:"T",minorSingle:"Tenge",minorPlural:"Tenge",ISOdigits:2,decimals:2,numToBasic:100},TND:{name:"Tunisian Dinar",demonym:"Tunisian",majorSingle:"Dinar",majorPlural:"Dinars",ISOnum:788,symbol:"DT",symbolNative:"د.ت.",minorSingle:"Millime",minorPlural:"Millime",ISOdigits:3,decimals:3,numToBasic:1e3},TOP:{name:"Tongan Paʻanga",demonym:"Tongan",majorSingle:"Pa'anga",majorPlural:"Pa'anga",ISOnum:776,symbol:"T$",symbolNative:"PT",minorSingle:"Seniti",minorPlural:"Seniti",ISOdigits:2,decimals:2,numToBasic:100},TRY:{name:"Turkish Lira",demonym:"Turkish",majorSingle:"Lira",majorPlural:"Lira",ISOnum:949,symbol:"TL",symbolNative:"₺",minorSingle:"Kuruş",minorPlural:"Kuruş",ISOdigits:2,decimals:2,numToBasic:100},TTD:{name:"Trinidad and Tobago Dollar",demonym:"Trinidad and Tobago",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:780,symbol:"TT$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},TVD:{name:"Tuvaluan Dollar",demonym:"Tuvaluan",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:null,symbol:"$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},TWD:{name:"New Taiwan Dollar",demonym:"New Taiwan",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:901,symbol:"NT$",symbolNative:"圓",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},TZS:{name:"Tanzanian Shilling",demonym:"Tanzanian",majorSingle:"Shilling",majorPlural:"Shillings",ISOnum:834,symbol:"TSh",symbolNative:"TSh",minorSingle:"Senti",minorPlural:"Senti",ISOdigits:2,decimals:2,numToBasic:100},UAH:{name:"Ukrainian Hryvnia",demonym:"Ukrainian",majorSingle:"Hryvnia",majorPlural:"Hryvnias",ISOnum:980,symbol:"₴",symbolNative:"грн",minorSingle:"Kopiyka",minorPlural:"kopiyky",ISOdigits:2,decimals:2,numToBasic:100},UGX:{name:"Ugandan Shilling",demonym:"Ugandan",majorSingle:"Shilling",majorPlural:"Shillings",ISOnum:800,symbol:"USh",symbolNative:"Sh",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:0,decimals:2,numToBasic:100},USD:{name:"United States Dollar",demonym:"US",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:840,symbol:"$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},UYU:{name:"Uruguayan Peso",demonym:"Uruguayan",majorSingle:"Peso",majorPlural:"Pesos",ISOnum:858,symbol:"$U",symbolNative:"$",minorSingle:"Centésimo",minorPlural:"Centésimos",ISOdigits:2,decimals:2,numToBasic:100},UZS:{name:"Uzbekistani Som",demonym:"Uzbekistani",majorSingle:"Som",majorPlural:"Som",ISOnum:860,symbol:"сум",symbolNative:"сум",minorSingle:"Tiyin",minorPlural:"Tiyin",ISOdigits:2,decimals:2,numToBasic:100},VED:{name:"Venezuelan bolívar digital",demonym:"Venezuelan",majorSingle:"Bolívar Digital",majorPlural:"Bolívars Digital",ISOnum:null,symbol:"Bs.",symbolNative:"Bs.",minorSingle:"Céntimo",minorPlural:"Céntimos",ISOdigits:2,decimals:2,numToBasic:100},VES:{name:"Venezuelan Bolívar Soberano",demonym:"Venezuelan",majorSingle:"Bolívar",majorPlural:"Bolívares",ISOnum:928,symbol:"Bs.F",symbolNative:"Bs.F",minorSingle:"Centimo",minorPlural:"Centimos",ISOdigits:2,decimals:2,numToBasic:100},VND:{name:"Vietnamese Dong",demonym:"Vietnamese",majorSingle:"Dong",majorPlural:"Dong",ISOnum:704,symbol:"₫",symbolNative:"₫",minorSingle:"Hào",minorPlural:"Hào",ISOdigits:0,decimals:2,numToBasic:10},VUV:{name:"Vanuatu Vatu",demonym:"Vanuatu",majorSingle:"Vatu",majorPlural:"Vatu",ISOnum:548,symbol:"VT",symbolNative:"VT",minorSingle:"",minorPlural:"",ISOdigits:0,decimals:0,numToBasic:null},WST:{name:"Samoan Tala",demonym:"Samoan",majorSingle:"Tala",majorPlural:"Tala",ISOnum:882,symbol:"T",symbolNative:"ST",minorSingle:"Sene",minorPlural:"Sene",ISOdigits:2,decimals:2,numToBasic:100},XAF:{name:"Central African CFA Franc BEAC",demonym:"Central African CFA",majorSingle:"Franc",majorPlural:"Francs",ISOnum:950,symbol:"Fr",symbolNative:"Fr.",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:0,decimals:2,numToBasic:100},XCD:{name:"East Caribbean Dollar",demonym:"East Caribbean",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:951,symbol:"$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},XOF:{name:"West African CFA Franc BCEAO",demonym:"West African CFA",majorSingle:"Franc",majorPlural:"Francs",ISOnum:952,symbol:"₣",symbolNative:"₣",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:0,decimals:2,numToBasic:100},XPF:{name:"CFP Franc (Franc Pacifique)",demonym:"CFP",majorSingle:"Franc",majorPlural:"Francs",ISOnum:953,symbol:"₣",symbolNative:"₣",minorSingle:"Centime",minorPlural:"Centimes",ISOdigits:0,decimals:0,numToBasic:100},YER:{name:"Yemeni Rial",demonym:"Yemeni",majorSingle:"Rial",majorPlural:"Rials",ISOnum:886,symbol:"YR",symbolNative:"ر.ي.",minorSingle:"Fils",minorPlural:"Fils",ISOdigits:2,decimals:2,numToBasic:100},ZAR:{name:"South African Rand",demonym:"South African",majorSingle:"Rand",majorPlural:"Rand",ISOnum:710,symbol:"R",symbolNative:"R",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},ZMW:{name:"Zambian Kwacha",demonym:"Zambian",majorSingle:"Kwacha",majorPlural:"Kwacha",ISOnum:967,symbol:"ZK",symbolNative:"ZK",minorSingle:"Ngwee",minorPlural:"Ngwee",ISOdigits:2,decimals:2,numToBasic:100},ZWB:{name:"RTGS Dollar",demonym:"RTGS",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:null,symbol:"",symbolNative:"",minorSingle:"",minorPlural:"",ISOdigits:0,decimals:0,numToBasic:null},ZWL:{name:"Zimbabwean Dollar",demonym:"Zimbabwean",majorSingle:"Dollar",majorPlural:"Dollars",ISOnum:932,symbol:"Z$",symbolNative:"$",minorSingle:"Cent",minorPlural:"Cents",ISOdigits:2,decimals:2,numToBasic:100},Abkhazia:{name:"Abkhazian Apsar",demonym:"Abkhazian",majorSingle:"Apsar",majorPlural:"Apsark",ISOnum:null,symbol:"",symbolNative:"",minorSingle:"",minorPlural:"",ISOdigits:0,decimals:0,numToBasic:null},Artsakh:{name:"Artsakh Dram",demonym:"Artsakh",majorSingle:"Dram",majorPlural:"Dram",ISOnum:null,symbol:"դր.",symbolNative:"դր.",minorSingle:"Luma",minorPlural:"Luma",ISOdigits:2,decimals:2,numToBasic:100}};class Ot{constructor({transactionId:e,denomination:a,qty:n,code:i,baseUrl:t,headers:o}){this.transactionId=e,this.denomination=a,this.qty=n,this.code=i,this.baseUrl=t,this.headers=o}async getTrasactionId(){try{return(await hi.post(this.baseUrl+"/gcms/api/1.0/transaction",null,{headers:this.headers})).data}catch(e){return await(new xi).jsonError({exception:e,error:"Transaction Id Generation Error"},null,null),{codeException:!0,message:e.response.data.statusCode,success:!1}}}async generateFlipkartVoucher({transactionId:e,denomination:a}){try{const n=this.baseUrl+"/gcms/api/1.0/egv/v2";let i={transactionId:e,denomination:a,recipient:{medium:"INLINE",format:"JSON"}};return(await hi.post(n,i,{headers:this.headers})).data}catch(e){return await(new xi).log("Flipkart EGV Generation Error : "+e.response.data.statusCode,e.response.data,null,"FK_EGV"),await(new xi).jsonError({exception:e,error:"Flipkart EGV Generation Error"},null,null),{codeException:!0,message:e.response.data.statusCode,success:!1}}}async activateFlipkartVoucher(e,a){try{const n=this.baseUrl+"/gcms/api/1.0/egv/activate";let i={transactionId:e,code:a};return(await hi.post(n,i,{headers:this.headers})).data}catch(e){return await(new xi).log("Flipkart EGV Activation Error Error : "+e.response.data.statusCode,e.response.data,null,"FK_EGV"),await(new xi).log("Flipkart EGV Activation Error : "+e.response.data.statusMessage,e.response.data,null,"FK_EGV"),await(new xi).jsonError({exception:e,error:"Flipkart EGV Activation Error"},null,null),{codeException:!0,message:e.response.data.statusCode,success:!1}}}async deactivateFlipkartVoucher(e,a){try{const n=this.baseUrl+"/gcms/api/1.0/egv/deactivate";let i={transactionId:e,code:a,comment:"deactivate"};return(await hi.post(n,i,{headers:this.headers})).data}catch(e){return await(new xi).log("Flipkart EGV Deativation Error Error : "+e.response.data.statusCode,e.response.data,null,"FK_EGV"),await(new xi).log("Flipkart EGV Deativation Error : "+e.response.data.statusMessage,e.response.data,null,"FK_EGV"),await(new xi).jsonError({exception:e,error:"Flipkart EGV Deativation Error"},null,null),{codeException:!0,message:e.response.data.statusCode,success:!1}}}async CancelFlipkartVoucher(e,a){try{const n=this.baseUrl+"/gcms/api/1.0/egv/cancel";let i={transactionId:e,code:a,comment:"Cancel"};return(await hi.post(n,i,{headers:this.headers})).data}catch(e){return await(new xi).log("Flipkart EGV Cancel Error Error : "+e.response.data.statusCode,e.response.data,null,"FK_EGV"),await(new xi).log("Flipkart EGV Cancel Error : "+e.response.data.statusMessage,e.response.data,null,"FK_EGV"),await(new xi).jsonError({exception:e,error:"Flipkart EGV Cancel Error"},null,null),{codeException:!0,message:e.response.data.statusCode,success:!1}}}async redispatchFlipkartVoucher(e){try{const a=this.baseUrl+"/gcms/api/1.0/egv/redispatch";let n={transactionId:e,comment:"redispatch",recipientList:[{medium:"INLINE",format:"JSON"}]};return(await hi.post(a,n,{headers:this.headers})).data}catch(e){return await(new xi).log("Flipkart EGV redispatch Error Error : "+e.response.data.statusCode,e.response.data,null,"FK_EGV"),await(new xi).log("Flipkart EGV redispatch Error : "+e.response.data.statusMessage,e.response.data,null,"FK_EGV"),await(new xi).jsonError({exception:e,error:"Flipkart EGV redispatch Error"},null,null),{codeException:!0,message:e.response.data.statusCode,success:!1}}}async getFlipkartBalance(){try{await(new xi).log("get Flipkart Balance",null,null,"FK_EGV");const e=await hi.get(this.baseUrl+"/gcms/api/1.0/client/balance",{headers:this.headers});let a=0;return a=0!==e.data.clients.length?e.data.clients[0].balance:0,{success:a>0,balance:a,message:e.data.statusMessage}}catch(e){return await(new xi).log("get Flipkart Balance Error :"+e.response.data.statusCode,e.response.data,null,"FK_EGV"),await(new xi).jsonError({exception:e,error:"get Flipkart Balance Error"},null,null),{codeException:!0,message:e.response.data.statusCode,success:!1}}}}class It{constructor({client_id:e,client_secret:a,redirect_uri:n,authorization:i,base_url:t,place_order_config:o,username:r,password:s}){this.generateSignature=async(e,a,n)=>{try{var i=a,t=(n+"").toUpperCase(),o=e,r=this.client_secret;let s=e=>{if(e instanceof Array)var a=[],n=Object.keys(e);else a={},n=Object.keys(e);for(var i in n.sort((function(e,a){return e<a?-1:e>a?1:0})),n){var t=n[i];"object"==typeof e[t]?(e[t]instanceof Array&&(a[t]=s(e[t])),a[t]=s(e[t])):a[t]=e[t]}return a},c=()=>{var e=o.split("?"),a=e[0],n=e[1].split("&");return o=a+"?"+n.sort().join("&"),u(o)},l=()=>{var e=[];return e.push(t.toUpperCase()),o.indexOf("?")>=0?e.push(c()):e.push(u(o)),i&&Object.keys(i).length&&e.push(u(JSON.stringify(s(i)))),e.join("&")},u=e=>encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}));return Bi(l(),r).toString()}catch(e){await(new xi).jsonError({exception:e,error:"QC generateSignature Error"},null,null)}},this.getQuickCilverAuthCode=async(e,a)=>{try{const e=await hi.post(this.base_url+"/oauth2/verify",{clientId:this.client_id,username:this.username,password:this.password}),{authorizationCode:a}=e.data;return _i.quick_silver.AUTH_CODE=a,_i.quick_silver.AUTH_CODE_LAST_UPDATED=(new Date).getTime(),{code:a}}catch(n){return await(new xi).jsonError({exception:n,error:"QC getAuthCode Error"},e,a),{codeException:!0}}},this.getQuickCilverOAuthToken=async(e,a,n)=>{try{const a=await hi.post(this.base_url+"/oauth2/token",{clientId:this.client_id,clientSecret:this.client_secret,authorizationCode:e}),{token:n}=a.data;return _i.quick_silver.OAUTH_CODE=n,_i.quick_silver.OAUTH_CODE_LAST_UPDATED=(new Date).getTime(),{access_token:n}}catch(e){return await(new xi).jsonError({exception:e,error:"QC getOAuthToken Error"},a,n),{oAuthException:!0}}},this.getOrderStatus=async(e,a,n)=>{try{const i=this.base_url+`/rest/v3/order/${e}/status`,t={connection:"close","content-type":"application/json",dateatclient:(new Date).toISOString()+"",signature:await this.generateSignature(i,null,"GET"),"accept-encoding":"gzip, deflate, br",Authorization:i.includes("zeus")?"":`Bearer ${a}`};i.includes("zeus")&&(t["sp-qc-auth"]=`Bearer ${a}`);const o=await Et(i,{headers:t,method:"GET"}),r=await o.json();return await(new xi).log(`get Order Status${o}`,!1,e,n),{response:r}}catch(a){return await(new xi).jsonError({exception:a,error:"QC getOrderStatus Error"},e,n),{oAuthException:!0}}},this.placeVouchersOrder=async({qty:e,vendorSku:a,access_token:n,referenceId:i,price:t,currencyISOCode:o,syncOnly:r,vendor_code:s})=>{try{const c={address:{firstname:this.place_order_config.firstname,lastname:this.place_order_config.lastname,email:this.place_order_config.email,telephone:this.place_order_config.telephone,line1:this.place_order_config.line1,line2:this.place_order_config.line2,city:this.place_order_config.city,region:this.place_order_config.region,country:this.place_order_config.country,postcode:this.place_order_config.postcode,company:this.place_order_config.company,billToThis:!0},payments:[{code:"svc",amount:t*e}],refno:i,syncOnly:r,deliveryMode:"API",products:[{sku:a,price:t,qty:e,currency:o,theme:""}]},l=this.base_url+"/rest/v3/orders";await(new xi).log(`QC Body:${JSON.stringify(c)}`,null,i,s),await(new xi).log(`QC access_token:${n}`,null,i,s);const u={connection:"close","content-type":"application/json",dateatclient:(new Date).toISOString()+"",signature:await this.generateSignature(l,c,"POST"),"accept-encoding":"gzip, deflate, br",Authorization:l.includes("zeus")?"":`Bearer ${n}`};l.includes("zeus")&&(u["sp-qc-auth"]=`Bearer ${n}`);const p=await Et(l,{headers:u,body:JSON.stringify(c),method:"POST"}),d=await p.json();let{status:m,message:h,cards:f,orderId:g,code:v}=d,b=null,y=null,x="COMPLETE"==m||"PROCESSING"==m;try{b=f.map((e=>({cardnumber:e.cardNumber,pin_or_url:e.cardPin,expiry:e.validity})))}catch(e){x=!1}try{y=d.payments[0].balance}catch(e){await(new xi).jsonError({exception:e,error:"Wallet balance retrieval Error"},i,s)}return{vouchers:b,success:x,message:h,orderId:g,status:m,statusCode:v,walletBalance:y}}catch(e){return await(new xi).jsonError({exception:e,error:"QC placeVouchersOrder Error"},i,s),{orderException:!0}}},this.getBalance=async(e,a,n)=>{try{const i={cardNumber:e,pin:a},t=this.base_url+"/rest/v3/balance",o={connection:"close","content-type":"application/json",dateatclient:(new Date).toISOString()+"",signature:await this.generateSignature(t,i,"POST"),"accept-encoding":"gzip, deflate, br",Authorization:t.includes("zeus")?"":`Bearer ${n}`};t.includes("zeus")&&(o["sp-qc-auth"]=`Bearer ${n}`);const r=await Et(t,{headers:o,body:JSON.stringify(i),method:"POST"}),s=await r.json();let{status:c,message:l,balance:u}=s;return{status:c,message:l,balance:u,responseJson:s}}catch(e){return await(new xi).jsonError({exception:e,error:"QC getBalance Error"},null,null),{getBalanceException:!0}}},this.client_id=e,this.client_secret=a,this.redirect_uri=n,this.authorization=i,this.base_url=t,this.place_order_config=o,this.username=r,this.password=s}async getOlderOrderDetails(e,a,n,i){try{const n=this.base_url+`/rest/v3/order/${e}/cards/?limit=400`,i={connection:"close","content-type":"application/json",dateatclient:(new Date).toISOString()+"",signature:await this.generateSignature(n,null,"GET"),"accept-encoding":"gzip, deflate, br",Authorization:n.includes("zeus")?"":`Bearer ${a}`};n.includes("zeus")&&(i["sp-qc-auth"]=`Bearer ${a}`);const t=await Et(n,{headers:i,method:"GET"}),o=await t.json();let{cards:r}=o,s=!1,c=null;try{c=r.map((e=>({cardnumber:e.cardNumber,pin_or_url:e.cardPin,expiry:e.validity}))),s=!0}catch(e){s=!1}return{vouchers:c,success:s,message:""}}catch(e){return await(new xi).jsonError({exception:e,error:"QC getOlderOrderDetails Error"},n,i),{oldOrderException:!0,vendorCode:i}}}async getCategory(e){try{const a=this.base_url+"/rest/v3/catalog/categories",n={connection:"close","content-type":"application/json",dateatclient:(new Date).toISOString()+"",signature:await this.generateSignature(a,null,"GET"),"accept-encoding":"gzip, deflate, br",Authorization:a.includes("zeus")?"":`Bearer ${e}`};a.includes("zeus")&&(n["sp-qc-auth"]=`Bearer ${e}`);const i=await Et(a,{headers:n,method:"GET"}),t=await i.json();return{categoryId:t.id}}catch(e){return await(new xi).jsonError({exception:e,error:"QC getCategory Error"},null,null),null}}async getProducts(e,a){try{const n=this.base_url+`/rest/v3/catalog/categories/${e}/products`,i={connection:"close","content-type":"application/json",dateatclient:(new Date).toISOString()+"",signature:await this.generateSignature(n,null,"GET"),"accept-encoding":"gzip, deflate, br",Authorization:n.includes("zeus")?"":`Bearer ${a}`};n.includes("zeus")&&(i["sp-qc-auth"]=`Bearer ${a}`);const t=await Et(n,{headers:i,method:"GET"}),o=await t.json();return{productList:o.products}}catch(e){return await(new xi).jsonError({exception:e,error:"QC getCategory Error"},null,null),null}}}class Tt{constructor(e,a){this.get=null,this.set=null,this.services=null,this.accountabilitySchema=null,this.itemsService=null,this.sleep=e=>new Promise((a=>setTimeout(a,e))),this.getWorkAdvantageCode=async(e,a)=>{try{const n=new Si(Ii.workAdvantageConfig);let i=null,t=null;const o=_i.work_advantage.AUTH_CODE_LAST_UPDATED,r=_i.work_advantage.AUTH_CODE,s=Ii.workAdvantageConfig.code_validity_time,c=((new Date).getTime()-o)/1e3;if(r&&o&&c<s)await(new xi).log("Fetching Previous Auth Code TSLU:"+c,!1,e,a),i=r;else{await(new xi).log("Generating Auth Code TSLU:"+c,!1,e,a);const o=await n.getAuthCode();i=o.code,t=o.codeException}return{code:i,codeException:t}}catch(n){return await(new xi).jsonError({exception:n,error:"getWorkAdvantageCode Error"},e,a),{code:null,codeException:!0}}},this.getWorkAdvantageVoucher=async(e,a,n,i,t)=>{try{await(new xi).log("Initialising WorkAdvantage Object",!1,n,t);const o=new Si(Ii.workAdvantageConfig);await(new xi).log("Getting Authorization Code",!1,n,t);const{code:r,codeException:s}=await this.getWorkAdvantageCode(n,t);await(new xi).log("Getting OAuthToken",!1,n,t);const{access_token:c,oAuthException:l}=await o.getOAuthToken(r,n,t);await(new xi).log("Getting Vouchers: "+JSON.stringify({upc_id:e,qty:a,referenceId:n}),!1,n,t);let{vouchers:u,success:p,message:d,orderId:m,orderException:h}=await o.placeVouchersOrder({upc_id:e,qty:a,access_token:c,referenceId:n,vendor_code:t});await(new xi).log(`Received Response for refId:${n}, Suc:${p}, Msg:${d}`,!1,n,t);let f=null;if(!p&&i&&d&&d.toLowerCase().includes("unique reference id")){await(new xi).log(`Getting Older Order Details for Ref:${n},"Message:"${d}`,!1,n,t);const e=await o.getOlderOrderDetails(n,c,t);u=e.vouchers,p=e.success,d=e.message,m=e.orderId,f=e.oldOrderException,await(new xi).log(`Received Old Order Response Suc:${p}, ordId:${m},"Message:"${d}`,!1,n,t)}let g=s||h||l||f;return await(new xi).log(`isExceptionOccurred: ${!!g}`,!1,n,t),g?(await(new xi).log(`Throwing Error: coE:${s} oaE:${l} orE:${h} ooE:${f}`,!1,n,t),{vouchers:null,success:!1,message:"Exception Occurred:",orderId:null,exception:!0,vendorCode:t}):{vouchers:u,success:p,message:d,orderId:m,exception:!!g,vendorCode:t}}catch(e){return await(new xi).jsonError({exception:e,error:"getWorkAdvantageVoucher Error"},n,t),{vouchers:null,success:!1,message:"Exception Occurred:"+e,orderId:null,exception:!0,vendorCode:t}}},this.getWorkAdvantageCatalogue=async e=>{try{const a=new Si(Ii.workAdvantageConfig),{code:n}=await a.getAuthCode(),{access_token:i}=await a.getOAuthToken(n,null,null);return await a.getCatalog(i,e)}catch(e){await(new xi).jsonError({exception:e,error:"getWorkAdvantageCatalogue Error"},null,null)}},this.getWorkAdvantageWalletBalance=async()=>{try{const e=new Si(Ii.workAdvantageConfig),{code:a}=await e.getAuthCode(),{access_token:n}=await e.getOAuthToken(a,null,null);return await e.getBalance(n)}catch(e){await(new xi).jsonError({exception:e,error:"getWorkAdvantageWalletBalance Error"},null,null)}},this.getFlipkartVoucher=async(e,a,n,i,t)=>{try{await(new xi).log("Initialising Flipkart Voucher",!1,a,i);const o=e,r=new wi(this.itemsService,this.accountabilitySchema),s=new vi(this.itemsService,this.accountabilitySchema),c=await r.getVendorFromVendorCode(i,a),l=c?c.id:null;let u=[],p="";const d=new Ot({transactionId:"",denomination:"",qty:1,code:"",baseUrl:Ii.flipkartConfig.baseUrl,headers:Ii.flipkartConfig.headers}),m=[];let h=!1,f=[],g=0,v=null,b="";g=o*n;const{success:y,balance:x,codeException:w,message:_}=await d.getFlipkartBalance();if(y){if(x){if(g<x){for(let e=0;e<o;e++){const o=a+"-"+(e+1);if(u=await r.getVendorOrderFromRef(o,l,i),await(new xi).log(`checking data from sd_vendor_orders collection:${u}`,!1,a,i),p=u&&u.vendor_order_id?u.vendor_order_id:null,u){await(new xi).log("Fetch Gift Card From SD Gift Card Inventory:",!1,a,i);const e=await r.getVendorTrasanctionDetails(u.vendor_order_id),o={},c={};if(o.statusCode="Fetching Data From Inventory",o.statusMessage="Please provide a unique reference ID for the order, following the gift card fetching process from the SD Gift Card Inventory.",0!==e.length)c.code=e[0].code||"",c.pin=e[0].pin||"",c.expiryDate=e[0].validity||"",c.storeToInventory=!1,c.transactionId=u.vendor_order_id,c.sku=t,c.recipient={medium:"INLINE",format:"JSON",status:"DISPATCHED",walletInfoRequired:!1},o.egv=c,m.push(o),0!==m.length&&(h=!0);else{const e=await d.redispatchFlipkartVoucher(u.vendor_order_id);if("SUCCESS"==e.statusCode)o.statusCode=e.statusCode,o.statusMessage=e.statusMessage,c.code=e.egv.code||"",c.pin=e.egv.pin||"",c.expiryDate=e.egv.expiryDate||"",c.storeToInventory=!0,c.transactionId=u.vendor_order_id,c.sku=t,c.balance=e.egv.balance,c.recipient={medium:"INLINE",format:"JSON",status:"DISPATCHED",walletInfoRequired:!1},o.egv=c,m.push(o),0!==m.length&&(h=!0);else if(await(new xi).log(`TransactionId Already Generated : ${u.vendor_order_id}`,!1,a,i),await(new xi).log(`Redispatch Flipkart Voucher statusCode:${e.statusCode} TransactionId: ${u.vendor_order_id}`,!1,a,i),await(new xi).log(`Redispatch Flipkart Voucher statusMessage:${e.statusMessage}`,!1,a,i),"ERR_NOT_GENERATED"==e.statusCode){if(!u.vendor_order_id)return await(new xi).log(`TransactionId Not Available:${e.statusMessage}`,!1,a,i),b="TransactionId Not Available",{giftCardList:m,success:!1,message:"TransactionId Not Available",codeException:!0,vendorCode:i};{await(new xi).log("Re Generating Gift Card :",!1,a,i);let o=null;if(o=await d.generateFlipkartVoucher({transactionId:u.vendor_order_id,denomination:n}),"CREATION_SUCCESSFUL"===o.statusCode)await(new xi).log("Flipkart Gift Card Re-Generated :",!1,a,i),o.egv.transactionId=u.vendor_order_id,o.egv.storeToInventory=!0,o.egv.sku=t,await s.updateVendorOrderByKeys(f,p||u.vendor_order_id,o?"completed":"pending"),h=!0,m.push(o);else if(o.codeException)return await(new xi).log(`Redispatch Flipkart Voucher generation failes:${e.statusMessage}`,!1,a,i),b=e.statusMessage,{giftCardList:m,success:!1,message:e.statusMessage,codeException:!0,vendorCode:i}}}else if("ERR_TRANSACTION_FAILED"==e.statusCode){await(new xi).log(`TransactionId Failed: ${u.vendor_order_id}`,!1,a,i),await(new xi).log("Getting TransactionId Code",!1,a,i);const e=await d.getTrasactionId();if("SUCCESS"!==e.statusCode)return await(new xi).log(`Create TransactionId Error :${e}`,!1,a,i),b="Transaction Id Not generated",{giftCardList:m,success:!1,message:"Transaction Id Not generated",codeException:!0,vendorCode:i};if(v=e.transactionId,await(new xi).log(`Flipkart TransactionId Generated : ${e}`,e,a,i),!v)return await(new xi).log(`Flipkart TransactionId Not Availabe: ${e}`,e,a,i),b="TransactionId Not Available",{giftCardList:m,success:!1,message:"TransactionId Not Available",codeException:!0,vendorCode:i};{await s.updateVendorOrderByKeys(f,p||v,"pending"),await(new xi).log("Generating Gift Card :",!1,a,i);let e=null;if(e=await d.generateFlipkartVoucher({transactionId:v,denomination:n}),"CREATION_SUCCESSFUL"===e.statusCode)await(new xi).log("Flipkart Gift Card Generated :",!1,a,i),e.egv.transactionId=v,e.egv.storeToInventory=!0,e.egv.sku=t,await s.updateVendorOrderByKeys(f,p||v,e?"completed":"pending"),h=!0,m.push(e);else if(e.codeException)return b=e.statusCode,{giftCardList:m,success:!1,message:e.statusCode,codeException:!0,vendorCode:i}}}}}else{f=await s.addVendorOrder(o,l,i),await(new xi).log("Getting TransactionId Code",!1,a,i);const e=await d.getTrasactionId();if("SUCCESS"!=e.statusCode)return await(new xi).log(`Create TransactionId Error :${e}`,!1,a,i),b="Flipkart Transaction ID Not generated",{giftCardList:m,success:!1,message:"Transaction ID Not generated",codeException:!0,vendorCode:i};if(v=e.transactionId,await(new xi).log(`Flipkart TransactionId Generated : ${e}`,e,a,i),!v)return await(new xi).log(`Flipkart TransactionId  Not Generated ${e}`,e,a,i),b="Flipkart TransactionId  Not Generated",{giftCardList:m,success:!1,message:"Flipkart TransactionId  Not Generated",codeException:!0,vendorCode:i};{await s.updateVendorOrderByKeys(f,p||v,"pending"),await(new xi).log("Generating Gift Cards",!1,a,i);let o=null;if(o=await d.generateFlipkartVoucher({transactionId:v,denomination:n}),"CREATION_SUCCESSFUL"==o.statusCode)await(new xi).log("Flipkart Gift Card Generated :",!1,a,i),o.egv.transactionId=v,o.egv.storeToInventory=!0,o.egv.sku=t,await s.updateVendorOrderByKeys(f,p||v,o?"completed":"pending"),h=!0,m.push(o);else if(o.codeException)return await(new xi).log(`Gift Card  Generating  Error ${e}`,e,a,i),b=o.statusCode,{giftCardList:m,success:!1,message:o.statusCode,codeException:!0,vendorCode:i}}}}return m.length==o&&(h=!0),{giftCardList:m,success:h,message:b,codeException:!1,vendorCode:i}}return await(new xi).log(`Flikart Insufficient balance :${_}`,!1,a,i),{giftCardList:m,success:!1,message:"Flikart Insufficient balance",codeException:!0,vendorCode:i}}return await(new xi).log(`Flikart Balance Not Found :${_}`,!1,a,i),{giftCardList:m,success:!1,message:"Flikart Balance Not Found",codeException:!0,vendorCode:i}}if(await(new xi).log(`get Flikart Balance Error :${_}`,!1,a,i),!w)return{giftCardList:m,success:!1,message:"Flikart Balance Error",codeException:!0,vendorCode:i}}catch(e){return await(new xi).log(`Error :${e}`,!1,a,i),await(new xi).jsonError({exception:e,error:`getFlipKartVoucher Error ${e}`},a,i),{giftCardList:[],success:!1,message:e,codeException:!0,vendorCode:i}}},this.getQCAmazonBearerToken=async(e,a)=>{try{let n=null,i=null;try{const t=new Ct(Ii.qcAmazonConfig);let o=null;const r=_i.qc_amazon.OAUTH_CODE_LAST_UPDATED,s=_i.qc_amazon.OAUTH_CODE,c=Ii.qcAmazonConfig.code_validity_time,l=((new Date).getTime()-r)/1e3;if(s&&r&&l<c)await(new xi).log("QC Fetching Previous OAuth Code TSLU:"+l,!1,e,a),o=s;else{await(new xi).log("QC Generating OAuth Code TSLU:"+l,!1,e,a),await(new xi).log("Getting QC Authorization Code",!1,e,a);const{code:r,codeException:s}=await t.getAuthCode(e,a);i=s,await(new xi).log("Getting QC OAuthToken",!1,e,a);const{access_token:c,oAuthException:u}=await t.getOAuthToken(r,e,a);o=c,n=u}return{access_token:o,oAuthException:n,codeException:i}}catch(t){return await(new xi).jsonError({exception:t,error:"getQCAmazonBearerToken B Error"},e,a),{access_token:null,oAuthException:n,codeException:i}}}catch(n){return await(new xi).jsonError({exception:n,error:"getQCAmazonBearerToken A Error"},e,a),null}},this.getQCAmazonVoucher=async(e,a,n,i,t,o,r,s,c,l)=>{try{await(new xi).log("getQCAmazonVoucher Initialising QC AMZN Object",!1,n,l);const u=new Ct(Ii.qcAmazonConfig);await(new xi).log("QC Getting Access Token",!1,n,l);const{access_token:p,codeException:d,oAuthException:m}=await this.getQCAmazonBearerToken(n,l);await(new xi).log("Placing QC Order",!1,n,l);const h=kt[o].ISOnum;if(c&&i){let{vouchers:e,success:a,message:i,orderId:t,status:o,orderException:s,statusCode:c}={},h=null;const f=await u.getOlderOrderDetails(r,p,n,l);e=f.vouchers,a=f.success,i=f.message,t=r,h=f.oldOrderException,await(new xi).log(`Received Old QC Order Response Suc:${a}, ordId:${t}`,!1,n,l);const g=d||s||m||h;return await(new xi).log(`isExceptionOccurred: ${!!g}`,!1,n,l),g?(await(new xi).log(`Exception Occurred QC Amazon (Order Details): coE:${d} oaE:${m} orE:${s} ooE:${h}`,!1,n,l),{vouchers:null,success:!1,message:"Exception Occurred:",exception:!0,orderId:t,vendorCode:l}):{vouchers:e,success:a,message:i,status:o,orderId:t,exception:!!g,statusCode:c,vendoCode:l}}{const{vouchers:i,success:o,message:r,orderId:c,status:f,orderException:g,statusCode:v,walletBalance:b}=await u.placeVouchersOrder({vendorSku:e,qty:a,access_token:p,referenceId:n,price:t,currencyISOCode:h,syncOnly:s,vendor_code:l}),y=null,x=d||g||m||y;return await(new xi).log(`isExceptionOccurred: ${!!x} Message:`+r,!1,n,l),x?(await(new xi).log(`Exception Occurred due to QC Amazon: coE:${d} oaE:${m} orE:${g} ooE:${y}`,!1,n,l),{vouchers:null,success:!1,message:"Exception Occurred:",exception:!0,orderId:c,vendorCode:l}):{vouchers:i,success:o,message:r,status:f,orderId:c,exception:!!x,statusCode:v,walletBalance:b,vendorCode:l}}}catch(e){return await(new xi).jsonError({exception:e,error:"getQCAmazonVoucher Error"},n,l),{vouchers:null,success:!1,message:"Exception Occurred:"+e,exception:!0,orderId:null,vendoCode:l}}},this.getQCAmazonOlderOrder=async(e,a,n)=>{try{await(new xi).log("getQCAmazonOlderOrder Initialising QC AMZN Object",!1,e,n);const i=new Ct(Ii.qcAmazonConfig);await(new xi).log("QC Getting Access Token",!1,e,n);const{access_token:t,codeException:o,oAuthException:r}=await this.getQCAmazonBearerToken(e,n);await(new xi).log("Getting QC Order History",!1,e,n);let{vouchers:s,success:c,message:l,orderId:u,status:p}={},d=null;const m=await i.getOlderOrderDetails(a,t,e,n);s=m.vouchers,c=m.success,l=m.message,u=a,d=m.oldOrderException,await(new xi).log(`Received Old QC Order Response Suc:${c}, ordId:${u}`,!1,e,n);const h=o||r||d;return await(new xi).log(`isExceptionOccurred: ${!!h}`,!1,e,n),h?(await(new xi).log(`Exception Occurred QC Amazon (Order Details): coE:${o} oaE:${r} ooE:${d}`,!1,e,n),{vouchers:null,success:!1,message:"Exception Occurred:",exception:!0,orderId:u,vendorCode:n}):{vouchers:s,success:c,message:l,status:p,orderId:u,exception:!!h}}catch(a){return await(new xi).jsonError({exception:a,error:"getQCAmazonOlderOrder Error"},e,n),{vouchers:null,success:!1,message:"Exception Occurred:"+a,exception:!0,orderId:null,vendorCode:n}}},this.getQCAmazonOrderStatus=async(e,a)=>{try{await(new xi).log("getQCAmazonOrderStatus Initialising QC AMZN Object",!1,e,a);const n=new Ct(Ii.qcAmazonConfig);await(new xi).log("QC Getting Access Token",!1,e,a);const{access_token:i,codeException:t,oAuthException:o}=await this.getQCAmazonBearerToken(e,a),{response:r}=await n.getOrderStatus(e,i,a);return await(new xi).log("get QC Amazon Order Status",!1,e,a),r}catch(n){return await(new xi).jsonError({exception:n,error:`getQCAmazonOrderStatus Error : ${n}`},e,a),{vouchers:null,success:!1,message:`Exception Occurred:${n}`,exception:!0,vendorCode:a}}},this.getFlipkartWalletBalance=async()=>{try{const e=new Ot({transactionId:"",denomination:"",qty:1,code:"",baseUrl:Ii.flipkartConfig.baseUrl,headers:Ii.flipkartConfig.headers}),{success:a,balance:n}=await e.getFlipkartBalance();return{success:a,balance:n}}catch(e){await(new xi).jsonError({exception:e,error:"get Flipkart Wallet Balance Error"},null,null)}},this.getFlipkartRedispatch=async e=>{try{const a=new Ot({transactionId:"",denomination:"",qty:1,code:"",baseUrl:Ii.flipkartConfig.baseUrl,headers:Ii.flipkartConfig.headers});return await a.redispatchFlipkartVoucher(e)}catch(e){await(new xi).jsonError({exception:e,error:"get Flipkart Wallet Balance Error"},null,null)}},this.generateFlipkartVoucher=async(e,a)=>{try{const n=new Ot({transactionId:"",denomination:"",qty:1,code:"",baseUrl:Ii.flipkartConfig.baseUrl,headers:Ii.flipkartConfig.headers});return await n.generateFlipkartVoucher({transactionId:e,denomination:a})}catch(e){await(new xi).jsonError({exception:e,error:"get Flipkart Wallet Balance Error"},null,null)}},this.getQCOrderStatus=async(e,a)=>{try{await(new xi).log("getQCOrderStatus Initialising QC Object",!1,e,a);const n=new It(Ii.quickcilverConfig);await(new xi).log("QC Getting Access Token",!1,e,a);const{access_token:i,codeException:t,oAuthException:o}=await this.getQucikCilverBearerToken(e,a),{response:r}=await n.getOrderStatus(e,i,a);return await(new xi).log("get QC  Order Status",!1,e,a),r}catch(n){return await(new xi).jsonError({exception:n,error:`getQCOrderStatus Error : ${n}`},e,a),{vouchers:null,success:!1,message:`Exception Occurred:${n}`,exception:!0,vendorCode:a}}},this.getQuickCilverVoucher=async(e,a,n,i,t,o,r,s,c,l)=>{try{await(new xi).log("getQCVoucher Initialising Quick Cilver Object",!1,n,l);const u=new It(Ii.quickcilverConfig);await(new xi).log("QC Getting Access Token",!1,n,l);const{access_token:p,codeException:d,oAuthException:m}=await this.getQucikCilverBearerToken(n,l);await(new xi).log("Placing QC Order",!1,n,l);const h=kt[o].ISOnum;if(c&&i){let{vouchers:e,success:a,message:i,orderId:t,status:o,orderException:s,statusCode:c}={},h=null;const f=await u.getOlderOrderDetails(r,p,n,l);e=f.vouchers,a=f.success,i=f.message,t=r,h=f.oldOrderException,await(new xi).log(`Received Old QC Order Response Suc:${a}, ordId:${t}`,!1,n,l);const g=d||s||m||h;return await(new xi).log(`isExceptionOccurred: ${!!g}`,!1,n,l),g?(await(new xi).log(`Exception Occurred QC (Order Details): coE:${d} oaE:${m} orE:${s} ooE:${h}`,!1,n,l),{vouchers:null,success:!1,message:"Exception Occurred:",exception:!0,orderId:t,vendorCode:l}):{vouchers:e,success:a,message:i,status:o,orderId:t,exception:!!g,statusCode:c,vendoCode:l}}{const{vouchers:i,success:o,message:r,orderId:c,status:f,orderException:g,statusCode:v,walletBalance:b}=await u.placeVouchersOrder({vendorSku:e,qty:a,access_token:p,referenceId:n,price:t,currencyISOCode:h,syncOnly:s,vendor_code:l}),y=null;let x=d||g||m||y;return await(new xi).log(`isExceptionOccurred: ${!!x} Message:`+r,!1,n,l),x?(await(new xi).log(`Exception Occurred due to QC : coE:${d} oaE:${m} orE:${g} ooE:${y}`,!1,n,l),{vouchers:null,success:!1,message:"Exception Occurred:",exception:!0,orderId:c,vendorCode:l}):{vouchers:i,success:o,message:r,status:f,orderId:c,exception:!!x,statusCode:v,walletBalance:b,vendorCode:l}}}catch(e){return await(new xi).jsonError({exception:e,error:"getQCVoucher Error"},n,l),{vouchers:null,success:!1,message:"Exception Occurred:"+e,exception:!0,orderId:null,vendoCode:l}}},this.getQucikCilverBearerToken=async(e,a)=>{try{let n=null,i=null;try{const t=new It(Ii.quickcilverConfig);let o=null;const r=_i.quick_silver.OAUTH_CODE_LAST_UPDATED,s=_i.quick_silver.OAUTH_CODE,c=Ii.quickcilverConfig.code_validity_time,l=((new Date).getTime()-r)/1e3;if(s&&r&&l<c)await(new xi).log("QC Fetching Previous OAuth Code TSLU:"+l,!1,e,a),o=s;else{await(new xi).log("QC Generating OAuth Code TSLU:"+l,!1,e,a),await(new xi).log("Getting QC Authorization Code",!1,e,a);const{code:r,codeException:s}=await t.getQuickCilverAuthCode(e,a);i=s,await(new xi).log("Getting QC OAuthToken",!1,e,a);const{access_token:c,oAuthException:u}=await t.getQuickCilverOAuthToken(r,e,a);o=c,n=u}return{access_token:o,oAuthException:n,codeException:i}}catch(t){return await(new xi).jsonError({exception:t,error:"getQCBearerToken B Error"},e,a),{access_token:null,oAuthException:n,codeException:i}}}catch(n){return await(new xi).jsonError({exception:n,error:"getQCBearerToken A Error"},e,a),null}},this.getQCOlderOrder=async(e,a,n)=>{try{await(new xi).log("getQCOlderOrder Initialising QC Object",!1,e,n);const i=new It(Ii.quickcilverConfig);await(new xi).log("QC Getting Access Token",!1,e,n);const{access_token:t,codeException:o,oAuthException:r}=await this.getQucikCilverBearerToken(e,n);await(new xi).log("Getting QC Order History",!1,e,n);let{vouchers:s,success:c,message:l,orderId:u,status:p}={},d=null;const m=await i.getOlderOrderDetails(a,t,e,n);s=m.vouchers,c=m.success,l=m.message,u=a,d=m.oldOrderException,await(new xi).log(`Received Old QC Order Response Suc:${c}, ordId:${u}`,!1,e,n);const h=o||r||d;return await(new xi).log(`isExceptionOccurred: ${!!h}`,!1,e,n),h?(await(new xi).log(`Exception Occurred QC  (Order Details): coE:${o} oaE:${r} ooE:${d}`,!1,e,n),{vouchers:null,success:!1,message:"Exception Occurred:",exception:!0,orderId:u,vendorCode:n}):{vouchers:s,success:c,message:l,status:p,orderId:u,exception:!!h}}catch(a){return await(new xi).jsonError({exception:a,error:"getQCOlderOrder Error"},e,n),{vouchers:null,success:!1,message:"Exception Occurred:"+a,exception:!0,orderId:null,vendorCode:n}}},this.getQCWalletBalance=async(e,a)=>{try{await(new xi).log("Initialising get WalletBalance Object",!1,null,null);const n=new It(Ii.quickcilverConfig),{access_token:i,codeException:t,oAuthException:o}=await this.getQucikCilverBearerToken(null,null);await(new xi).log(`access_token ${i}`,!1,null,null);const{status:r,message:s,balance:c,responseJson:l}=await n.getBalance(e,a,i);return await(new xi).log(`status: ${r}`,!1,null,null),await(new xi).log(`message: ${s}`,!1,null,null),await(new xi).log(`balance: ${c}`,!1,null,null),{status:r,message:s,balance:c,responseJson:l}}catch(e){await(new xi).jsonError({exception:e,error:"getQCWalletBalance Error"},null,null)}},this.itemsService=e,this.accountabilitySchema=a}async getWorkAdvantagePreviousOrder(e,a){try{await(new xi).log("PrevOrd Initialising WorkAdvantage Object",!1,e,a);const n=new Si(Ii.workAdvantageConfig);await(new xi).log("PrevOrd Getting Authorization Code",!1,e,a);const{code:i,codeException:t}=await this.getWorkAdvantageCode(e,a);await(new xi).log("PrevOrd Getting OAuthToken",!1,e,a);const{access_token:o,oAuthException:r}=await n.getOAuthToken(i,e,a);await(new xi).log(`PrevOrd Getting Older Order Details for Ref:${e}`,!1,e,a);const s=await n.getOlderOrderDetails(e,o,a),c=s.vouchers,l=s.success,u=s.message,p=s.orderId,d=s.oldOrderException;await(new xi).log(`PrevOrd Received Old Order Response Suc:${l}, ordId:${p}`,!1,e,a);const m=t||r||d;return await(new xi).log(`PrevOrd isExceptionOccurred: ${!!m}`,!1,e,a),m?(await(new xi).log(`PrevOrd Throwing Error: coE:${t} oaE:${r} ooE:${d}`,!1,e,a),{vouchers:null,success:!1,message:"Exception Occurred:",exception:!0,orderId:p,vendorCode:a}):{vouchers:c,success:l,message:u,orderId:p,exception:!!m}}catch(n){return await(new xi).jsonError({exception:n,error:"PrevOrd getWorkAdvantagePreviousOrder Error"},e,a),{vouchers:null,success:!1,message:"PrevOrd Exception Occurred:"+n,exception:!0,orderId:null}}}async getQCAmazonCatalog(){try{await(new xi).log("getQCAmazonCatalog Initialising QC AMZN Object",!1,null,null);const e=new Ct(Ii.qcAmazonConfig);await(new xi).log("QC Getting Access Token",!1,null,null);const{access_token:a,codeException:n,oAuthException:i}=await this.getQCAmazonBearerToken(null,null);await(new xi).log(`access_token ${a}`,!1,null,null),await(new xi).log(`codeException ${n}`,!1,null,null),await(new xi).log(`oAuthException ${i}`,!1,null,null);const{categoryId:t}=await e.getCategory(a),{productList:o}=await e.getProducts(t,a);return{productList:o,categoryId:t}}catch(e){return await(new xi).jsonError({exception:e,error:"getQCAmazonOrderStatus Error"},null,null),{vouchers:null,success:!1,message:"Exception Occurred:"+e,exception:!0}}}async getQuickCilverCatalogList(e){try{await(new xi).log("getQCCatalog Initialising QC  Object",!1,null,null);const a=new It(Ii.quickcilverConfig);await(new xi).log("QC Getting Access Token",!1,null,null);const{access_token:n,codeException:i,oAuthException:t}=await this.getQucikCilverBearerToken(null,null);if(await(new xi).log(`access_token ${n}`,!1,null,null),await(new xi).log(`codeException ${i}`,!1,null,null),await(new xi).log(`oAuthException ${t}`,!1,null,null),!e){const{categoryIds:i}=await a.getCategory(n);e=i}await(new xi).log(`categoryId: ${e}`,!1,null,null);const{productList:o}=await a.getProducts(e,n);return await(new xi).log(`productList: ${o}`,!1,null,null),{productList:o,categoryId:e}}catch(e){return await(new xi).jsonError({exception:e,error:"get Quick Cilver CatalogList Error"},null,null),{vouchers:null,success:!1,message:"Exception Occurred:"+e,exception:!0}}}async updateQuickCilverCatalog(){try{const e=new It(Ii.quickcilverConfig);await(new xi).log("QC Getting Access Token",!1,null,null);const{access_token:a,codeException:n,oAuthException:i}=await this.getQucikCilverBearerToken(null,null);await(new xi).log(`access_token ${a}`,!1,null,null),await(new xi).log(`codeException ${n}`,!1,null,null),await(new xi).log(`oAuthException ${i}`,!1,null,null);const{categoryId:t}=await e.getCategory(a);return await(new xi).log(`categoryId: ${t}`,!1,null,null),{categoryId:t}}catch(e){return await(new xi).jsonError({exception:e,error:"getQuick cilver Error"},null,null),{vouchers:null,success:!1,message:"Exception Occurred:"+e,exception:!0}}}}var jt=e=>{try{const[a,n,i]=e.split("-"),[t,o,r]=e.split("-")[3].split(":"),s=new Date(Date.UTC(a,n,i,t,o,r)).getTime();return new Date(s-198e5)}catch(e){return null}},Pt=e=>{try{const a=new Date(e);return a.toISOString()}catch(e){}};class At{constructor(e,a){this.get=null,this.set=null,this.services=null,this.accountabilitySchema=null,this.itemsService=null,this.storeToInventory=async({vouchers:e,reference_id:a,orderId:n,options:i,brand_sku:t,vendor_code:o})=>{try{const r=new wi(this.itemsService,this.accountabilitySchema),s=new vi(this.itemsService,this.accountabilitySchema),c=t||a.split("-")[0],l=await r.getBrandSkuMapping(c,a,o),u=l?l.amount:null,p=l?l.currency:null,d=await r.getVendorFromVendorCode(gi.WORK_ADVANTAGE,a),m=d?d.id:null;let h=!(!i||!i.redeemed||"boolean"!=typeof i.redeemed)&&i.redeemed;const f=i&&i.order_id?i.order_id:null,g=i&&i.extra?i.extra:{},v=[];let b=[];if(e){for(let a=0;a<e.length;a++){let o="";i&&i.extra&&i.extra.voucher_order_type&&(o=i.extra.voucher_order_type.toLowerCase());let r=i.link_reference_id||"",s=i.reference_code_otp||"";"link"===o&&(r=await this.generateUniqueCode(),s=await this.generateOTP(),n="",i.soft_link_order_id=i.soft_link_order_id?"":t+"-"+r,h=!1);const l={code:e[a].cardnumber,pin:e[a].pin_or_url,product_code:c,price:u,currency:p,gift_card:h,order_id:f,vendor_order_id:n,vendors:m,validity:jt(e[a].expiry),link_reference_id:r,reference_code_otp:s,soft_link_order_id:i.soft_link_order_id||"",link_ledger_reference_id:r?i.reference_id:"",...g};v.push(l),e[a].link_reference_id=r,e[a].reference_code_otp=s}b=e}await(new xi).log("vouchersToSave",!1,a,o);let y=[];return v.length&&(await(new xi).log("PrevOrd Saving Vouchers to Inventory",!1,a,o),y=await s.vouchersToInventory(v),y||(await(new xi).log("PrevOrd Retrieving Vouchers from Inventory",!1,a,o),y=await r.voucherKeysFromInventory(v.map((e=>e.code)))),await(new xi).log("PrevOrd Saved Voucher Keys:"+JSON.stringify(y),!1,a,o)),{keys:y,VoucherList:b}}catch(e){await(new xi).jsonError({exception:e,error:"PrevOrd storeToInventory Error"},a,o)}},this.itemsService=e,this.accountabilitySchema=a}async getOrderDetails(e,a){try{new wi(this.itemsService,this.accountabilitySchema),new vi(this.itemsService,this.accountabilitySchema);const n=new Tt,{vouchers:i,success:t,message:o,exception:r,orderId:s}=await n.getWorkAdvantagePreviousOrder(e,a);return{vouchers:i,success:t,message:o,exception:r,orderId:s}}catch(n){await(new xi).jsonError({exception:n,error:"PrevOrd getOrderDetails Error"},e,a)}}async placeNewWaOrder(e,a,n,i,t){try{const o=new wi(this.itemsService,this.accountabilitySchema),r=new Tt,s=await o.mappedVendorActiveBrandSKU(n,i,e),c=!t||null==t.retrieveIfRedeemed||t.retrieveIfRedeemed;if(s&&s.vendor_sku){const n=s.vendor_sku,{vouchers:t,success:o,message:l,exception:u,orderId:p,vendorCode:d}=await r.getWorkAdvantageVoucher(n,a,e,c,i);return{vouchers:t,success:o,message:l,exception:u,orderId:p,vendorCode:d}}return await(new xi).log("`No Vendor Sku Mapping from Brand SKU:${brand_sku}`",!1,e,i),{vouchers:null,success:!1,message:`No Vendor Sku Mapping from Brand SKU:${n}`,exception:!0,orderId:null,vendorCode:i}}catch(a){await(new xi).jsonError({exception:a,error:"PrevOrd placeNewWaOrder Error"},e,i)}return{vouchers:null,success:!1,message:"PrevOrd placeNewWaOrder Error",exception:!0,orderId:null,vendorCode:i}}async generateUniqueCode(){try{const e=new wi(this.itemsService,this.accountabilitySchema);let a=await this.generateRandomChars(16);const n=await e.getVoucherFromInventory(a);let i=[];for(0!==n.length&&(i=n.filter((e=>e.link_reference_id==a)));i.length>0;){a=await this.generateRandomChars(16);const n=await e.getVoucherFromInventory(a);0!==n.length&&(i=n.filter((e=>e.link_reference_id==a)))}return a}catch(e){await(new xi).jsonError({exception:e,error:"generate Unique Code Error"},null,null)}}async generateRandomChars(e){try{const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let n="";for(let i=0;i<e;i++){const e=Math.floor(Math.random()*a.length);n+=a.charAt(e)}return n}catch(e){await(new xi).jsonError({exception:e,error:"generate Random Chars Error"},null,null)}}async generateOTP(){try{return Math.floor(1e3+9e3*Math.random()).toString()}catch(e){await(new xi).jsonError({exception:e,error:"generate OTP Error"},null,null)}}}class Rt{constructor(e,a){this.get=null,this.set=null,this.services=null,this.accountabilitySchema=null,this.itemsService=null,this.storeToInventory=async({vouchers:e,reference_id:a,orderId:n,options:i,brand_sku:t,vendor_code:o})=>{try{const r=new wi(this.itemsService,this.accountabilitySchema),s=new vi(this.itemsService,this.accountabilitySchema),c=t||a.split("-")[0],l=await r.getBrandSkuMapping(c,a,o),u=l?l.amount:null,p=l?l.currency:null,d=await r.getVendorFromVendorCode(gi.AMAZON_QC,a),m=d?d.id:null;let h=!(!i||!i.redeemed||"boolean"!=typeof i.redeemed)&&i.redeemed;const f=i&&i.order_id?i.order_id:null,g=i&&i.extra?i.extra:{},v=[];let b=[];if(e){for(let a=0;a<e.length;a++){let o="";i&&i.extra&&i.extra.voucher_order_type&&(o=i.extra.voucher_order_type.toLowerCase());let r=i.link_reference_id||"",s=i.reference_code_otp||"";"link"===o&&(r=await this.generateUniqueCode(),s=await this.generateOTP(),n="",i.soft_link_order_id=i.soft_link_order_id?"":t+"-"+r,h=!1);const l={code:e[a].cardnumber,pin:e[a].pin_or_url,product_code:c,price:u,currency:p,gift_card:h,order_id:f,vendor_order_id:n,vendors:m,validity:new Date(e[a].expiry),link_reference_id:r,reference_code_otp:s,soft_link_order_id:i.soft_link_order_id||"",link_ledger_reference_id:r?i.reference_id:"",...g};v.push(l),e[a].link_reference_id=r,e[a].reference_code_otp=s}b=e}let y=[];return v.length&&(await(new xi).log("PrevOrd Saving Vouchers to Inventory",!1,a,o),y=await s.vouchersToInventory(v),y||(await(new xi).log("PrevOrd Retrieving Vouchers from Inventory",!1,a,o),y=await r.voucherKeysFromInventory(v.map((e=>e.code)))),await(new xi).log(`PrevOrd Saved Voucher Keys:${y}`,!1,a,o)),{keys:y,VoucherList:b}}catch(e){await(new xi).jsonError({exception:e,error:"PrevOrd storeToInventory Error"},a,o)}},this.itemsService=e,this.accountabilitySchema=a}async placeOrder(e,a,n,i,t,o,r){try{const s=new wi(this.itemsService,this.accountabilitySchema),c=(new vi(this.itemsService,this.accountabilitySchema),new Tt),l=await s.getBrandSkuMapping(n,e,r),u=l?l.amount:null,p=l?l.currency:null,d=await s.checkBrandVendorMapping(n,u,p,gi.AMAZON_QC,e,r),m=await s.mappedVendorActiveBrandSKU(n,gi.AMAZON_QC,e);if(u&&p&&d&&m&&m.vendor_sku){const n=m.vendor_sku,{vouchers:s,success:l,message:d,exception:h,orderId:f,status:g,statusCode:v,walletBalance:b}=await c.getQCAmazonVoucher(n,a,e,i.retrieveIfRedeemed,u,p,t,!!i.syncOnly,o,r);return{vouchers:s,success:l,message:d,exception:h,orderId:f,status:g,statusCode:v,walletBalance:b}}return await(new xi).log(`Either No Vendor Sku Mapping from Brand SKU:${n} or Incorrect Brand SKU Mapping or Brand Vendor Mapping Absent`,!1,e,r),{vouchers:null,success:!1,message:`Either No Vendor Sku Mapping from Brand SKU:${n} or Incorrect Brand SKU Mapping or Brand Vendor Mapping Absent`,exception:!0,orderId:null,vendorCode:r}}catch(a){await(new xi).jsonError({exception:a,error:`QC placeNewWaOrder Error : ${a}`},e,r)}return{vouchers:null,success:!1,message:"QC placeNewWaOrder Error :",exception:!0,orderId:null,vendorCode:r}}async getOrderDetails(e,a,n){try{new wi(this.itemsService,this.accountabilitySchema),new vi(this.itemsService,this.accountabilitySchema);const i=new Tt,{vouchers:t,success:o,message:r,exception:s,orderId:c,status:l}=await i.getQCAmazonOlderOrder(e,a,n);return{vouchers:t,success:o,message:r,exception:s,orderId:c,status:l}}catch(a){await(new xi).jsonError({exception:a,error:"QC placeNewWaOrder Error"},e,n)}}async checkOrderStatus(e,a){try{new wi(this.itemsService,this.accountabilitySchema),new vi(this.itemsService,this.accountabilitySchema);const n=new Tt;return await n.getQCAmazonOrderStatus(e,a)}catch(n){await(new xi).jsonError({exception:n,error:`QC checkOrderStatus Error : ${n}`},e,a)}}async generateUniqueCode(){try{const e=new wi(this.itemsService,this.accountabilitySchema);new vi(this.itemsService,this.accountabilitySchema);let a=await this.generateRandomChars(16);const n=await e.getVoucherFromInventory(a);let i=[];for(0!==n.length&&(i=n.filter((e=>e.link_reference_id==a)));i.length>0;){a=await this.generateRandomChars(16);const n=await e.getVoucherFromInventory(a);0!==n.length&&(i=n.filter((e=>e.link_reference_id==a)))}return a}catch(e){return await(new xi).jsonError({exception:e,error:"generate Unique Code Error"},null,null),null}}async generateRandomChars(e){try{const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let n="";for(let i=0;i<e;i++){const e=Math.floor(Math.random()*a.length);n+=a.charAt(e)}return n}catch(e){return await(new xi).jsonError({exception:e,error:"generate Random Chars Error"},null,null),null}}async generateOTP(){try{return Math.floor(1e3+9e3*Math.random()).toString()}catch(e){return await(new xi).jsonError({exception:e,error:"generate OTP Error"},null,null),null}}}class Bt{constructor(e,a){this.get=null,this.set=null,this.services=null,this.accountabilitySchema=null,this.itemsService=null,this.storeToInventory=async(e,a,n,i,t,o)=>{try{await(new xi).log("Initialising Flipkart Inventory",!1,a,i);const r=new wi(this.itemsService,this.accountabilitySchema),s=new vi(this.itemsService,this.accountabilitySchema),c=a.split("-")[0],l=await r.getBrandSkuMapping(c,a,i),u=(l&&l.amount,l?l.currency:null),p=await r.getVendorFromVendorCode(gi.FLIPKART_EGV,a),d=p?p.id:null;let m=!(!n||!n.redeemed||"boolean"!=typeof n.redeemed)&&n.redeemed,h=n&&n.order_id?n.order_id:null;const f=n&&n.extra?n.extra:{};let g;const v=[];let b=[];if(0!==e.length){for(let a=0;a<e.length;a++){let i="";n&&n.extra&&n.extra.voucher_order_type&&(i=n.extra.voucher_order_type.toLowerCase());let r=n.link_reference_id||"",s=n.reference_code_otp||"";g=Pt(e[a].egv.expiryDate),"link"===i&&(r=await this.generateUniqueCode(),s=await this.generateOTP(),h="",m=!1,n.soft_link_order_id=n.soft_link_order_id?"":t+"-"+r),r&&(h="");const c={code:e[a].egv.code,pin:e[a].egv.pin,price:e[a].egv.balance,currency:u,gift_card:m,product_code:e[a].egv.sku,order_id:h,vendor_order_id:e[a].egv.transactionId,vendors:d,validity:g,link_reference_id:r,reference_code_otp:s,soft_link_order_id:n.soft_link_order_id||"",link_ledger_reference_id:r?n.reference_id:"",bulk_qty_status:o||!1,...f};v.push(c),e[a].link_reference_id=r,e[a].reference_code_otp=s}b=e}let y=[];if(0!==v.length){await(new xi).log("PrevOrd Saving Vouchers to Inventory",!1,a,i);for(let e=0;e<v.length;e++){const a=await r.getVendorTrasanctionDetails(v[e].vendor_order_id);if(0!==a.length)a[0].code==v[e].code&&a[0].pin!==v[e].pin&&s.updateInventoryPin(a[0].id,v[e].pin),o&&!a[0].bulk_qty_status&&s.updateBulkQuantityStatus(a[0].id,o),y.push(a[0].id);else{const a=await s.vouchersToSingleInventory(v[e]);y.push(a)}}y||(await(new xi).log("PrevOrd Retrieving Vouchers from Inventory",!1,a,i),y=await r.voucherKeysFromInventory(v.map((e=>e.code)))),await(new xi).log(`PrevOrd Saved Voucher Keys: ${y}`,!1,a,i)}return{keys:y,VoucherList:b}}catch(e){return await(new xi).log(`Flipkart Inventory Error: ${e}`,!1,a,i),await(new xi).jsonError({exception:e,error:"Flipkart PrevOrd storeToInventory Error"},a,i),{giftCardList:null,keys:null,success:!1,message:`${e}`,exception:!1,orderId:null,vendorCode:i}}},this.itemsService=e,this.accountabilitySchema=a}async flipkartplaceOrder(e,a,n,i,t,o){try{const i=new wi(this.itemsService,this.accountabilitySchema),t=(new vi(this.itemsService,this.accountabilitySchema),new Tt(this.itemsService,this.accountabilitySchema)),r=await i.getBrandSkuMapping(n,e,o),s=r?r.amount:null,c=r?r.currency:null,l=await i.checkBrandVendorMapping(n,s,c,gi.FLIPKART_EGV,e,o),u=await i.mappedVendorActiveBrandSKU(n,o,e);if(s&&c&&l&&u&&u.vendor_sku){u.vendor_sku;const{giftCardList:i,success:r,message:c,codeException:l,vendorCode:p}=await t.getFlipkartVoucher(a,e,s,o,n);return await(new xi).log(`Flipkart Place Order giftCardList status:${r}`,l,e,o),await(new xi).log(`Flipkart Place Order giftCardList message:${c}`,l,e,o),{giftCardList:i,success:r,message:c,exception:l,orderId:null,vendorCode:p}}return{giftCardList:null,success:!1,message:`Either No Vendor Sku Mapping from Brand SKU:${n} or Incorrect Brand SKU Mapping or Brand Vendor Mapping Absent`,exception:!1,orderId:null,vendorCode:o}}catch(a){return await(new xi).jsonError({exception:a,error:"Flipkart placeNewWaOrder Error"},e,o),{giftCardList:null,success:!1,message:`${a}`,exception:!1,orderId:null,vendorCode:o}}}async generateUniqueCode(){try{const e=new wi(this.itemsService,this.accountabilitySchema);new vi(this.itemsService,this.accountabilitySchema);let a=await this.generateRandomChars(16);const n=await e.getVoucherFromInventory(a);let i=[];for(0!==n.length&&(i=n.filter((e=>e.link_reference_id==a)));i.length>0;){a=await this.generateRandomChars(16);const n=await e.getVoucherFromInventory(a);0!==n.length&&(i=n.filter((e=>e.link_reference_id==a)))}return a}catch(e){return await(new xi).jsonError({exception:e,error:"generate Unique Code error"},null,null),null}}async generateRandomChars(e){try{const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let n="";for(let i=0;i<e;i++){const e=Math.floor(Math.random()*a.length);n+=a.charAt(e)}return n}catch(e){return await(new xi).jsonError({exception:e,error:"generate Random Chars"},null,null),null}}async generateOTP(){try{return Math.floor(1e3+9e3*Math.random()).toString()}catch(e){return await(new xi).jsonError({exception:e,error:"generate OTP"},null,null),null}}}class Nt{constructor(e,a){this.get=null,this.set=null,this.services=null,this.accountabilitySchema=null,this.itemsService=null,this.storeToInventory=async({vouchers:e,reference_id:a,orderId:n,options:i,brand_sku:t,vendor_code:o})=>{try{const r=new wi(this.itemsService,this.accountabilitySchema),s=new vi(this.itemsService,this.accountabilitySchema),c=t||a.split("-")[0],l=await r.getBrandSkuMapping(c,a,o),u=l?l.amount:null,p=l?l.currency:null,d=await r.getVendorFromVendorCode(gi.QUICKCILVER_EGV,a),m=d?d.id:null;let h=!(!i||!i.redeemed||"boolean"!=typeof i.redeemed)&&i.redeemed;const f=i&&i.order_id?i.order_id:null,g=i&&i.extra?i.extra:{},v=[];let b=[];if(e){for(let a=0;a<e.length;a++){let o="";i&&i.extra&&i.extra.voucher_order_type&&(o=i.extra.voucher_order_type.toLowerCase());let r=i.link_reference_id||"",s=i.reference_code_otp||"";"link"===o&&(r=await this.generateUniqueCode(),s=await this.generateOTP(),n="",i.soft_link_order_id=i.soft_link_order_id?"":t+"-"+r,h=!1);const l={code:e[a].cardnumber,pin:e[a].pin_or_url,product_code:c,price:u,currency:p,gift_card:h,order_id:f,vendor_order_id:n,vendors:m,validity:new Date(e[a].expiry),link_reference_id:r,reference_code_otp:s,soft_link_order_id:i.soft_link_order_id||"",link_ledger_reference_id:r?i.reference_id:"",...g};v.push(l),e[a].link_reference_id=r,e[a].reference_code_otp=s}b=e}let y=[];return v.length&&(await(new xi).log("PrevOrd Saving Vouchers to Inventory",!1,a,o),y=await s.vouchersToInventory(v),y||(await(new xi).log("PrevOrd Retrieving Vouchers from Inventory",!1,a,o),y=await r.voucherKeysFromInventory(v.map((e=>e.code)))),await(new xi).log(`PrevOrd Saved Voucher Keys:${y}`,!1,a,o)),{keys:y,VoucherList:b}}catch(e){await(new xi).jsonError({exception:e,error:"PrevOrd storeToInventory Error"},a,o)}},this.itemsService=e,this.accountabilitySchema=a}async placeOrder(e,a,n,i,t,o,r){try{const s=new wi(this.itemsService,this.accountabilitySchema),c=(new vi(this.itemsService,this.accountabilitySchema),new Tt),l=await s.getBrandSkuMapping(n,e,r),u=l?l.amount:null,p=l?l.currency:null,d=await s.checkBrandVendorMapping(n,u,p,gi.QUICKCILVER_EGV,e,r),m=await s.mappedVendorActiveBrandSKU(n,gi.QUICKCILVER_EGV,e);if(u&&p&&d&&m&&m.vendor_sku){const n=m.vendor_sku,{vouchers:s,success:l,message:d,exception:h,orderId:f,status:g,statusCode:v,walletBalance:b}=await c.getQuickCilverVoucher(n,a,e,i.retrieveIfRedeemed,u,p,t,!!i.syncOnly,o,r);return{vouchers:s,success:l,message:d,exception:h,orderId:f,status:g,statusCode:v,walletBalance:b}}return await(new xi).log(`Either No Vendor Sku Mapping from Brand SKU:${n} or Incorrect Brand SKU Mapping or Brand Vendor Mapping Absent`,!1,e,r),{vouchers:null,success:!1,message:`Either No Vendor Sku Mapping from Brand SKU:${n} or Incorrect Brand SKU Mapping or Brand Vendor Mapping Absent`,exception:!0,orderId:null,vendorCode:r}}catch(a){await(new xi).jsonError({exception:a,error:`QC placeNewWaOrder Error : ${a}`},e,r)}return{vouchers:null,success:!1,message:"QC placeNewWaOrder Error :",exception:!0,orderId:null,vendorCode:r}}async getOrderDetails(e,a,n){try{new wi(this.itemsService,this.accountabilitySchema),new vi(this.itemsService,this.accountabilitySchema);const i=new Tt,{vouchers:t,success:o,message:r,exception:s,orderId:c,status:l}=await i.getQCOlderOrder(e,a,n);return{vouchers:t,success:o,message:r,exception:s,orderId:c,status:l}}catch(a){await(new xi).jsonError({exception:a,error:"QC placeNewWaOrder Error"},e,n)}}async checkOrderStatus(e,a){try{new wi(this.itemsService,this.accountabilitySchema),new vi(this.itemsService,this.accountabilitySchema);const n=new Tt;return await n.getQCOrderStatus(e,a)}catch(n){await(new xi).jsonError({exception:n,error:`QC checkOrderStatus Error : ${n}`},e,a)}}async generateUniqueCode(){try{const e=new wi(this.itemsService,this.accountabilitySchema);new vi(this.itemsService,this.accountabilitySchema);let a=await this.generateRandomChars(16);const n=await e.getVoucherFromInventory(a);let i=[];for(0!==n.length&&(i=n.filter((e=>e.link_reference_id==a)));i.length>0;){a=await this.generateRandomChars(16);const n=await e.getVoucherFromInventory(a);0!==n.length&&(i=n.filter((e=>e.link_reference_id==a)))}return a}catch(e){return await(new xi).jsonError({exception:e,error:"generate Unique Code Error"},null,null),null}}async generateRandomChars(e){try{const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let n="";for(let i=0;i<e;i++){const e=Math.floor(Math.random()*a.length);n+=a.charAt(e)}return n}catch(e){return await(new xi).jsonError({exception:e,error:"generate Random Chars Error"},null,null),null}}async generateOTP(){try{return Math.floor(1e3+9e3*Math.random()).toString()}catch(e){return await(new xi).jsonError({exception:e,error:"generate OTP Error"},null,null),null}}}const Dt=require("exceljs");class Lt{constructor(e,a){this.get=null,this.set=null,this.services=null,this.accountabilitySchema=null,this.itemsService=null,this.updateAccountabilitySchema=e=>{this.accountabilitySchema=e},this.getWACatalog=async({countryCode:e})=>{try{const a=[],n=new Tt;return(await n.getWorkAdvantageCatalogue(e)).dealList.forEach((e=>{const{benefits:n,name:i,id:t}=e;let{terms:o,howtoavail:r}=e;const s=i,c=t;n.forEach(((e,n)=>{const i=e.value,t=e.utid,l=e.upc_id,u=e.offer_id,p=e.price;0!=n&&(o=null,r=null),a.push({brandId:c,brandName:s,productName:i,utid:t,upc_id:l,offerId:u,price:p,terms:o,howtoavail:r})}))})),a}catch(e){return[]}},this.getQCCatalog=async({countryCode:e})=>{try{await(new xi).log("getCatalog QC-AMAZON",!1,null,null);const e=[],a=new Tt,{productList:n,categoryId:i}=await a.getQCAmazonCatalog();await(new xi).log(`getCatalog QC-AMAZON productList ${n}`,!1,null,null);for(let a=0;a<n.length;a++){const t=n[a];e.push({categoryId:i,productName:t.name,sku:t.sku,price:`${t.currency.code} ${t.minPrice} - ${t.maxPrice}`})}return e}catch(e){return[]}},this.getQuickCilverCatalog=async({countryCode:e,vendorApiIntId:a})=>{try{const e=[],n=new wi(this.itemsService,this.accountabilitySchema),i=(new vi(this.itemsService,this.accountabilitySchema),new Tt),t=await n.getVendorFromVendorCode(a,null),o=t?t.categoryid:null,{productList:r,categoryId:s}=await i.getQuickCilverCatalogList(o);for(let a=0;a<r.length;a++){const n=r[a];e.push({categoryId:s,productName:n.name,sku:n.sku,price:`${n.currency.code} ${n.minPrice} - ${n.maxPrice}`})}return e}catch(e){return[]}},this.getCatalog=async({vendorApiIntId:e,countryCode:a})=>{let n=[];await(new xi).log("getCatalog initialize",!1,null,null);try{switch(e){case gi.WORK_ADVANTAGE:n=await this.getWACatalog({countryCode:a});break;case gi.AMAZON_QC:n=await this.getQCCatalog({countryCode:a});break;case gi.FLIPKART_EGV:n=[];break;case gi.QUICKCILVER_EGV:n=await this.getQuickCilverCatalog({countryCode:a,vendorApiIntId:e})}}catch(e){return{success:!1,error:e,catalog:null}}return{success:!0,catalog:n,error:null}},this.catalogToExcel=async({vendorApiIntId:e,catalog:a})=>{try{if(e==gi.WORK_ADVANTAGE){const e=new Dt.Workbook,n=e.addWorksheet("Sheet 1");return n.columns=[{header:"Brand Id",key:"brandId"},{header:"Brand Name",key:"brandName"},{header:"Product Name",key:"productName"},{header:"UTID",key:"utid"},{header:"UPC ID",key:"upc_id"},{header:"Offer Id",key:"offerId"},{header:"Price",key:"price"},{header:"TNC",key:"terms"},{header:"How to Avail",key:"howtoavail"}],n.addRows(a),e}if(e==gi.AMAZON_QC){const e=new Dt.Workbook,n=e.addWorksheet("Sheet 1");return n.columns=[{header:"Category Id",key:"categoryId"},{header:"Product Name",key:"productName"},{header:"SKU",key:"sku"},{header:"Price",key:"price"}],n.addRows(a),e}if(e==gi.QUICKCILVER_EGV){const e=new Dt.Workbook,n=e.addWorksheet("Sheet 1");return n.columns=[{header:"Category Id",key:"categoryId"},{header:"Product Name",key:"productName"},{header:"SKU",key:"sku"},{header:"Price",key:"price"}],n.addRows(a),e}}catch(e){return null}},this.getWABalance=async()=>{try{const e=new Tt,{success:a,balance:n}=await e.getWorkAdvantageWalletBalance();return{success:a,balance:n}}catch(e){return{success:!1,error:e}}},this.getFlipkartBalance=async()=>{try{const e=new Tt,{success:a,balance:n}=await e.getFlipkartWalletBalance();return{success:a,balance:n}}catch(e){return{success:!1,error:e}}},this.getBalance=async({vendorApiIntId:e})=>{try{switch(e){case gi.WORK_ADVANTAGE:return this.getWABalance();case gi.AMAZON_QC:return{success:!1,error:"Balance Auto updated when order placed",balance:0};case gi.FLIPKART_EGV:return this.getFlipkartBalance();case gi.QUICKCILVER_EGV:return{success:!1,error:"Balance Auto updated when order placed",balance:0}}return{success:!1,error:"Vendor Not found"}}catch(e){return{success:!1,error:e}}},this.getRedispatchDetails=async e=>{try{const a=new Tt;return await a.getFlipkartRedispatch(e)}catch(e){return await(new xi).jsonError({exception:e,error:"getRedispatchDetails"},null,null),{success:!1,error:e}}},this.generateFlipkartVoucher=async(e,a)=>{try{const n=new Tt;return await n.generateFlipkartVoucher(e,a)}catch(e){return await(new xi).jsonError({exception:e,error:"generateFlipkartVoucher"},null,null),{success:!1,error:e}}},this.updateCatalog=async({vendorApiIntId:e,countryCode:a})=>{let n=[];await(new xi).log("update catalog initialize",!1,null,null);try{if(e===gi.QUICKCILVER_EGV)n=await this.updateQuickCilverCatalogId({countryCode:a,vendorApiIntId:e})}catch(e){return await(new xi).jsonError({exception:e,error:"updateCatalog"},null,null),{success:!1,error:e,message:"record"}}return n},this.updateQuickCilverCatalogId=async({countryCode:e,vendorApiIntId:a})=>{try{await(new xi).log(`update catalog controller vendorApiIntId ${a}`,!1,null,null);const e=new wi(this.itemsService,this.accountabilitySchema),n=new vi(this.itemsService,this.accountabilitySchema),i=new Tt,t=await e.getVendorFromVendorCode(a,null);await(new xi).log(`vendorDetails ${t}`,!1,null,null);const o=t?t.id:null,{categoryId:r}=await i.updateQuickCilverCatalog();if(await(new xi).log(`categoryId ${r}`,!1,null,null),await(new xi).log(`id ${o}`,!1,null,null),r&&o){return await n.updateVendorCategoryId(o,r)?{success:!0,message:"Record Updated"}:(await(new xi).log("categoryId Record not Updated",!1,null,null),{success:!0,message:"Record not Updated"})}return{success:!0,message:"Record not Updated, Due to CategoryId / Vendorid Not Available"}}catch(e){return await(new xi).jsonError({exception:e,error:"updateQuickCilverCatalogId"},null,null),[]}},this.getQCBalance=async(e,a)=>{try{const n=new Tt;await(new xi).log("getQCBalance",!1,null,null);const{status:i,message:t,balance:o,responseJson:r}=await n.getQCWalletBalance(e,a);return{status:i,message:t,balance:o,responseJson:r}}catch(e){return{success:!1,error:e}}},this.inventoryReport=async(e,a,n)=>{try{const i=new wi(this.itemsService,this.accountabilitySchema),t=new vi(this.itemsService,this.accountabilitySchema),o=new Tt;await(new xi).log("getQCBalance",!1,null,null);const r=await i.inventoryRedeemList(e,a,n),s=0!==r.length;if(s)for(let e=0;e<r.length;e++){let a=r[e].pin.replace(/-/g,""),n=r[e].code;if(a&&n){const{status:i,message:s,balance:c,responseJson:l}=await o.getQCWalletBalance(n,a);if(i&&c>0){let a={};a.giftcard_inventory_id=r[e].id,a.balance=l.balance,a.validity=l.expiry,a.code_status=l.status,await t.sd_giftcard_inventory_balance_report(a),await t.updateCheckBalaceStatus(r[e].id)}}else await(new xi).log(`Pin Not Available id: ${r[e].id}`,!1,null,null)}return{success:s,inventoryList:r}}catch(e){return await(new xi).log(`inventoryReport ${e}`,!1,null,null),{success:!1,error:e}}},this.revalidateInventoryReport=async(e,a)=>{try{const n=new wi(this.itemsService,this.accountabilitySchema),i=new vi(this.itemsService,this.accountabilitySchema),t=new Tt;await(new xi).log("Revalidate Inventory Report",!1,null,null);const o=await n.inventoryRedeemListRevlidate(e,a),r=0!==o.length;for(let e=0;e<o.length;e++){let a=o[e].giftcard_inventory_id.pin.replace(/-/g,""),n=o[e].giftcard_inventory_id.code;if(a&&n){const{status:r,message:s,balance:c,responseJson:l}=await t.getQCWalletBalance(n,a);if(r&&c>0){const a=l.expiry;await i.revalidateCheckBalaceStatus(o[e].id,a)}}else await(new xi).log(`Pin Not Available id: ${o[e].id}`,!1,null,null)}return{success:r,inventoryList:o}}catch(e){return await(new xi).log(`inventoryReport ${e}`,!1,null,null),{success:!1,error:e}}},this.services=e,this.accountabilitySchema=a;const{ItemsService:n}=e;this.itemsService=n}async oldVouchersWorkAdvantage({vendor_code:e,reference_id:a,options:n}){var i,t;try{const o=new At(this.itemsService,this.accountabilitySchema),{vouchers:r,success:s,message:c,exception:l,orderId:u}=await o.getOrderDetails(a,e),p=(n&&n.store_to_inventory,s?await o.storeToInventory({vouchers:r,reference_id:a,orderId:u,options:n,brand_sku:brand_sku,vendor_code:e}):null),d=null!==(i=null==p?void 0:p.keys)&&void 0!==i?i:null,m=null!==(t=null==p?void 0:p.VoucherList)&&void 0!==t?t:null,h={success:s,message:c,keys:d||null,exception:l,vendorCode:e,response:[]};return s&&m&&m.length&&m.forEach((({cardnumber:e,pin_or_url:a,expiry:n,link_reference_id:i,reference_code_otp:t})=>{const o={code:e,pin:a,expiry:jt(n),link_reference_id:i,reference_code_otp:t};h.response.push(o)})),h}catch(n){await(new xi).jsonError({exception:n,error:"oldVouchersWorkAdvantage Error"},a,e)}}async oldVouchersQCAmazon({vendor_code:e,reference_id:a,options:n}){var i,t;try{const o=new wi(this.itemsService,this.accountabilitySchema),r=new vi(this.itemsService,this.accountabilitySchema),s=await o.getVendorFromVendorCode(e,a),c=s?s.id:null;let l=[],u="",p="";let d=n.voucherSku;const m=new Rt(this.itemsService,this.accountabilitySchema);l=await o.getVendorOrderFromRef(a,c,e),u=l&&l.vendor_order_id?l.vendor_order_id:null,p=l&&l.reference_append?l.reference_append:0;const h=p?`${a}-${p}`:a,f=await m.checkOrderStatus(h,e);if("CANCELED"==f.status){return{success:!1,message:"Order Status: CANCELED",keys:null,exception:!1,orderStatusFromVendor:null,statusCodeFromVendor:null,vendorCode:e,response:[]}}if("PENDING"==f.status){return{success:!1,message:"Order Status: PENDING",keys:null,exception:!1,orderStatusFromVendor:null,statusCodeFromVendor:null,vendorCode:e,response:[]}}if("PROCESSING"==f.status){return{success:!1,message:"Order Status: PROCESSING",keys:null,exception:!1,orderStatusFromVendor:null,statusCodeFromVendor:null,vendorCode:e,response:[]}}if("COMPLETE"!=f.status){return{success:!1,message:"Order not found",keys:null,exception:!1,orderStatusFromVendor:null,statusCodeFromVendor:null,vendorCode:e,response:[]}}u=f.orderId;const{vouchers:g,success:v,message:b,exception:y,orderId:x,status:w}=await m.getOrderDetails(h,u,e),_=(await r.updateVendorOrderStatus(a,u||x,v?"completed":"pending",e),v?await m.storeToInventory({vouchers:g,reference_id:a,orderId:x,options:n,sku:d,vendor_code:e}):null),S=null!==(i=null==_?void 0:_.keys)&&void 0!==i?i:null,E=null!==(t=null==_?void 0:_.VoucherList)&&void 0!==t?t:null,C={success:v,message:b,keys:S||null,exception:y,orderStatusFromVendor:w,statusCodeFromVendor:w,vendorCode:e,response:[]};return v&&E&&E.length&&E.forEach((({cardnumber:e,pin_or_url:a,expiry:n,link_reference_id:i,reference_code_otp:t})=>{const o={code:e,pin:a,expiry:new Date(n),link_reference_id:i,reference_code_otp:t};C.response.push(o)})),C}catch(n){await(new xi).jsonError({exception:n,error:"oldVouchersQCAmazon Error"},a,e)}}async oldVouchersFlipkart({vendor_code:e,reference_id:a,options:n}){var i,t;try{const o=new wi(this.itemsService,this.accountabilitySchema),r=new vi(this.itemsService,this.accountabilitySchema),s=await o.getVendorFromVendorCode(e,a),c=s?s.id:null;let l=[],u="",p=[],d=n.voucherSku,m={success:!1,message:"",response:[],keys:[],orderStatusFromVendor:"",statusCodeFromVendor:"",exception:!1,vendorCode:e};const h={},f={},g=new Bt(this.itemsService,this.accountabilitySchema);let v=a+"-1";if(l=await o.getVendorOrderFromRef(v,c,e),u=l&&l.vendor_order_id?l.vendor_order_id:null,u){await(new xi).log("Fetch Gift Card From SD Gift Card Inventory:",!1,a,e);const s=await o.getVendorTrasanctionDetails(u);if(0!==s.length){m.keys.push(s[0].id);const e={code:s[0].code,pin:s[0].pin,expiry:s[0].validity,link_reference_id:s[0].link_reference_id,reference_code_otp:s[0].reference_code_otp};return m.response.push(e),m.success=!0,m.exception=!1,m.message="Fetching From Inventory",m}{const o=await this.getRedispatchDetails(u);if("SUCCESS"==o.statusCode){if(h.statusCode=o.statusCode,h.statusMessage=o.statusMessage,f.code=o.egv.code||"",f.pin=o.egv.pin||"",f.expiryDate=Pt(o.egv.expiryDate)||"",f.balance=o.egv.balance||"",f.storeToInventory=!0,f.transactionId=u,f.sku=n.voucherSku,f.recipient={medium:"INLINE",format:"JSON",status:"DISPATCHED",walletInfoRequired:!1},h.egv=f,p.push(h),null===p||0==p.length)return m;await r.updateVendorOrderStatus(a,u,"completed",e);const s=await g.storeToInventory({giftCardList:p,reference_id:a,options:n,vendor_code:e,sku:d}),c=null!==(i=null==s?void 0:s.keys)&&void 0!==i?i:null,l=null!==(t=null==s?void 0:s.VoucherList)&&void 0!==t?t:null;return m.keys=c,l.forEach((({egv:e,link_reference_id:a,reference_code_otp:n})=>{const i=Pt(e.expiryDate),t={code:e.code,pin:e.pin,expiry:i,link_reference_id:a,reference_code_otp:n};m.response.push(t)})),m.success=!0,m.exception=!1,m.message=p[0].statusMessage||"",m}return m}}}catch(n){await(new xi).log(`oldVouchersFlipkart Error:${n}`,!1,a,e),await(new xi).jsonError({exception:n,error:"oldVouchersFlipkart Error"},a,e)}}async oldVouchersQuickCilver({vendor_code:e,reference_id:a,options:n}){var i,t;try{const o=new wi(this.itemsService,this.accountabilitySchema),r=new vi(this.itemsService,this.accountabilitySchema),s=await o.getVendorFromVendorCode(e,a),c=s?s.id:null;let l=[],u="",p="";let d=n.voucherSku;const m=new Nt(this.itemsService,this.accountabilitySchema);l=await o.getVendorOrderFromRef(a,c,e),u=l&&l.vendor_order_id?l.vendor_order_id:null,p=l&&l.reference_append?l.reference_append:0;const h=p?`${a}-${p}`:a,f=await m.checkOrderStatus(h,e);if("CANCELED"==f.status){return{success:!1,message:"Order Status: CANCELED",keys:null,exception:!1,orderStatusFromVendor:null,statusCodeFromVendor:null,vendorCode:e,response:[]}}if("PENDING"==f.status){return{success:!1,message:"Order Status: PENDING",keys:null,exception:!1,orderStatusFromVendor:null,statusCodeFromVendor:null,vendorCode:e,response:[]}}if("PROCESSING"==f.status){return{success:!1,message:"Order Status: PROCESSING",keys:null,exception:!1,orderStatusFromVendor:null,statusCodeFromVendor:null,vendorCode:e,response:[]}}if("COMPLETE"!=f.status){return{success:!1,message:"Order not found",keys:null,exception:!1,orderStatusFromVendor:null,statusCodeFromVendor:null,vendorCode:e,response:[]}}u=f.orderId;const{vouchers:g,success:v,message:b,exception:y,orderId:x,status:w}=await m.getOrderDetails(h,u,e),_=(await r.updateVendorOrderStatus(a,u||x,v?"completed":"pending",e),v?await m.storeToInventory({vouchers:g,reference_id:a,orderId:x,options:n,sku:d,vendor_code:e}):null),S=null!==(i=null==_?void 0:_.keys)&&void 0!==i?i:null,E=null!==(t=null==_?void 0:_.VoucherList)&&void 0!==t?t:null,C={success:v,message:b,keys:S||null,exception:y,orderStatusFromVendor:w,statusCodeFromVendor:w,vendorCode:e,response:[]};return v&&E&&E.length&&E.forEach((({cardnumber:e,pin_or_url:a,expiry:n,link_reference_id:i,reference_code_otp:t})=>{const o={code:e,pin:a,expiry:new Date(n),link_reference_id:i,reference_code_otp:t};C.response.push(o)})),C}catch(n){await(new xi).jsonError({exception:n,error:"oldVouchersQC Error"},a,e)}}async getAndStoreOldVouchers({vendor_code:e,reference_id:a,options:n}){try{switch(e){case gi.WORK_ADVANTAGE:return this.oldVouchersWorkAdvantage({vendor_code:e,reference_id:a,options:n});case gi.AMAZON_QC:return this.oldVouchersQCAmazon({vendor_code:e,reference_id:a,options:n});case gi.FLIPKART_EGV:return this.oldVouchersFlipkart({vendor_code:e,reference_id:a,options:n});case gi.QUICKCILVER_EGV:return this.oldVouchersQuickCilver({vendor_code:e,reference_id:a,options:n})}return{success:!1,message:"Unknown Vendor"}}catch(n){await(new xi).jsonError({exception:n,error:"PrevOrd getOldVouchers Error"},a,e)}}async orderWorkAdvantage({vendor_code:e,reference_id:a,options:n,brand_sku:i,quantity:t}){var o,r;try{const s=new wi(this.itemsService,this.accountabilitySchema),c=new vi(this.itemsService,this.accountabilitySchema),l=await s.getVendorFromVendorCode(e,a),u=l?l.id:null;let p=[],d="";const m=new At(this.itemsService,this.accountabilitySchema);if(p=await s.getVendorOrderFromRef(a,u,e),d=p&&p.vendor_order_id?p.vendor_order_id:null,!p){await c.addVendorOrder(a,u,e)}const{vouchers:h,success:f,message:g,exception:v,orderId:b}=await m.placeNewWaOrder(a,t,i,e,n),y=(await c.updateVendorOrderStatus(a,d||b,f?"completed":"pending",e),f?await m.storeToInventory({vouchers:h,reference_id:a,orderId:b,options:n,brand_sku:i,vendor_code:e}):null),x=null!==(o=null==y?void 0:y.keys)&&void 0!==o?o:null,w=null!==(r=null==y?void 0:y.VoucherList)&&void 0!==r?r:null,_={success:f,message:g,keys:x||null,exception:v,vendorCode:e,response:[]};return f&&w&&w.length&&w.forEach((({cardnumber:e,pin_or_url:a,expiry:n,link_reference_id:i,reference_code_otp:t})=>{const o={code:e,pin:a,expiry:jt(n),link_reference_id:i,reference_code_otp:t};_.response.push(o)})),_}catch(n){return await(new xi).jsonError({exception:n,error:`orderWorkAdvantage Error : ${n}`},a,e),{success:!1,message:"Server Error Occurred",vendorCode:e}}}async orderQCAmazon({vendor_code:e,reference_id:a,options:n,brand_sku:i,quantity:t,env:o}){var r,s;try{a.startsWith(o.SD_PREFIX)||(a=o.SD_PREFIX+a);const c=new wi(this.itemsService,this.accountabilitySchema),l=new vi(this.itemsService,this.accountabilitySchema),u=await c.getVendorFromVendorCode(e,a),p=u?u.id:null;let d=[],m="",h="",f=!1;const g=new Rt(this.itemsService,this.accountabilitySchema);d=await c.getVendorOrderFromRef(a,p,e),m=d&&d.vendor_order_id?d.vendor_order_id:null,h=d&&d.reference_append?d.reference_append:0;let v=h?`${a}-${h}`:a;const b=await g.checkOrderStatus(v,e);if("CANCELED"==b.status){h=1*h+1,v=h?`${a}-${h}`:a;await l.updateVendorOrderReferenceAppend(a,h,e)}else{if("PENDING"==b.status){return{success:!1,message:"Order Status: PENDING",keys:null,exception:!1,orderStatusFromVendor:null,statusCodeFromVendor:null,vendorCode:e,response:[]}}if("PROCESSING"==b.status){return{success:!1,message:"Order Status: PROCESSING",keys:null,exception:!1,orderStatusFromVendor:null,statusCodeFromVendor:null,vendorCode:e,response:[]}}"COMPLETE"==b.status&&(m=b.orderId,f=!0)}if(!d){await l.addVendorOrder(a,p,e)}const{vouchers:y,success:x,message:w,exception:_,orderId:S,status:E,statusCode:C,walletBalance:k}=await g.placeOrder(v,t,i,n,m,f,e);await l.updateVendorOrderStatus(a,m||S,x||f?"completed":"pending",e);if(k)try{await l.updateVendorWalletBalance(p,k)}catch(n){await(new xi).jsonError({exception:n,error:"Wallet Updation Error"},a,e)}const O=x?await g.storeToInventory({vouchers:y,reference_id:a,orderId:S,options:n,brand_sku:i,vendor_code:e}):null,I=null!==(r=null==O?void 0:O.keys)&&void 0!==r?r:null,T=null!==(s=null==O?void 0:O.VoucherList)&&void 0!==s?s:null,j={success:x,message:w,keys:I||null,exception:_,orderStatusFromVendor:E,statusCodeFromVendor:C,vendorCode:e,response:[]};return x&&T&&T.length&&T.forEach((({cardnumber:e,pin_or_url:a,expiry:n,link_reference_id:i,reference_code_otp:t})=>{const o={code:e,pin:a,expiry:new Date(n),link_reference_id:i,reference_code_otp:t};j.response.push(o)})),j}catch(n){return await(new xi).jsonError({exception:n,error:`orderQCAmazon Error : ${n}`},a,e),{success:!1,message:`Server Error Occurred : ${n}`,vendorCode:e}}}async orderFlipkart({vendor_code:e,reference_id:a,options:n,brand_sku:i,quantity:t,env:o}){var r,s;try{const o=new wi(this.itemsService,this.accountabilitySchema),c=(new vi(this.itemsService,this.accountabilitySchema),await o.getVendorFromVendorCode(e,a)),l=(c&&c.id,""),u=new Bt(this.itemsService,this.accountabilitySchema);let{giftCardList:p,success:d,message:m,exception:h,orderId:f,vendorCode:g}=await u.flipkartplaceOrder(a,t,i,n,l,e);const v={success:d,message:m||"",response:[],keys:[],orderStatusFromVendor:"",statusCodeFromVendor:"",exception:h,vendorCode:e};t!==p.length&&(d=!1);const b=0!==p.length?await u.storeToInventory(p,a,n,e,i,d):null,y=null!==(r=null==b?void 0:b.keys)&&void 0!==r?r:null,x=null!==(s=null==b?void 0:b.VoucherList)&&void 0!==s?s:null;return v.keys=y,d&&x.forEach((({egv:e,link_reference_id:a,reference_code_otp:n})=>{const i=Pt(e.expiryDate),t={code:e.code,pin:e.pin,expiry:i,link_reference_id:a,reference_code_otp:n};v.response.push(t)})),v.success=d,v.exception=!d,v}catch(n){return await(new xi).jsonError({exception:n,error:"Flipkart Error "},a,e),{success:!1,message:"Server Error Occurred",vendorCode:e}}}async orderQuickCilver({vendor_code:e,reference_id:a,options:n,brand_sku:i,quantity:t,env:o}){var r,s;try{a.startsWith(o.SD_PREFIX)||(a=o.SD_PREFIX+a);const c=new wi(this.itemsService,this.accountabilitySchema),l=new vi(this.itemsService,this.accountabilitySchema),u=await c.getVendorFromVendorCode(e,a),p=u?u.id:null;let d=[],m="",h="",f=!1;const g=new Nt(this.itemsService,this.accountabilitySchema);d=await c.getVendorOrderFromRef(a,p,e),m=d&&d.vendor_order_id?d.vendor_order_id:null,h=d&&d.reference_append?d.reference_append:0;let v=h?`${a}-${h}`:a;const b=await g.checkOrderStatus(v,e);if("CANCELED"==b.status){h=1*h+1,v=h?`${a}-${h}`:a;await l.updateVendorOrderReferenceAppend(a,h,e)}else{if("PENDING"==b.status){return{success:!1,message:"Order Status: PENDING",keys:null,exception:!1,orderStatusFromVendor:null,statusCodeFromVendor:null,vendorCode:e,response:[]}}if("PROCESSING"==b.status){return{success:!1,message:"Order Status: PROCESSING",keys:null,exception:!1,orderStatusFromVendor:null,statusCodeFromVendor:null,vendorCode:e,response:[]}}"COMPLETE"==b.status&&(m=b.orderId,f=!0)}if(!d){await l.addVendorOrder(a,p,e)}const{vouchers:y,success:x,message:w,exception:_,orderId:S,status:E,statusCode:C,walletBalance:k}=await g.placeOrder(v,t,i,n,m,f,e);await l.updateVendorOrderStatus(a,m||S,x||f?"completed":"pending",e);if(k)try{await l.updateVendorWalletBalance(p,k)}catch(n){await(new xi).jsonError({exception:n,error:"Wallet Updation Error"},a,e)}const O=x?await g.storeToInventory({vouchers:y,reference_id:a,orderId:S,options:n,brand_sku:i,vendor_code:e}):null,I=null!==(r=null==O?void 0:O.keys)&&void 0!==r?r:null,T=null!==(s=null==O?void 0:O.VoucherList)&&void 0!==s?s:null,j={success:x,message:w,keys:I||null,exception:_,orderStatusFromVendor:E,statusCodeFromVendor:C,vendorCode:e,response:[]};return x&&T&&T.length&&T.forEach((({cardnumber:e,pin_or_url:a,expiry:n,link_reference_id:i,reference_code_otp:t})=>{const o={code:e,pin:a,expiry:new Date(n),link_reference_id:i,reference_code_otp:t};j.response.push(o)})),j}catch(n){return await(new xi).jsonError({exception:n,error:`orderQC Error : ${n}`},a,e),{success:!1,message:`Server Error Occurred : ${n}`,vendorCode:e}}}async placeNewOrderAndStoreVoucher({vendor_code:e,reference_id:a,options:n,brand_sku:i,quantity:t,env:o}){try{switch(e){case gi.WORK_ADVANTAGE:return this.orderWorkAdvantage({vendor_code:e,reference_id:a,options:n,brand_sku:i,quantity:t});case gi.AMAZON_QC:return this.orderQCAmazon({vendor_code:e,reference_id:a,options:n,brand_sku:i,quantity:t,env:o});case gi.FLIPKART_EGV:return this.orderFlipkart({vendor_code:e,reference_id:a,options:n,brand_sku:i,quantity:t,env:o});case gi.QUICKCILVER_EGV:return this.orderQuickCilver({vendor_code:e,reference_id:a,options:n,brand_sku:i,quantity:t,env:o})}return{success:!1,message:"Unknown Vendor",vendorCode:e}}catch(n){await(new xi).jsonError({exception:n,error:"PrevOrd placeNewOrderAndStoreVoucher Error"},a,e)}return{success:!1,message:"PrevOrd placeNewOrderAndStoreVoucher Error",vendorCode:e}}async getLinkVouchers({link_reference_id:e,reference_code_otp:a,env:n}){try{await(new xi).log("get Link Voucher Controller:"+e+"-"+a,!1,null,null),await(new xi).log(`getLinkVouchers step 2:${e}-${a} `,!1,null,null);const i=new wi(this.itemsService,this.accountabilitySchema);let t=await i.inventoryOtpVerification(e,a);if(0!==t.length){const{product_code:a,price:i,link_ledger_reference_id:o,soft_link_redeemed_status:r,id:s}=t[0];let c=a,l=s,u=i;return await(new xi).log(`getLinkVouchers step 3:${c}-${u}-${l}`,!1,null,null),await this.getLinkVoucherDetails({sku:c,amount:u,link_reference_id:e,link_ledger_reference_id:o,env:n,soft_link_redeemed_status:r,inventoryId:l})}return{success:!1,message:"Not Found Record!. Please Contact The administrator."}}catch(e){return await(new xi).jsonError({exception:e,error:`getLinkVouchers Error ${e}`},null,null),{success:!1,message:"Not Found Record!. Please Contact The administrator."}}}async getLinkVoucherDetails({sku:e,amount:a,link_reference_id:n,link_ledger_reference_id:i,env:t,soft_link_redeemed_status:o,inventoryId:r}){try{const s=new wi(this.itemsService,this.accountabilitySchema),c=new vi(this.itemsService,this.accountabilitySchema);let l=[],u={success:!0,message:"Voucher Successfully Fetched",amount:"",voucher:"",pin:"",valid_till:"",brand_details:{}},p=await s.getBrandSkuMappingbySku(e);if(!o){let d=await s.getCampaignRedemptions(n,t);if(null==d?void 0:d.data.success){let m=(null==d?void 0:d.data.data.soft_link_redemption_id)||"";if(await(new xi).log(`redeemedId:${m}`,!1,null,null),m){await(new xi).log(` redeemedId:${m}`,!1,null,null);let e=await s.getInventoryByid(m);return await(new xi).log(` voucher:${e}`,!1,null,null),o||await c.softLinkOtpVerificationUpdate(r),u.voucher=e[0].code,u.pin=e[0].pin,u.valid_till=e[0].validity,u.amount=e[0].price,u.brand_details=p,u}{await(new xi).log("get Link VoucherDetails Controller:"+e+"-"+a+"-"+n,!1,null,null),await(new xi).log(`getLinkVoucherDetails step 4:${e}-${a}-${n}`,!1,null,null);let o=e+"-"+n;o&&(await(new xi).log(`getLinkVoucherDetails step 5:${o}`,!1,null,null),l=await s.getLinkVoucherDetailsbyorderid(o)),await(new xi).log("getLinkVoucherDetails orderId:"+i,!1,null,null),await(new xi).log(`getLinkVoucherDetails link_ledger_reference_id:${i}`,!1,null,null),i&&0===l.length&&(await(new xi).log(`getLinkVoucherDetails step 6:${i}`,!1,null,null),l=await s.getLinkVoucherDetailsbyorderid(i)),0===l.length&&(o||i)&&(await(new xi).log(`getLinkVoucherDetails step 7:${l.length}`,!1,null,null),l=await s.getLinkVoucherDetails(e,a));let d={};if(0!==l.length){await(new xi).log(`getLinkVoucherDetails step 8:${l.length}`,!1,null,null);const e=l[0];return e.gift_card||(await(new xi).log(`getLinkVoucherDetails step 9:${e.gift_card}`,!1,null,null),i?(await(new xi).log(`link_ledger_reference_id:${i}`,!1,null,null),d=await c.updateLinkVoucherStatus(e.id,i)):(await(new xi).log(`soft_link_order_id:${o}`,!1,null,null),d=await c.updateLinkVoucherStatus(e.id,o)),await c.softLinkOtpVerificationUpdate(r),await c.updateSoftLinkRedemptionInCampaigns(n,d,t)),u.voucher=e.code,u.pin=e.pin,u.valid_till=e.validity,u.amount=e.price,u.brand_details=p,u}return u.message="Not Fetched Voucher Details . Please Contact The administrator.",u.success=!1,u}}return u.message="Not Fetched Voucher Details! Please Contact The administrator.",u.success=!1,u}if(o){await(new xi).log(` soft_link_redeemed_status:${o}`,!1,null,null);let e=await s.getCampaignRedemptions(n,t);if(await(new xi).log(` getOneRedeem:${e.data}`,!1,null,null),e.data.success){let a=e.data.data.soft_link_redemption_id||"";if(a){let e=await s.getInventoryByid(a);return u.voucher=e[0].code,u.pin=e[0].pin,u.valid_till=e[0].validity,u.amount=e[0].price,u.brand_details=p,u}return u.message="Not Fetched Voucher Details! Please Contact The administrator.",u.success=!1,u}return u.message="Not Fetched Voucher Details Please Contact The administrator.",u.success=!1,u}}catch(e){return await(new xi).jsonError({exception:e,error:"get Link Voucher Details Error"},null,null),{success:!1,message:"get Link Voucher Details Error"}}}async otpVerification({link_reference_id:e,reference_code_otp:a}){try{await(new xi).log(` otpVerification:${e}-${a}`,!1,null,null);const n=new wi(this.itemsService,this.accountabilitySchema);return 0!==(await n.inventoryOtpVerification(e,a)).length?(await(new xi).log(` OTP Verified:${e}-${a}`,!1,null,null),{success:!0,message:"OTP Verified"}):{success:!1,message:"Invalid OTP/Code"}}catch(e){return await(new xi).jsonError({exception:e,error:"otpVerification Error"},null,null),null}}async otpUpdate({link_reference_id:e,reference_code_otp:a,old_reference_code_otp:n}){try{const i=new wi(this.itemsService,this.accountabilitySchema),t=new vi(this.itemsService,this.accountabilitySchema);let o=await i.getInventoryByreferance(e,n);if(0!==o.length){if(o[0].link_reference_id===e){let n=await t.updateOtp(o[0].id,a,e);return o=await i.getInventoryByid(n),{success:!0,message:"OTP Updated",response:o}}return{success:!1,message:"OTP Not Updated! Due to Link Reference Id Not Matched "}}return{success:!1,message:"OTP Not Updated"}}catch(e){return await(new xi).jsonError({exception:e,error:`OTP Not Updated ${e}`},null,null),{success:!1,message:"OTP Not Updated"}}}async getOneVocher(e){try{const a=new wi(this.itemsService,this.accountabilitySchema);new vi(this.itemsService,this.accountabilitySchema);let n=await a.getVoucherBySoftLinkId(e);return 0!==n.length?n:[]}catch(e){await(new xi).jsonError({exception:e,error:"getOneVocher Error"},null,null)}}async referenceUpdate(e){try{new wi(this.itemsService,this.accountabilitySchema);const a=new vi(this.itemsService,this.accountabilitySchema);return await a.referenceupdate(e)?{success:!0,message:"Record Updated"}:{success:!0,message:"Record not Updated"}}catch(e){await(new xi).jsonError({exception:e,error:"referenceUpdate"},null,null)}}}var Vt=async(e,{services:a,getSchema:n,env:i})=>{const t=new xi,o=async(e,n,i)=>{try{t.createLoggerInstance(a.ItemsService,{accountability:e.accountability,schema:e.schema},e.body),e.headers["sp-qc-auth"]&&(e.headers.authorization=e.headers["sp-qc-auth"],delete e.headers["sp-qc-auth"]),i()}catch(e){i()}},r=async(e,a,n)=>{try{const a=e.originalUrl.split("/vpp/yh").join(""),n=Ii.qcAmazonConfig.base_url+a,i=e.body,t=(e.method+"").toUpperCase();let o=n;const r=Ii.qcAmazonConfig.client_secret,s=e=>{if(e instanceof Array)var a=[],n=Object.keys(e);else a={},n=Object.keys(e);n.sort((function(e,a){return e<a?-1:e>a?1:0}));for(const i in n){const t=n[i];"object"==typeof e[t]?(e[t]instanceof Array&&(a[t]=s(e[t])),a[t]=s(e[t])):a[t]=e[t]}return a},c=()=>{const e=o.split("?"),a=e[0],n=e[1].split("&");return o=a+"?"+n.sort().join("&"),u(o)},l=()=>{const e=[];return e.push(t.toUpperCase()),o.indexOf("?")>=0?e.push(c()):e.push(u(o)),i&&Object.keys(i).length&&e.push(u(JSON.stringify(s(i)))),e.join("&")},u=e=>encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}));e.headers.signature=Bi(l(),r).toString()}catch(e){}n()};e.post("/get-vouchers",o,(async(e,n)=>{try{const t=e.body,{required_vouchers:o,options:r}=t;if(!(o&&Array.isArray(o)&&o.length)){const e={success:!1,message:"'required_vouchers' is invalid or null or has no items",response:[]};return void n.send([e])}const s=o,c={accountability:e.accountability,schema:e.schema},l=[];s.forEach(((e,n)=>{const t=new Promise(((n,t)=>{(async function({voucherRequest:e,services:a,accountabilitySchema:n,options:i,env:t}){let o="",r="";try{const{amt:s,qty:c,sku:l}=e;let{cur:u}=e;if(u||(u="INR"),!(s>0&&c>0&&Number.isInteger(c)&&l&&"string"==typeof l&&l.trim().length))return{success:!1,message:"Please send a valid request",response:[],exception:void 0,orderStatusFromVendor:void 0,vendorCode:void 0,statusCodeFromVendor:void 0};const{ItemsService:p}=a,d=new wi(p,n);new vi(p,n);let m=[];const h={};if(m=await d.getVendorOrderByReferenceId(i.reference_id,null),0!==m.length?h.api_integration_id=m[0].vendor.api_integration_id||"":(i.reference_id,m=await d.getVendorOrderByReferenceId(i.reference_id,null),0!==m.length&&(h.api_integration_id=m[0].vendor.api_integration_id||"")),await d.checkBrandStatus(l,s,u,i.reference_id,null)){const e=await d.bestVendor(l,s,u,i.reference_id,null),p=e?e.choose_a_vendor:null,m=e?p.id:null;let f=e?p.api_integration_id:null;const g=e?p.entity_name:null,v=(new Tt,new Lt(a,n));if(p&&m||h.api_integration_id){let e={};switch(h.api_integration_id&&(f=h?h.api_integration_id:f),o=i.reference_id,r=f,f){case gi.WORK_ADVANTAGE:e=await v.placeNewOrderAndStoreVoucher({vendor_code:gi.WORK_ADVANTAGE,reference_id:i.reference_id,options:i,brand_sku:l,quantity:c,env:t});break;case gi.AMAZON_QC:e=await v.placeNewOrderAndStoreVoucher({vendor_code:gi.AMAZON_QC,reference_id:i.reference_id,options:i,brand_sku:l,quantity:c,env:t});break;case gi.FLIPKART_EGV:e=await v.placeNewOrderAndStoreVoucher({vendor_code:gi.FLIPKART_EGV,reference_id:i.reference_id,options:i,brand_sku:l,quantity:c,env:t});break;case gi.QUICKCILVER_EGV:e=await v.placeNewOrderAndStoreVoucher({vendor_code:gi.QUICKCILVER_EGV,reference_id:i.reference_id,options:i,brand_sku:l,quantity:c,env:t});break;default:e={success:!1,message:`Selected Vendor: '${g}', is not Integrated`,response:[]}}return e}return await(new xi).log("Vendor Not found, either vendor or brand or amount not mapped!!",!1,i.reference_id,r),{success:!1,message:"Vendor Not found, either vendor or brand or amount not mapped!!",response:[],exception:null,orderStatusFromVendor:null,vendorCode:r,statusCodeFromVendor:null}}return await(new xi).log("Either brand for the given SKU is Inactive or SKU Not Mapped with given amount'",!1,i.reference_id,r),{success:!1,message:"Either brand for the given SKU is Inactive or SKU Not Mapped with given amount",response:[],exception:null,orderStatusFromVendor:null,vendorCode:r,statusCodeFromVendor:null}}catch(e){return await(new xi).jsonError({exception:e,error:`vouchersController: ${e}`},i.reference_id,r),{success:!1,exception:!0,message:`Exception Occurred: ${e}`,response:[],orderStatusFromVendor:null,vendorCode:r,statusCodeFromVendor:null}}})({voucherRequest:e,accountabilitySchema:c,services:a,options:r,env:i}).then((e=>{n(e)}))}));l.push(t)})),Promise.all(l).then((e=>{n.send(e)}))}catch(e){n.send({success:!1,exception:!0,message:"Exception Occurred: "+e,response:[]}),await(new xi).jsonError({exception:e,error:"get-vouchers-error"},null,null)}})),e.post("/get-old-vouchers",o,(async(e,n)=>{try{const{vendor_code:i,reference_id:t,options:o}=e.body,r={accountability:e.accountability,schema:e.schema},s=new Lt(a,r),c=await s.getAndStoreOldVouchers({vendor_code:i,reference_id:t,options:o});n.send(c)}catch(e){n.send({success:!1,error:e,exception:!0}),await(new xi).jsonError({exception:e,error:"get-catalog-error"},null,null)}})),e.post("/place-new-order",o,(async(e,n)=>{try{let{vendor_code:t,brand_sku:o,reference_id:r,options:s,quantity:c}=e.body;const l={accountability:e.accountability,schema:e.schema},u=new Lt(a,l),p=await u.placeNewOrderAndStoreVoucher({vendor_code:t,reference_id:r,options:s,brand_sku:o,quantity:c,env:i});n.send(p)}catch(e){n.send({success:!1,error:e,exception:!0}),await(new xi).jsonError({exception:e,error:"get-catalog-error"},null,null)}})),e.get("/get-catalog/:id/:countryCode",o,(async(e,n)=>{try{const i=e.params.id,t=e.params.countryCode,o={accountability:e.accountability,schema:e.schema};await(new xi).log(`get-catalog vendorApiIntId : ${i}`,!1,null,null);const r=new Lt(a,o),{success:s,catalog:c,error:l}=await r.getCatalog({vendorApiIntId:i,countryCode:t});if(await(new xi).log(`success  : ${s}`,!1,null,null),await(new xi).log(`catalog  : ${c}`,!1,null,null),s){const e=await r.catalogToExcel({vendorApiIntId:i,catalog:c});if(e)return n.setHeader("Content-Type","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"),n.setHeader("Content-Disposition","attachment; filename=catalog.xlsx"),e.xlsx.write(n).then((()=>{n.status(200).end()}));n.send({success:!1,error:"Excel creation error"})}else n.send({success:!1,error:l})}catch(e){n.send({success:!1,error:e,exception:!0}),await(new xi).jsonError({exception:e,error:"get-catalog-error"},null,null)}})),e.get("/get-balance/:id",o,(async(e,n)=>{try{const i=e.params.id,t={accountability:e.accountability,schema:e.schema},o=new Lt(a,t),{success:r,balance:s,error:c}=await o.getBalance({vendorApiIntId:i});r?n.send({success:!0,balance:s}):n.send({success:!1,error:c})}catch(e){n.send({success:!1,error:e,exception:!0}),await(new xi).jsonError({exception:e,error:"get-balance-error"},null,null)}})),e.get("/yh/*",[o,r],(function(e,a,n){try{if("true"!=process.env.VOUCHERS_PROXY_ENABLED)return void a.send({message:"Proxy Disabled"});const n=e.originalUrl.split("/vpp/yh").join(""),i=Ii.qcAmazonConfig.base_url+n;e.headers.Authorization=e.headers.authorization,delete e.headers.authorization,delete e.headers.host;Et(i,{headers:{...e.headers,Authorization:e.headers.Authorization},method:"GET"}).catch((e=>{a.send({error:"GET Error:"+e})})).then((async e=>{try{const n=await e.json();a.send(n)}catch(e){(new xi).jsonError({exception:e,error:"get-proxy-error-1"},null,null)}}))}catch(e){(new xi).jsonError({exception:e,error:"get-proxy-error-2"},null,null)}})),e.post("/yh/*",[o,r],(function(e,a,n){try{if("true"!=process.env.VOUCHERS_PROXY_ENABLED)return void a.send({message:"Proxy Disabled"});const n=e.originalUrl.split("/vpp/yh").join(""),i=Ii.qcAmazonConfig.base_url+n,t=e.body?e.body:{};e.headers.Authorization=e.headers.authorization,delete e.headers.authorization,delete e.headers.host;Et(i,{headers:{...e.headers,Authorization:e.headers.Authorization},body:JSON.stringify(t),method:"POST"}).catch((e=>{a.send({error:"POST Error:"+e})})).then((async e=>{try{const n=await e.json();a.send(n)}catch(e){(new xi).jsonError({exception:e,error:"post-catalog-error-1"},null,null)}}))}catch(e){(new xi).jsonError({exception:e,error:"post-catalog-error-2"},null,null)}})),e.post("/linkredeemvoucher",o,(async(e,n)=>{try{const{link_reference_id:t,reference_code_otp:o}=e.body;await(new xi).log(`soft link step 1:${t}-${o} `,!1,null,null);const r={accountability:e.accountability,schema:e.schema},s=new Lt(a,r),c=await s.getLinkVouchers({link_reference_id:t,reference_code_otp:o,env:i});n.send(c)}catch(e){n.send({success:!1,error:e,exception:!0}),await(new xi).jsonError({exception:e,error:"get-link-voucher-error"},null,null)}})),e.post("/linkverifyotp",o,(async(e,n)=>{try{const{link_reference_id:i,reference_code_otp:t}=e.body,o={accountability:e.accountability,schema:e.schema},r=new Lt(a,o),s=await r.otpVerification({link_reference_id:i,reference_code_otp:t});n.send(s)}catch(e){n.send({success:!1,error:e,exception:!0}),await(new xi).jsonError({exception:e,error:"get-link-voucher-error"},null,null)}})),e.post("/otpupdate",o,(async(e,n)=>{try{const{link_reference_id:i,reference_code_otp:t,old_reference_code_otp:o}=e.body,r={accountability:e.accountability,schema:e.schema},s=new Lt(a,r),c=await s.otpUpdate({link_reference_id:i,reference_code_otp:t,old_reference_code_otp:o});n.send(c)}catch(e){n.send({success:!1,error:e,exception:!0}),await(new xi).jsonError({exception:e,error:"get-link-voucher-error"},null,null)}})),e.post("/getonevoucher",o,(async(e,n)=>{try{const{id:i}=e.body,t={accountability:e.accountability,schema:e.schema},o=new Lt(a,t),r=await o.getOneVocher(i);n.send(r)}catch(e){n.send({success:!1,error:e,exception:!0}),await(new xi).jsonError({exception:e,error:"get-link-voucher-error"},null,null)}})),e.post("/referenceupdate",o,(async(e,n)=>{try{const{id:i}=e.body,t={accountability:e.accountability,schema:e.schema},o=new Lt(a,t),r=await o.referenceUpdate(i);n.send(r)}catch(e){n.send({success:!1,error:e,exception:!0}),await(new xi).jsonError({exception:e,error:"get-link-voucher-error"},null,null)}})),e.get("/update-catalog/:id/:countryCode",o,(async(e,n)=>{try{const i=e.params.id,t=e.params.countryCode,o={accountability:e.accountability,schema:e.schema};await(new xi).log(`udpate-catalog vendorApiIntId : ${i}`,!1,null,null);const r=new Lt(a,o),s=await r.updateCatalog({vendorApiIntId:i,countryCode:t});await(new xi).log(`catalogResponse  : ${s}`,!1,null,null),n.send(s)}catch(e){n.send({success:!1,error:e,exception:!0}),await(new xi).jsonError({exception:e,error:"get-catalog-error"},null,null)}})),e.post("/cardbalance",o,(async(e,n)=>{try{const{cardNumber:i,pin:t}=e.body,o={accountability:e.accountability,schema:e.schema},r=new Lt(a,o),s=await r.getQCBalance(i,t);n.send(s)}catch(e){n.send({success:!1,error:e,exception:!0}),await(new xi).jsonError({exception:e,error:"cardbalance-error"},null,null)}})),e.post("/card-balace-report",o,(async(e,n)=>{try{const i={accountability:e.accountability,schema:e.schema},{start_date:t,end_date:o,limit:r}=e.body,s=new Lt(a,i),{success:c,inventoryList:l,error:u}=await s.inventoryReport(t,o,r);await(new xi).log(`success  : ${c}`,!1,null,null),n.send({success:c,inventoryList:l})}catch(e){await(new xi).jsonError({exception:e,error:"card-balace-report-error"},null,null),n.send({success:!1,error:e,exception:!0})}})),e.post("/revalidate-card-balace",o,(async(e,n)=>{try{const i={accountability:e.accountability,schema:e.schema},{start_date:t,end_date:o}=e.body,r=new Lt(a,i),{success:s,inventoryList:c,error:l}=await r.revalidateInventoryReport(t,o);await(new xi).log(`success  : ${s}`,!1,null,null),n.send({success:s,inventoryList:c})}catch(e){await(new xi).jsonError({exception:e,error:"card-balace-report-error"},null,null),n.send({success:!1,error:e,exception:!0})}}))};let Ft=0;const zt={START_BOUNDARY:Ft++,HEADER_FIELD_START:Ft++,HEADER_FIELD:Ft++,HEADER_VALUE_START:Ft++,HEADER_VALUE:Ft++,HEADER_VALUE_ALMOST_DONE:Ft++,HEADERS_ALMOST_DONE:Ft++,PART_DATA_START:Ft++,PART_DATA:Ft++,END:Ft++};let qt=1;const Ut=qt,$t=qt*=2,Mt=e=>32|e,Qt=()=>{};class Gt{constructor(e){this.index=0,this.flags=0,this.onHeaderEnd=Qt,this.onHeaderField=Qt,this.onHeadersEnd=Qt,this.onHeaderValue=Qt,this.onPartBegin=Qt,this.onPartData=Qt,this.onPartEnd=Qt,this.boundaryChars={},e="\r\n--"+e;const a=new Uint8Array(e.length);for(let n=0;n<e.length;n++)a[n]=e.charCodeAt(n),this.boundaryChars[a[n]]=!0;this.boundary=a,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=zt.START_BOUNDARY}write(e){let a=0;const n=e.length;let i=this.index,{lookbehind:t,boundary:o,boundaryChars:r,index:s,state:c,flags:l}=this;const u=this.boundary.length,p=u-1,d=e.length;let m,h;const f=e=>{this[e+"Mark"]=a},g=e=>{delete this[e+"Mark"]},v=(e,a,n,i)=>{void 0!==a&&a===n||this[e](i&&i.subarray(a,n))},b=(n,i)=>{const t=n+"Mark";t in this&&(i?(v(n,this[t],a,e),delete this[t]):(v(n,this[t],e.length,e),this[t]=0))};for(a=0;a<n;a++)switch(m=e[a],c){case zt.START_BOUNDARY:if(s===o.length-2){if(45===m)l|=$t;else if(13!==m)return;s++;break}if(s-1==o.length-2){if(l&$t&&45===m)c=zt.END,l=0;else{if(l&$t||10!==m)return;s=0,v("onPartBegin"),c=zt.HEADER_FIELD_START}break}m!==o[s+2]&&(s=-2),m===o[s+2]&&s++;break;case zt.HEADER_FIELD_START:c=zt.HEADER_FIELD,f("onHeaderField"),s=0;case zt.HEADER_FIELD:if(13===m){g("onHeaderField"),c=zt.HEADERS_ALMOST_DONE;break}if(s++,45===m)break;if(58===m){if(1===s)return;b("onHeaderField",!0),c=zt.HEADER_VALUE_START;break}if(h=Mt(m),h<97||h>122)return;break;case zt.HEADER_VALUE_START:if(32===m)break;f("onHeaderValue"),c=zt.HEADER_VALUE;case zt.HEADER_VALUE:13===m&&(b("onHeaderValue",!0),v("onHeaderEnd"),c=zt.HEADER_VALUE_ALMOST_DONE);break;case zt.HEADER_VALUE_ALMOST_DONE:if(10!==m)return;c=zt.HEADER_FIELD_START;break;case zt.HEADERS_ALMOST_DONE:if(10!==m)return;v("onHeadersEnd"),c=zt.PART_DATA_START;break;case zt.PART_DATA_START:c=zt.PART_DATA,f("onPartData");case zt.PART_DATA:if(i=s,0===s){for(a+=p;a<d&&!(e[a]in r);)a+=u;a-=p,m=e[a]}if(s<o.length)o[s]===m?(0===s&&b("onPartData",!0),s++):s=0;else if(s===o.length)s++,13===m?l|=Ut:45===m?l|=$t:s=0;else if(s-1===o.length)if(l&Ut){if(s=0,10===m){l&=~Ut,v("onPartEnd"),v("onPartBegin"),c=zt.HEADER_FIELD_START;break}}else l&$t&&45===m?(v("onPartEnd"),c=zt.END,l=0):s=0;if(s>0)t[s-1]=m;else if(i>0){const e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);v("onPartData",0,i,e),i=0,f("onPartData"),a--}break;case zt.END:break;default:throw new Error(`Unexpected state entered: ${c}`)}b("onHeaderField"),b("onHeaderValue"),b("onPartData"),this.index=s,this.state=c,this.flags=l}end(){if(this.state===zt.HEADER_FIELD_START&&0===this.index||this.state===zt.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==zt.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}var Kt=Object.freeze({__proto__:null,toFormData:async function(e,a){if(!/multipart/i.test(a))throw new TypeError("Failed to fetch");const n=a.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!n)throw new TypeError("no or bad content-type header, no multipart boundary");const i=new Gt(n[1]||n[2]);let t,o,r,s,c,l;const u=[],p=new Wi,d=e=>{r+=g.decode(e,{stream:!0})},m=e=>{u.push(e)},h=()=>{const e=new Fi(u,l,{type:c});p.append(s,e)},f=()=>{p.append(s,r)},g=new TextDecoder("utf-8");g.decode(),i.onPartBegin=function(){i.onPartData=d,i.onPartEnd=f,t="",o="",r="",s="",c="",l=null,u.length=0},i.onHeaderField=function(e){t+=g.decode(e,{stream:!0})},i.onHeaderValue=function(e){o+=g.decode(e,{stream:!0})},i.onHeaderEnd=function(){if(o+=g.decode(),t=t.toLowerCase(),"content-disposition"===t){const e=o.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);e&&(s=e[2]||e[3]||""),l=function(e){const a=e.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!a)return;const n=a[2]||a[3]||"";let i=n.slice(n.lastIndexOf("\\")+1);return i=i.replace(/%22/g,'"'),i=i.replace(/&#(\d{4});/g,((e,a)=>String.fromCharCode(a))),i}(o),l&&(i.onPartData=m,i.onPartEnd=h)}else"content-type"===t&&(c=o);o="",t=""};for await(const a of e)i.write(a);return i.end(),p}});module.exports=Vt;
